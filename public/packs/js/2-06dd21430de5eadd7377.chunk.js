(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{2838:function(t,e,i){},2839:function(t,e,i){},2840:function(t,e,i){},2841:function(t,e,i){},2868:function(t,e,i){"use strict";var n=i(144),o=i(347),a=(i(6),i(18),i(19),i(230)),r=i(510),s=i(16),c=i(122),l=i(86);function u(t,e,i,n,o,a,r){try{var s=t[a](r),c=s.value}catch(l){return void i(l)}s.done?e(c):Promise.resolve(c).then(n,o)}var E=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return a.c.create({doc:new a.b(a.h).parse(t),plugins:Object(a.j)({schema:a.h,placeholder:e,plugins:i,onImageUpload:n})})},d={mixins:[c.a,l.a,s.a],props:{value:{type:String,default:""},editorId:{type:String,default:""},placeholder:{type:String,default:""}},data:function(){return{editorView:null,state:void 0,plugins:[]}},computed:{contentFromEditor:function(){return this.editorView?a.a.serialize(this.editorView.state.doc):""}},watch:{value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t!==this.contentFromEditor&&this.reloadState()},editorId:function(){this.reloadState()}},created:function(){this.state=E(this.value,this.placeholder,this.plugins,this.openFileBrowser)},mounted:function(){this.createEditorView(),this.editorView.updateState(this.state),this.focusEditorInputField()},methods:{openFileBrowser:function(){this.$refs.imageUploadInput.click()},onFileChange:function(){var t=this.$refs.imageUploadInput.files[0];Object(r.a)(t,4)?this.uploadImageToStorage(t):this.showAlert(this.$t("HELP_CENTER.ARTICLE_EDITOR.IMAGE_UPLOAD.ERROR_FILE_SIZE",{size:4})),this.$refs.imageUploadInput.value=""},uploadImageToStorage:function(t){var e,i=this;return(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.$store.dispatch("articles/attachImage",{portalSlug:i.$route.params.portalSlug,file:t});case 3:(n=e.sent)&&i.onImageUploadStart(n),i.showAlert(i.$t("HELP_CENTER.ARTICLE_EDITOR.IMAGE_UPLOAD.SUCCESS")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),i.showAlert(i.$t("HELP_CENTER.ARTICLE_EDITOR.IMAGE_UPLOAD.ERROR"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,i=arguments;return new Promise((function(n,o){var a=e.apply(t,i);function r(t){u(a,n,o,r,s,"next",t)}function s(t){u(a,n,o,r,s,"throw",t)}r(void 0)}))})()},onImageUploadStart:function(t){var e=this.editorView.state.selection.from,i=this.editorView.state.schema.nodes.image.create({src:t}),n=this.editorView.state.schema.node("paragraph");if(i){var o=this.editorView.state.tr.replaceSelectionWith(n).insert(e+1,i);this.editorView.dispatch(o.scrollIntoView()),this.focusEditorInputField()}},reloadState:function(){this.state=E(this.value,this.placeholder,this.plugins,this.openFileBrowser),this.editorView.updateState(this.state),this.focusEditorInputField()},createEditorView:function(){var t=this;this.editorView=new a.d(this.$refs.editor,{state:this.state,dispatchTransaction:function(e){t.state=t.state.apply(e),t.emitOnChange()},handleDOMEvents:{keyup:function(){t.onKeyup()},keydown:function(e,i){t.onKeydown(i)},focus:function(){t.onFocus()},blur:function(){t.onBlur()}}})},handleKeyEvents:function(){},focusEditorInputField:function(){var t=this.editorView.state.tr,e=a.g.atEnd(t.doc);this.editorView.dispatch(t.setSelection(e)),this.editorView.focus()},emitOnChange:function(){this.editorView.updateState(this.state),this.$emit("input",this.contentFromEditor)},onKeyup:function(){this.$emit("keyup")},onKeydown:function(){this.$emit("keydown")},onBlur:function(){this.$emit("blur")},onFocus:function(){this.$emit("focus")}}},p=d,h=(i(2990),i(1)),T={components:{WootArticleEditor:Object(h.a)(p,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"editor-root editor--article"},[i("input",{ref:"imageUploadInput",attrs:{type:"file",accept:"image/png, image/jpeg, image/jpg, image/gif, image/webp",hidden:""},on:{change:t.onFileChange}}),t._v(" "),i("div",{ref:"editor"})])])}),[],!1,null,null,null).exports,ResizableTextArea:o.a},props:{article:{type:Object,default:function(){return{}}},isSettingsSidebarOpen:{type:Boolean,default:!1}},data:function(){return{articleTitle:"",articleContent:"",saveArticle:function(){}}},mounted:function(){var t=this;this.articleTitle=this.article.title,this.articleContent=this.article.content,this.saveArticle=Object(n.a)((function(e){t.$emit("save-article",e)}),300,!1)},methods:{onFocus:function(){this.$emit("focus")},onBlur:function(){this.$emit("blur")},onTitleInput:function(){this.saveArticle({title:this.articleTitle})},onContentInput:function(){this.saveArticle({content:this.articleContent})}}},f=(i(2991),Object(h.a)(T,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"edit-article--container"},[i("resizable-text-area",{staticClass:"article-heading",attrs:{type:"text",rows:"1",placeholder:t.$t("HELP_CENTER.EDIT_ARTICLE.TITLE_PLACEHOLDER")},on:{focus:t.onFocus,blur:t.onBlur,input:t.onTitleInput},model:{value:t.articleTitle,callback:function(e){t.articleTitle=e},expression:"articleTitle"}}),t._v(" "),i("woot-article-editor",{staticClass:"article-content",attrs:{placeholder:t.$t("HELP_CENTER.EDIT_ARTICLE.CONTENT_PLACEHOLDER")},on:{focus:t.onFocus,blur:t.onBlur,input:t.onContentInput},model:{value:t.articleContent,callback:function(e){t.articleContent=e},expression:"articleContent"}})],1)}),[],!1,null,"d2b9c1c8",null));e.a=f.exports},2870:function(t,e,i){"use strict";i(6),i(18),i(19);var n=i(16),o=i(59),a=i(51),r=i(50);function s(t,e,i,n,o,a,r){try{var s=t[a](r),c=s.value}catch(l){return void i(l)}s.done?e(c):Promise.resolve(c).then(n,o)}var c=a.b.ARTICLE_STATUS_TYPES,l={mixins:[n.a,o.mixin],props:{isSidebarOpen:{type:Boolean,default:!0},backButtonLabel:{type:String,default:""},isUpdating:{type:Boolean,default:!1},isSaved:{type:Boolean,default:!1},enableOpenSidebarButton:{type:Boolean,default:!1},shouldShowAddLocaleButton:{type:Boolean,default:!1}},data:function(){return{showActionsDropdown:!1,alertMessage:"",ARTICLE_STATUS_TYPES:c}},computed:{statusText:function(){return this.isUpdating?this.$t("HELP_CENTER.EDIT_HEADER.SAVING"):this.$t("HELP_CENTER.EDIT_HEADER.SAVED")},articleSlug:function(){return this.$route.params.articleSlug},currentPortalSlug:function(){return this.$route.params.portalSlug},currentArticleStatus:function(){return this.$store.getters["articles/articleStatus"](this.articleSlug)},isPublishedArticle:function(){return"published"===this.currentArticleStatus},isArchivedArticle:function(){return"archived"===this.currentArticleStatus}},methods:{onClickGoBack:function(){this.$emit("back")},showPreview:function(){this.$emit("show")},onClickAdd:function(){this.$emit("add")},updateArticleStatus:function(t){var e,i=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.$store.dispatch("articles/update",{portalSlug:i.currentPortalSlug,articleId:i.articleSlug,status:t});case 3:i.statusUpdateSuccessMessage(t),i.closeActionsDropdown(),t===i.ARTICLE_STATUS_TYPES.ARCHIVE?i.$track(r.f.ARCHIVE_ARTICLE,{uiFrom:"header"}):t===i.ARTICLE_STATUS_TYPES.PUBLISH&&i.$track(r.f.PUBLISH_ARTICLE),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),i.alertMessage=(null===e.t0||void 0===e.t0?void 0:e.t0.message)||i.statusUpdateErrorMessage(t);case 11:return e.prev=11,i.showAlert(i.alertMessage),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})),function(){var t=this,i=arguments;return new Promise((function(n,o){var a=e.apply(t,i);function r(t){s(a,n,o,r,c,"next",t)}function c(t){s(a,n,o,r,c,"throw",t)}r(void 0)}))})()},statusUpdateSuccessMessage:function(t){t===this.ARTICLE_STATUS_TYPES.PUBLISH?this.alertMessage=this.$t("HELP_CENTER.PUBLISH_ARTICLE.API.SUCCESS"):t===this.ARTICLE_STATUS_TYPES.ARCHIVE&&(this.alertMessage=this.$t("HELP_CENTER.ARCHIVE_ARTICLE.API.SUCCESS"))},statusUpdateErrorMessage:function(t){t===this.ARTICLE_STATUS_TYPES.PUBLISH?this.alertMessage=this.$t("HELP_CENTER.PUBLISH_ARTICLE.API.ERROR"):t===this.ARTICLE_STATUS_TYPES.ARCHIVE&&(this.alertMessage=this.$t("HELP_CENTER.ARCHIVE_ARTICLE.API.ERROR"))},openSidebar:function(){this.$emit("open")},closeSidebar:function(){this.$emit("close")},openActionsDropdown:function(){this.showActionsDropdown=!this.showActionsDropdown},closeActionsDropdown:function(){this.showActionsDropdown=!1}}},u=l,E=(i(2989),i(1)),d=Object(E.a)(u,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header--wrap"},[i("div",{staticClass:"header-left--wrap"},[i("woot-button",{staticClass:"back-button",attrs:{icon:"chevron-left",variant:"clear",size:"small","color-scheme":"primary"},on:{click:t.onClickGoBack}},[t._v("\n      "+t._s(t.backButtonLabel)+"\n    ")])],1),t._v(" "),i("div",{staticClass:"header-right--wrap"},[t.isUpdating||t.isSaved?i("span",{staticClass:"draft-status"},[t._v("\n      "+t._s(t.statusText)+"\n    ")]):t._e(),t._v(" "),i("woot-button",{attrs:{"class-names":"article--buttons",icon:"globe","color-scheme":"secondary",variant:"hollow",size:"small"},on:{click:t.showPreview}},[t._v("\n      "+t._s(t.$t("HELP_CENTER.EDIT_HEADER.PREVIEW"))+"\n    ")]),t._v(" "),t.isSidebarOpen?t._e():i("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("HELP_CENTER.EDIT_HEADER.OPEN_SIDEBAR"),expression:"$t('HELP_CENTER.EDIT_HEADER.OPEN_SIDEBAR')",modifiers:{"top-end":!0}}],attrs:{icon:"pane-open","class-names":"article--buttons sidebar-button",variant:"hollow",size:"small","color-scheme":"secondary","is-disabled":t.enableOpenSidebarButton},on:{click:t.openSidebar}}),t._v(" "),t.isSidebarOpen?i("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("HELP_CENTER.EDIT_HEADER.CLOSE_SIDEBAR"),expression:"$t('HELP_CENTER.EDIT_HEADER.CLOSE_SIDEBAR')",modifiers:{"top-end":!0}}],attrs:{icon:"pane-close","class-names":"article--buttons",variant:"hollow",size:"small","color-scheme":"secondary"},on:{click:t.closeSidebar}}):t._e(),t._v(" "),i("div",{staticClass:"article--buttons"},[i("div",{staticClass:"button-group"},[i("woot-button",{attrs:{"class-names":"publish-button",size:"small",icon:"checkmark","color-scheme":"primary","is-disabled":!t.articleSlug||t.isPublishedArticle},on:{click:function(e){return t.updateArticleStatus(t.ARTICLE_STATUS_TYPES.PUBLISH)}}},[t._v("\n          "+t._s(t.$t("HELP_CENTER.EDIT_HEADER.PUBLISH_BUTTON"))+"\n        ")]),t._v(" "),i("woot-button",{ref:"arrowDownButton",attrs:{size:"small",icon:"chevron-down","is-disabled":!t.articleSlug||t.isArchivedArticle},on:{click:t.openActionsDropdown}})],1),t._v(" "),t.showActionsDropdown?i("div",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:t.closeActionsDropdown,expression:"closeActionsDropdown"}],staticClass:"dropdown-pane dropdown-pane--open"},[i("woot-dropdown-menu",[i("woot-dropdown-item",[i("woot-button",{attrs:{variant:"clear","color-scheme":"secondary",size:"small",icon:"book-clock"},on:{click:function(e){return t.updateArticleStatus(t.ARTICLE_STATUS_TYPES.ARCHIVE)}}},[t._v("\n              "+t._s(t.$t("HELP_CENTER.EDIT_HEADER.MOVE_TO_ARCHIVE_BUTTON"))+"\n            ")])],1)],1)],1):t._e()])],1)])}),[],!1,null,"25c61723",null);e.a=d.exports},2871:function(t,e,i){"use strict";i(40),i(22),i(3),i(27),i(5),i(47),i(231),i(571),i(53),i(68),i(21),i(6),i(2083),i(26),i(23),i(7),i(9),i(8),i(10),i(29),i(49),i(44);var n=i(604),o=i(4),a=i(144),r=i(166);function s(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){E(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function E(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d={components:{MultiselectDropdown:n.a},props:{article:{type:Object,default:function(){return{}}}},data:function(){return{metaTitle:"",metaDescription:"",metaTags:[],metaOptions:[],tagInputValue:""}},computed:u(u({},Object(o.mapGetters)({categories:"categories/allCategories",agents:"agents/getAgents"})),{},{assignedAuthor:function(){var t;return null===(t=this.article)||void 0===t?void 0:t.author},selectedCategory:function(){var t;return null===(t=this.article)||void 0===t?void 0:t.category},allTags:function(){return this.metaTags.map((function(t){return t.name}))}}),mounted:function(){var t=this;if(!Object(r.f)(this.article.meta||{})){var e=this.article.meta,i=e.title,n=void 0===i?"":i,o=e.description,s=void 0===o?"":o,c=e.tags,l=void 0===c?[]:c;this.metaTitle=n,this.metaDescription=s,this.metaTags=this.formattedTags({tags:l})}this.saveArticle=Object(a.a)((function(){t.$emit("save-article",{meta:{title:t.metaTitle,description:t.metaDescription,tags:t.allTags}})}),1e3,!1)},methods:{formattedTags:function(t){return t.tags.map((function(t){return{name:t}}))},addTagValue:function(t){var e,i=this,n=t.split(",").map((function(t){return t.trim()})).filter((function(t){return t&&!i.allTags.includes(t)}));(e=this.metaTags).push.apply(e,s(this.formattedTags({tags:s(new Set(n))}))),this.saveArticle()},handleSearchChange:function(t){this.tagInputValue=t},onBlur:function(){this.tagInputValue&&this.addTagValue(this.tagInputValue)},onClickSelectCategory:function(t){var e=t.id;this.$emit("save-article",{category_id:e})},onClickAssignAuthor:function(t){var e=t.id;this.$emit("save-article",{author_id:e})},onChangeMetaInput:function(){this.saveArticle()},onClickArchiveArticle:function(){this.$emit("archive-article")},onClickDeleteArticle:function(){this.$emit("delete-article")}}},p=(i(2992),i(1)),h=Object(p.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"popover-animation"}},[i("div",{staticClass:"article-settings--container"},[i("h3",{staticClass:"block-title"},[t._v("\n      "+t._s(t.$t("HELP_CENTER.ARTICLE_SETTINGS.TITLE"))+"\n    ")]),t._v(" "),i("div",{staticClass:"form-wrap"},[i("label",[t._v("\n        "+t._s(t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.CATEGORY.LABEL"))+"\n        "),i("multiselect-dropdown",{attrs:{options:t.categories,"selected-item":t.selectedCategory,"has-thumbnail":!1,"multiselector-title":t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.CATEGORY.TITLE"),"multiselector-placeholder":t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.CATEGORY.PLACEHOLDER"),"no-search-result":t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.CATEGORY.NO_RESULT"),"input-placeholder":t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.CATEGORY.SEARCH_PLACEHOLDER")},on:{click:t.onClickSelectCategory}})],1),t._v(" "),i("label",[t._v("\n        "+t._s(t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.AUTHOR.LABEL"))+"\n        "),i("multiselect-dropdown",{attrs:{options:t.agents,"selected-item":t.assignedAuthor,"multiselector-title":t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.AUTHOR.TITLE"),"multiselector-placeholder":t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.AUTHOR.PLACEHOLDER"),"no-search-result":t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.AUTHOR.NO_RESULT"),"input-placeholder":t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.AUTHOR.SEARCH_PLACEHOLDER")},on:{click:t.onClickAssignAuthor}})],1),t._v(" "),i("label",[t._v("\n        "+t._s(t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.META_TITLE.LABEL"))+"\n        "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.metaTitle,expression:"metaTitle"}],attrs:{rows:"3",type:"text",placeholder:t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.META_TITLE.PLACEHOLDER")},domProps:{value:t.metaTitle},on:{input:[function(e){e.target.composing||(t.metaTitle=e.target.value)},t.onChangeMetaInput]}})]),t._v(" "),i("label",[t._v("\n        "+t._s(t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.META_DESCRIPTION.LABEL"))+"\n        "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.metaDescription,expression:"metaDescription"}],attrs:{rows:"3",type:"text",placeholder:t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.META_DESCRIPTION.PLACEHOLDER")},domProps:{value:t.metaDescription},on:{input:[function(e){e.target.composing||(t.metaDescription=e.target.value)},t.onChangeMetaInput]}})]),t._v(" "),i("label",[t._v("\n        "+t._s(t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.META_TAGS.LABEL"))+"\n        "),i("multiselect",{ref:"tagInput",attrs:{placeholder:t.$t("HELP_CENTER.ARTICLE_SETTINGS.FORM.META_TAGS.PLACEHOLDER"),label:"name",options:t.metaOptions,"track-by":"name",multiple:!0,taggable:!0,"close-on-select":!1},on:{"search-change":t.handleSearchChange,close:t.onBlur,tag:t.addTagValue},model:{value:t.metaTags,callback:function(e){t.metaTags=e},expression:"metaTags"}})],1)]),t._v(" "),i("div",{staticClass:"action-buttons"},[i("woot-button",{attrs:{icon:"archive",size:"small",variant:"clear","color-scheme":"secondary"},on:{click:t.onClickArchiveArticle}},[t._v("\n        "+t._s(t.$t("HELP_CENTER.ARTICLE_SETTINGS.BUTTONS.ARCHIVE"))+"\n      ")]),t._v(" "),i("woot-button",{attrs:{icon:"delete",size:"small",variant:"clear","color-scheme":"alert"},on:{click:t.onClickDeleteArticle}},[t._v("\n        "+t._s(t.$t("HELP_CENTER.ARTICLE_SETTINGS.BUTTONS.DELETE"))+"\n      ")])],1)])])}),[],!1,null,"512b61b2",null);e.a=h.exports},2989:function(t,e,i){"use strict";i(2838)},2990:function(t,e,i){"use strict";i(2839)},2991:function(t,e,i){"use strict";i(2840)},2992:function(t,e,i){"use strict";i(2841)}}]);
//# sourceMappingURL=2-06dd21430de5eadd7377.chunk.js.map