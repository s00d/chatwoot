(window.webpackJsonp=window.webpackJsonp||[]).push([[17,24],{2494:function(t,e,r){},2502:function(t,e,r){"use strict";r(2494)},2521:function(t,e,r){},2522:function(t,e,r){},2552:function(t,e,r){"use strict";r.r(e);r(17),r(20),r(2),r(23),r(9),r(16);var o=r(14),a=r(12),n=r(166);function s(t,e,r,o,a,n,s){try{var i=t[n](s),l=i.value}catch(c){return void r(c)}i.done?e(l):Promise.resolve(l).then(o,a)}var i={mixins:[o.a],props:{show:{type:Boolean,default:!0},portalName:{type:String,default:""},locale:{type:String,default:""},category:{type:Object,default:function(){}},selectedPortalSlug:{type:String,default:""}},data:function(){return{id:this.category.id,name:"",slug:"",description:""}},validations:{name:{required:a.required,minLength:Object(a.minLength)(2)},slug:{required:a.required}},computed:{nameError:function(){return this.$v.name.$error?this.$t("HELP_CENTER.CATEGORY.ADD.NAME.ERROR"):""},slugError:function(){return this.$v.slug.$error?this.$t("HELP_CENTER.CATEGORY.ADD.SLUG.ERROR"):""}},mounted:function(){this.updateDataFromStore()},methods:{updateDataFromStore:function(){var t=this.category;this.name=t.name,this.slug=t.slug,this.description=t.description},onNameChange:function(){this.slug=Object(n.b)(this.name)},onUpdate:function(){this.$emit("update")},onClose:function(){this.$emit("cancel")},editCategory:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){var r,o,a,n,s,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.id,o=e.name,a=e.slug,n=e.description,s={id:r,name:o,slug:a,description:n},e.$v.$touch(),!e.$v.$invalid){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,t.next=8,e.$store.dispatch("categories/update",{portalSlug:e.selectedPortalSlug,categoryId:r,categoryObj:s});case 8:e.alertMessage=e.$t("HELP_CENTER.CATEGORY.EDIT.API.SUCCESS_MESSAGE"),e.onClose(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),i=null===t.t0||void 0===t.t0?void 0:t.t0.message,e.alertMessage=i||e.$t("HELP_CENTER.CATEGORY.EDIT.API.ERROR_MESSAGE");case 16:return t.prev=16,e.showAlert(e.alertMessage),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[5,12,16,19]])})),function(){var e=this,r=arguments;return new Promise((function(o,a){var n=t.apply(e,r);function i(t){s(n,o,a,i,l,"next",t)}function l(t){s(n,o,a,i,l,"throw",t)}i(void 0)}))})()}}},l=i,c=(r(2502),r(0)),u=Object(c.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("woot-modal",{attrs:{show:t.show,"on-close":t.onClose},on:{"update:show":function(e){t.show=e}}},[r("woot-modal-header",{attrs:{"header-title":t.$t("HELP_CENTER.CATEGORY.EDIT.TITLE"),"header-content":t.$t("HELP_CENTER.CATEGORY.EDIT.SUB_TITLE")}}),t._v(" "),r("form",{staticClass:"row",on:{submit:function(e){return e.preventDefault(),t.onUpdate(e)}}},[r("div",{staticClass:"medium-12 columns"},[r("div",{staticClass:"row article-info"},[r("div",{staticClass:"columns medium-6"},[r("label",[r("span",[t._v(t._s(t.$t("HELP_CENTER.CATEGORY.EDIT.PORTAL")))]),t._v(" "),r("p",{staticClass:"value"},[t._v(t._s(t.portalName))])])]),t._v(" "),r("div",{staticClass:"columns medium-6"},[r("label",[r("span",[t._v(t._s(t.$t("HELP_CENTER.CATEGORY.EDIT.LOCALE")))]),t._v(" "),r("p",{staticClass:"value"},[t._v(t._s(t.locale))])])])]),t._v(" "),r("woot-input",{staticClass:"medium-12 columns",class:{error:t.$v.name.$error},attrs:{error:t.nameError,label:t.$t("HELP_CENTER.CATEGORY.EDIT.NAME.LABEL"),placeholder:t.$t("HELP_CENTER.CATEGORY.EDIT.NAME.PLACEHOLDER"),"help-text":t.$t("HELP_CENTER.CATEGORY.EDIT.NAME.HELP_TEXT")},on:{input:t.onNameChange},model:{value:t.name,callback:function(e){t.name="string"===typeof e?e.trim():e},expression:"name"}}),t._v(" "),r("woot-input",{staticClass:"medium-12 columns",class:{error:t.$v.slug.$error},attrs:{error:t.slugError,label:t.$t("HELP_CENTER.CATEGORY.EDIT.SLUG.LABEL"),placeholder:t.$t("HELP_CENTER.CATEGORY.EDIT.SLUG.PLACEHOLDER"),"help-text":t.$t("HELP_CENTER.CATEGORY.EDIT.SLUG.HELP_TEXT")},on:{input:t.$v.slug.$touch},model:{value:t.slug,callback:function(e){t.slug="string"===typeof e?e.trim():e},expression:"slug"}}),t._v(" "),r("label",[t._v("\n        "+t._s(t.$t("HELP_CENTER.CATEGORY.EDIT.DESCRIPTION.LABEL"))+"\n        "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],attrs:{rows:"3",type:"text",placeholder:t.$t("HELP_CENTER.CATEGORY.EDIT.DESCRIPTION.PLACEHOLDER")},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"medium-12 columns"},[r("div",{staticClass:"modal-footer justify-content-end w-full"},[r("woot-button",{staticClass:"button clear",on:{click:function(e){return e.preventDefault(),t.onClose(e)}}},[t._v("\n            "+t._s(t.$t("HELP_CENTER.CATEGORY.EDIT.BUTTONS.CANCEL"))+"\n          ")]),t._v(" "),r("woot-button",{on:{click:t.editCategory}},[t._v("\n            "+t._s(t.$t("HELP_CENTER.CATEGORY.EDIT.BUTTONS.CREATE"))+"\n          ")])],1)])],1)])],1)}),[],!1,null,"28585b0a",null);e.default=u.exports},2560:function(t,e,r){"use strict";r(2521)},2561:function(t,e,r){"use strict";r(2522)},2596:function(t,e,r){"use strict";r.r(e);r(17),r(20),r(38),r(5),r(2),r(4),r(10),r(7),r(11),r(9),r(16);var o=r(3),a=r(14),n=r(527),s={props:{categories:{type:Array,default:function(){return[]}}},methods:{editCategory:function(t){this.$emit("edit",t)},deleteCategory:function(t){this.$emit("delete",t)}}},i=(r(2560),r(0)),l=Object(i.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("table",[r("thead",[r("tr",[r("th",{attrs:{scope:"col"}},[t._v("\n          "+t._s(t.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.NAME"))+"\n        ")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("\n          "+t._s(t.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.DESCRIPTION"))+"\n        ")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("\n          "+t._s(t.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.LOCALE"))+"\n        ")]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v("\n          "+t._s(t.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.ARTICLE_COUNT"))+"\n        ")]),t._v(" "),r("th",{attrs:{scope:"col"}})])]),t._v(" "),t._m(0),t._v(" "),r("tbody",t._l(t.categories,(function(e){return r("tr",{key:e.id},[r("td",[r("span",[t._v(t._s(e.name))])]),t._v(" "),r("td",[r("span",[t._v(t._s(e.description))])]),t._v(" "),r("td",[r("span",[t._v(t._s(e.locale))])]),t._v(" "),r("td",[r("span",[t._v(t._s(e.meta.articles_count))])]),t._v(" "),r("td",[r("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.ACTION_BUTTON.EDIT"),expression:"\n              $t(\n                'HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.ACTION_BUTTON.EDIT'\n              )\n            ",modifiers:{"top-end":!0}}],attrs:{size:"tiny",variant:"smooth",icon:"edit","color-scheme":"secondary"},on:{click:function(r){return t.editCategory(e)}}}),t._v(" "),r("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:t.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.ACTION_BUTTON.DELETE"),expression:"\n              $t(\n                'HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.ACTION_BUTTON.DELETE'\n              )\n            ",modifiers:{"top-end":!0}}],attrs:{size:"tiny",variant:"smooth",icon:"delete","color-scheme":"alert"},on:{click:function(r){return t.deleteCategory(e.id)}}})],1)])})),0)]),t._v(" "),0===t.categories.length?r("p",{staticClass:"empty-text"},[t._v("\n    "+t._s(t.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TABLE.EMPTY_TEXT"))+"\n  ")]):t._e()])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td",{staticClass:"horizontal-line",attrs:{colspan:"100%"}})])}],!1,null,"02c7f6cb",null).exports,c=r(866),u=r(2552);function E(t,e,r,o,a,n,s){try{var i=t[n](s),l=i.value}catch(c){return void r(c)}i.done?e(l):Promise.resolve(l).then(o,a)}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){T(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function T(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p={components:{CategoryListItem:l,AddCategory:c.a,EditCategory:u.default},mixins:[a.a,n.a],data:function(){return{selectedCategory:{},selectedLocaleCode:"",currentLocaleCode:"en",showEditCategoryModal:!1,showAddCategoryModal:!1,alertMessage:""}},computed:C(C({},Object(o.mapGetters)({portals:"portals/allPortals",meta:"portals/getMeta",isFetching:"portals/isFetchingPortals"})),{},{currentPortalSlug:function(){return this.$route.params.portalSlug},categoryByLocaleCode:function(){return this.$store.getters["categories/categoriesByLocaleCode"](this.currentLocaleCode)},currentPortal:function(){var t=this.currentPortalSlug;return t?this.$store.getters["portals/portalBySlug"](t):this.$store.getters["portals/allPortals"][0]},currentPortalName:function(){return this.currentPortal?this.currentPortal.name:""},currentPortalLocale:function(){var t,e;return this.currentPortal?null===(t=this.currentPortal)||void 0===t||null===(e=t.meta)||void 0===e?void 0:e.default_locale:""},allLocales:function(){return this.currentPortal?this.currentPortal.config.allowed_locales:[]},allowedLocaleCodes:function(){return this.allLocales.map((function(t){return t.code}))}}),methods:{openAddCategoryModal:function(){this.showAddCategoryModal=!0},openEditCategoryModal:function(t){this.selectedCategory=t,this.showEditCategoryModal=!0},closeAddCategoryModal:function(){this.showAddCategoryModal=!1},closeEditCategoryModal:function(){this.showEditCategoryModal=!1},deleteCategory:function(t){var e,r=this;return(e=regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.$store.dispatch("categories/delete",{portalSlug:r.currentPortalSlug,categoryId:t});case 3:r.alertMessage=r.$t("HELP_CENTER.CATEGORY.DELETE.API.SUCCESS_MESSAGE"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),o=null===e.t0||void 0===e.t0?void 0:e.t0.message,r.alertMessage=o||r.$t("HELP_CENTER.CATEGORY.DELETE.API.ERROR_MESSAGE");case 10:return e.prev=10,r.showAlert(r.alertMessage),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,6,10,13]])})),function(){var t=this,r=arguments;return new Promise((function(o,a){var n=e.apply(t,r);function s(t){E(n,o,a,s,i,"next",t)}function i(t){E(n,o,a,s,i,"throw",t)}s(void 0)}))})()},changeCurrentCategory:function(t){var e=t.target.value;this.currentLocaleCode=e}}},v=p,g=(r(2561),Object(i.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"category-list--container"},[r("header",[r("div",{staticClass:"header-left--wrap"},[r("label",{staticClass:"sub-block-title header-text"},[t._v(t._s(t.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.TITLE")))]),t._v(" "),r("select",{staticClass:"row small-2 select-locale",domProps:{value:t.currentLocaleCode},on:{change:t.changeCurrentCategory}},t._l(t.allowedLocaleCodes,(function(e){return r("option",{key:e,domProps:{value:e}},[t._v("\n          "+t._s(e)+"\n        ")])})),0)]),t._v(" "),r("div",{staticClass:"header-right--wrap"},[r("woot-button",{attrs:{size:"small",variant:"smooth","color-scheme":"primary",icon:"add"},on:{click:t.openAddCategoryModal}},[t._v("\n        "+t._s(t.$t("HELP_CENTER.PORTAL.EDIT.CATEGORIES.NEW_CATEGORY"))+"\n      ")])],1)]),t._v(" "),r("div",{staticClass:"category-list"},[r("category-list-item",{attrs:{categories:t.categoryByLocaleCode},on:{delete:t.deleteCategory,edit:t.openEditCategoryModal}})],1),t._v(" "),t.showEditCategoryModal?r("edit-category",{attrs:{show:t.showEditCategoryModal,"portal-name":t.currentPortalName,locale:t.selectedCategory.locale,category:t.selectedCategory,"selected-portal-slug":t.currentPortalSlug},on:{"update:show":function(e){t.showEditCategoryModal=e},cancel:t.closeEditCategoryModal}}):t._e(),t._v(" "),t.showAddCategoryModal?r("add-category",{attrs:{show:t.showAddCategoryModal,"portal-name":t.currentPortalName,locale:t.currentLocaleCode},on:{"update:show":function(e){t.showAddCategoryModal=e},cancel:t.closeAddCategoryModal}}):t._e()],1)}),[],!1,null,"dc46401a",null));e.default=g.exports}}]);
//# sourceMappingURL=17-834f3a6447925588bea1.chunk.js.map