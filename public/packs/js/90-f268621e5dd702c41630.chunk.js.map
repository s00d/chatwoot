{"version":3,"sources":["webpack:///./node_modules/markdown-it-link-attributes/index.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/@chatwoot/utils/dist/utils.esm.js"],"names":["markdownitLinkAttributes","md","configs","Array","isArray","Object","freeze","defaultRender","renderer","rules","link_open","this","tokens","idx","options","env","self","config","link","i","href","attrs","attrIndex","length","matcher","findFirstMatchingConfig","attributes","keys","forEach","attr","value","attrPush","applyAttributes","renderToken","module","exports","webpackPolyfill","deprecate","paths","children","defineProperty","enumerable","get","l","debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","window","setTimeout","getContrastingTextColor","bgColor","color","replace","parseInt","slice","formatTime","timeInSeconds","formattedTime","minutes","Math","floor","seconds","hours","_minutes","days","_hours","trimContent","content","maxLength","ellipsis","trimmedContent","substring","convertSecondsToTimeUnit","unitNames","time","unit","Number","toFixed","minute","hour","day","parseBoolean","candidate","candidateString","String","toLowerCase","Boolean","JSON","parse","error","sortAsc","arr","sort","a","b","_quantileForSorted","sorted","q","min","max","clamped","pos","base","rest","undefined","getQuantileIntervals","data","intervals","map","interval","_extends","assign","target","source","key","prototype","hasOwnProperty","call","MESSAGE_VARIABLES_REGEX","capitalizeName","name","s","toUpperCase","getFirstName","_ref","user","firstName","split","shift","getLastName","_ref2","lastName","pop","getMessageVariables","_ref3","_assignee$email","conversation","contact","_conversation$meta","meta","assignee","sender","id","_conversation$custom_","custom_attributes","conversationCustomAttributes","contactCustomAttributes","email","phone_number","entries","reduce","acc","_ref5","_ref6","replaceVariablesInMessage","_ref7","message","variables","_","trim","getUndefinedVariablesInMessage","_ref8","matches","match","filter","variable","createTypingIndicator","onStartTyping","onStopTyping","idleTime","timer","stop","reset","start","calculateThreshold","timeOffset","threshold","Date","now","formatSLATime","units","y","mo","d","h","m","parts","push","join","evaluateSLAConditions","appliedSla","chat","type","frtThreshold","sla_first_response_time_threshold","nrtThreshold","sla_next_response_time_threshold","rtThreshold","sla_resolution_time_threshold","createdAt","created_at","firstReplyCreatedAt","first_reply_created_at","waitingSince","waiting_since","status","SLAStatus","FRT","condition","NRT","RT","createSLAObject","icon","isSlaMissed","evaluateSLAStatus","mostUrgent","SLAStatuses","sla1","sla2","abs","findMostUrgentSLAStatus"],"mappings":"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","file":"js/90-f268621e5dd702c41630.chunk.js","sourcesContent":["\"use strict\"; // Adapted from https://github.com/markdown-it/markdown-it/blob/fbc6b0fed563ba7c00557ab638fd19752f8e759d/docs/architecture.md\n\nfunction findFirstMatchingConfig(link, configs) {\n  var i, config;\n  var href = link.attrs[link.attrIndex(\"href\")][1];\n\n  for (i = 0; i < configs.length; ++i) {\n    config = configs[i]; // If there is a matcher function defined then call it\n    // Matcher Function should return a boolean indicating\n    // whether or not it matched. If it matched, use that\n    // configuration, otherwise, try the next one.\n\n    if (typeof config.matcher === \"function\") {\n      if (config.matcher(href, config)) {\n        return config;\n      } else {\n        continue;\n      }\n    }\n\n    return config;\n  }\n}\n\nfunction applyAttributes(idx, tokens, attributes) {\n  Object.keys(attributes).forEach(function (attr) {\n    var attrIndex;\n    var value = attributes[attr];\n\n    if (attr === \"className\") {\n      // when dealing with applying classes\n      // programatically, some programmers\n      // may prefer to use the className syntax\n      attr = \"class\";\n    }\n\n    attrIndex = tokens[idx].attrIndex(attr);\n\n    if (attrIndex < 0) {\n      // attr doesn't exist, add new attribute\n      tokens[idx].attrPush([attr, value]);\n    } else {\n      // attr already exists, overwrite it\n      tokens[idx].attrs[attrIndex][1] = value; // replace value of existing attr\n    }\n  });\n}\n\nfunction markdownitLinkAttributes(md, configs) {\n  if (!configs) {\n    configs = [];\n  } else {\n    configs = Array.isArray(configs) ? configs : [configs];\n  }\n\n  Object.freeze(configs);\n  var defaultRender = md.renderer.rules.link_open || this.defaultRender;\n\n  md.renderer.rules.link_open = function (tokens, idx, options, env, self) {\n    var config = findFirstMatchingConfig(tokens[idx], configs);\n    var attributes = config && config.attrs;\n\n    if (attributes) {\n      applyAttributes(idx, tokens, attributes);\n    } // pass token to default renderer.\n\n\n    return defaultRender(tokens, idx, options, env, self);\n  };\n}\n\nmarkdownitLinkAttributes.defaultRender = function (tokens, idx, options, env, self) {\n  return self.renderToken(tokens, idx, options);\n};\n\nmodule.exports = markdownitLinkAttributes;","module.exports = function (module) {\n  if (!module.webpackPolyfill) {\n    module.deprecate = function () {};\n\n    module.paths = []; // module.parent = undefined by default\n\n    if (!module.children) module.children = [];\n    Object.defineProperty(module, \"loaded\", {\n      enumerable: true,\n      get: function get() {\n        return module.l;\n      }\n    });\n    Object.defineProperty(module, \"id\", {\n      enumerable: true,\n      get: function get() {\n        return module.i;\n      }\n    });\n    module.webpackPolyfill = 1;\n  }\n\n  return module;\n};","import isToday from 'date-fns/isToday';\nimport isYesterday from 'date-fns/isYesterday'; // Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n\n/**\r\n * @func Callback function to be called after delay\r\n * @delay Delay for debounce in ms\r\n * @immediate should execute immediately\r\n * @returns debounced callback function\r\n */\n\nvar debounce = function debounce(func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = null;\n    var args = arguments;\n\n    var later = function later() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = window.setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n};\n/**\r\n * @name Get contrasting text color\r\n * @description Get contrasting text color from a text color\r\n * @param bgColor  Background color of text.\r\n * @returns contrasting text color\r\n */\n\n\nvar getContrastingTextColor = function getContrastingTextColor(bgColor) {\n  var color = bgColor.replace('#', '');\n  var r = parseInt(color.slice(0, 2), 16);\n  var g = parseInt(color.slice(2, 4), 16);\n  var b = parseInt(color.slice(4, 6), 16); // http://stackoverflow.com/a/3943023/112731\n\n  return r * 0.299 + g * 0.587 + b * 0.114 > 186 ? '#000000' : '#FFFFFF';\n};\n/**\r\n * @name Get formatted date\r\n * @description Get date in today, yesterday or any other date format\r\n * @param date  date\r\n * @param todayText  Today text\r\n * @param yesterdayText  Yesterday text\r\n * @returns formatted date\r\n */\n\n\nvar formatDate = function formatDate(_ref) {\n  var date = _ref.date,\n      todayText = _ref.todayText,\n      yesterdayText = _ref.yesterdayText;\n  var dateValue = new Date(date);\n  if (isToday(dateValue)) return todayText;\n  if (isYesterday(dateValue)) return yesterdayText;\n  return date;\n};\n/**\r\n * @name formatTime\r\n * @description Format time to Hour, Minute and Second\r\n * @param timeInSeconds  number\r\n * @returns formatted time\r\n */\n\n\nvar formatTime = function formatTime(timeInSeconds) {\n  var formattedTime = '';\n\n  if (timeInSeconds >= 60 && timeInSeconds < 3600) {\n    var minutes = Math.floor(timeInSeconds / 60);\n    formattedTime = minutes + \" Min\";\n    var seconds = minutes === 60 ? 0 : Math.floor(timeInSeconds % 60);\n    return formattedTime + (\"\" + (seconds > 0 ? ' ' + seconds + ' Sec' : ''));\n  }\n\n  if (timeInSeconds >= 3600 && timeInSeconds < 86400) {\n    var hours = Math.floor(timeInSeconds / 3600);\n    formattedTime = hours + \" Hr\";\n\n    var _minutes = timeInSeconds % 3600 < 60 || hours === 24 ? 0 : Math.floor(timeInSeconds % 3600 / 60);\n\n    return formattedTime + (\"\" + (_minutes > 0 ? ' ' + _minutes + ' Min' : ''));\n  }\n\n  if (timeInSeconds >= 86400) {\n    var days = Math.floor(timeInSeconds / 86400);\n    formattedTime = days + \" Day\";\n\n    var _hours = timeInSeconds % 86400 < 3600 || days >= 364 ? 0 : Math.floor(timeInSeconds % 86400 / 3600);\n\n    return formattedTime + (\"\" + (_hours > 0 ? ' ' + _hours + ' Hr' : ''));\n  }\n\n  return Math.floor(timeInSeconds) + \" Sec\";\n};\n/**\r\n * @name trimContent\r\n * @description Trim a string to max length\r\n * @param content String to trim\r\n * @param maxLength Length of the string to trim, default 1024\r\n * @param ellipsis Boolean to add dots at the end of the string, default false\r\n * @returns trimmed string\r\n */\n\n\nvar trimContent = function trimContent(content, maxLength, ellipsis) {\n  if (content === void 0) {\n    content = '';\n  }\n\n  if (maxLength === void 0) {\n    maxLength = 1024;\n  }\n\n  if (ellipsis === void 0) {\n    ellipsis = false;\n  }\n\n  var trimmedContent = content;\n\n  if (content.length > maxLength) {\n    trimmedContent = content.substring(0, maxLength);\n  }\n\n  if (ellipsis) {\n    trimmedContent = trimmedContent + '...';\n  }\n\n  return trimmedContent;\n};\n/**\r\n * @name convertSecondsToTimeUnit\r\n * @description Convert seconds to time unit\r\n * @param seconds  number\r\n * @param unitNames  object\r\n * @returns time and unit\r\n * @example\r\n * convertToUnit(60, { minute: 'm', hour: 'h', day: 'd' }); // { time: 1, unit: 'm' }\r\n * convertToUnit(60, { minute: 'Minutes', hour: 'Hours', day: 'Days' }); // { time: 1, unit: 'Minutes' }\r\n */\n\n\nvar convertSecondsToTimeUnit = function convertSecondsToTimeUnit(seconds, unitNames) {\n  if (seconds === null || seconds === 0) return {\n    time: '',\n    unit: ''\n  };\n  if (seconds < 3600) return {\n    time: Number((seconds / 60).toFixed(1)),\n    unit: unitNames.minute\n  };\n  if (seconds < 86400) return {\n    time: Number((seconds / 3600).toFixed(1)),\n    unit: unitNames.hour\n  };\n  return {\n    time: Number((seconds / 86400).toFixed(1)),\n    unit: unitNames.day\n  };\n};\n/**\r\n * Function that parses a string boolean value and returns the corresponding boolean value\r\n * @param {string | number} candidate - The string boolean value to be parsed\r\n * @return {boolean} - The parsed boolean value\r\n */\n\n\nfunction parseBoolean(candidate) {\n  try {\n    // lowercase the string, so TRUE becomes true\n    var candidateString = String(candidate).toLowerCase(); // wrap in boolean to ensure that the return value\n    // is a boolean even if values like 0 or 1 are passed\n\n    return Boolean(JSON.parse(candidateString));\n  } catch (error) {\n    return false;\n  }\n}\n/**\r\n * Sorts an array of numbers in ascending order.\r\n * @param {number[]} arr - The array of numbers to be sorted.\r\n * @returns {number[]} - The sorted array.\r\n */\n\n\nfunction sortAsc(arr) {\n  // .slice() is used to create a copy of the array so that the original array is not mutated\n  return arr.slice().sort(function (a, b) {\n    return a - b;\n  });\n}\n/**\r\n * Calculates the quantile value of an array at a specified percentile.\r\n * @param {number[]} arr - The array of numbers to calculate the quantile value from.\r\n * @param {number} q - The percentile to calculate the quantile value for.\r\n * @returns {number} - The quantile value.\r\n */\n\n\nfunction quantile(arr, q) {\n  var sorted = sortAsc(arr); // Sort the array in ascending order\n\n  return _quantileForSorted(sorted, q); // Calculate the quantile value\n}\n/**\r\n * Clamps a value between a minimum and maximum range.\r\n * @param {number} min - The minimum range.\r\n * @param {number} max - The maximum range.\r\n * @param {number} value - The value to be clamped.\r\n * @returns {number} - The clamped value.\r\n */\n\n\nfunction clamp(min, max, value) {\n  if (value < min) {\n    return min;\n  }\n\n  if (value > max) {\n    return max;\n  }\n\n  return value;\n}\n/**\r\n * This method assumes the the array provided is already sorted in ascending order.\r\n * It's a helper method for the quantile method and should not be exported as is.\r\n *\r\n * @param {number[]} arr - The array of numbers to calculate the quantile value from.\r\n * @param {number} q - The percentile to calculate the quantile value for.\r\n * @returns {number} - The quantile value.\r\n */\n\n\nfunction _quantileForSorted(sorted, q) {\n  var clamped = clamp(0, 1, q); // Clamp the percentile between 0 and 1\n\n  var pos = (sorted.length - 1) * clamped; // Calculate the index of the element at the specified percentile\n\n  var base = Math.floor(pos); // Find the index of the closest element to the specified percentile\n\n  var rest = pos - base; // Calculate the decimal value between the closest elements\n  // Interpolate the quantile value between the closest elements\n  // Most libraries don't to the interpolation, but I'm just having fun here\n  // also see https://en.wikipedia.org/wiki/Quantile#Estimating_quantiles_from_a_sample\n\n  if (sorted[base + 1] !== undefined) {\n    // in case the position was a integer, the rest will be 0 and the interpolation will be skipped\n    return sorted[base] + rest * (sorted[base + 1] - sorted[base]);\n  } // Return the closest element if there is no interpolation possible\n\n\n  return sorted[base];\n}\n/**\r\n * Calculates the quantile values for an array of intervals.\r\n * @param {number[]} data - The array of numbers to calculate the quantile values from.\r\n * @param {number[]} intervals - The array of intervals to calculate the quantile values for.\r\n * @returns {number[]} - The array of quantile values for the intervals.\r\n */\n\n\nvar getQuantileIntervals = function getQuantileIntervals(data, intervals) {\n  // Sort the array in ascending order before looping through the intervals.\n  // depending on the size of the array and the number of intervals, this can speed up the process by at least twice\n  // for a random array of 100 numbers and 5 intervals, the speedup is 3x\n  var sorted = sortAsc(data);\n  return intervals.map(function (interval) {\n    return _quantileForSorted(sorted, interval);\n  });\n};\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar MESSAGE_VARIABLES_REGEX = /{{(.*?)}}/g;\n\nvar skipCodeBlocks = function skipCodeBlocks(str) {\n  return str.replace(/```(?:.|\\n)+?```/g, '');\n};\n\nvar capitalizeName = function capitalizeName(name) {\n  return (name || '').replace(/\\b(\\w)/g, function (s) {\n    return s.toUpperCase();\n  });\n};\n\nvar getFirstName = function getFirstName(_ref) {\n  var user = _ref.user;\n  var firstName = user != null && user.name ? user.name.split(' ').shift() : '';\n  return capitalizeName(firstName);\n};\n\nvar getLastName = function getLastName(_ref2) {\n  var user = _ref2.user;\n\n  if (user && user.name) {\n    var lastName = user.name.split(' ').length > 1 ? user.name.split(' ').pop() : '';\n    return capitalizeName(lastName);\n  }\n\n  return '';\n};\n\nvar getMessageVariables = function getMessageVariables(_ref3) {\n  var _assignee$email;\n\n  var conversation = _ref3.conversation,\n      contact = _ref3.contact;\n  var _conversation$meta = conversation.meta,\n      assignee = _conversation$meta.assignee,\n      sender = _conversation$meta.sender,\n      id = conversation.id,\n      _conversation$custom_ = conversation.custom_attributes,\n      conversationCustomAttributes = _conversation$custom_ === void 0 ? {} : _conversation$custom_;\n\n  var _ref4 = contact || {},\n      contactCustomAttributes = _ref4.custom_attributes;\n\n  var standardVariables = {\n    'contact.name': capitalizeName((sender == null ? void 0 : sender.name) || ''),\n    'contact.first_name': getFirstName({\n      user: sender\n    }),\n    'contact.last_name': getLastName({\n      user: sender\n    }),\n    'contact.email': sender == null ? void 0 : sender.email,\n    'contact.phone': sender == null ? void 0 : sender.phone_number,\n    'contact.id': sender == null ? void 0 : sender.id,\n    'conversation.id': id,\n    'agent.name': capitalizeName((assignee == null ? void 0 : assignee.name) || ''),\n    'agent.first_name': getFirstName({\n      user: assignee\n    }),\n    'agent.last_name': getLastName({\n      user: assignee\n    }),\n    'agent.email': (_assignee$email = assignee == null ? void 0 : assignee.email) != null ? _assignee$email : ''\n  };\n  var conversationCustomAttributeVariables = Object.entries(conversationCustomAttributes != null ? conversationCustomAttributes : {}).reduce(function (acc, _ref5) {\n    var key = _ref5[0],\n        value = _ref5[1];\n    acc[\"conversation.custom_attribute.\" + key] = value;\n    return acc;\n  }, {});\n  var contactCustomAttributeVariables = Object.entries(contactCustomAttributes != null ? contactCustomAttributes : {}).reduce(function (acc, _ref6) {\n    var key = _ref6[0],\n        value = _ref6[1];\n    acc[\"contact.custom_attribute.\" + key] = value;\n    return acc;\n  }, {});\n\n  var variables = _extends({}, standardVariables, conversationCustomAttributeVariables, contactCustomAttributeVariables);\n\n  return variables;\n};\n\nvar replaceVariablesInMessage = function replaceVariablesInMessage(_ref7) {\n  var message = _ref7.message,\n      variables = _ref7.variables; // @ts-ignore\n\n  return message == null ? void 0 : message.replace(MESSAGE_VARIABLES_REGEX, function (_, replace) {\n    return variables[replace.trim()] ? variables[replace.trim().toLowerCase()] : '';\n  });\n};\n\nvar getUndefinedVariablesInMessage = function getUndefinedVariablesInMessage(_ref8) {\n  var message = _ref8.message,\n      variables = _ref8.variables;\n  var messageWithOutCodeBlocks = skipCodeBlocks(message);\n  var matches = messageWithOutCodeBlocks.match(MESSAGE_VARIABLES_REGEX);\n  if (!matches) return [];\n  return matches.map(function (match) {\n    return match.replace('{{', '').replace('}}', '').trim();\n  }).filter(function (variable) {\n    return variables[variable] === undefined;\n  });\n};\n/**\r\n * Creates a typing indicator utility.\r\n * @param onStartTyping Callback function to be called when typing starts\r\n * @param onStopTyping Callback function to be called when typing stops after delay\r\n * @param idleTime Delay for idle time in ms before considering typing stopped\r\n * @returns An object with start and stop methods for typing indicator\r\n */\n\n\nvar createTypingIndicator = function createTypingIndicator(onStartTyping, onStopTyping, idleTime) {\n  var timer = null;\n\n  var start = function start() {\n    if (!timer) {\n      onStartTyping();\n    }\n\n    reset();\n  };\n\n  var stop = function stop() {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n      onStopTyping();\n    }\n  };\n\n  var reset = function reset() {\n    if (timer) {\n      clearTimeout(timer);\n    }\n\n    timer = setTimeout(function () {\n      stop();\n    }, idleTime);\n  };\n\n  return {\n    start: start,\n    stop: stop\n  };\n};\n/**\r\n * Calculates the threshold for an SLA based on the current time and the provided threshold.\r\n * @param timeOffset - The time offset in seconds.\r\n * @param threshold - The threshold in seconds or null if not applicable.\r\n * @returns The calculated threshold in seconds or null if the threshold is null.\r\n */\n\n\nvar calculateThreshold = function calculateThreshold(timeOffset, threshold) {\n  // Calculate the time left for the SLA to breach or the time since the SLA has missed\n  if (threshold === null) return null;\n  var currentTime = Math.floor(Date.now() / 1000);\n  return timeOffset + threshold - currentTime;\n};\n/**\r\n * Finds the most urgent SLA status based on the threshold.\r\n * @param SLAStatuses - An array of SLAStatus objects.\r\n * @returns The most urgent SLAStatus object.\r\n */\n\n\nvar findMostUrgentSLAStatus = function findMostUrgentSLAStatus(SLAStatuses) {\n  // Sort the SLAs based on the threshold and return the most urgent SLA\n  SLAStatuses.sort(function (sla1, sla2) {\n    return Math.abs(sla1.threshold) - Math.abs(sla2.threshold);\n  });\n  return SLAStatuses[0];\n};\n/**\r\n * Formats the SLA time in a human-readable format.\r\n * @param seconds - The time in seconds.\r\n * @returns A formatted string representing the time.\r\n */\n\n\nvar formatSLATime = function formatSLATime(seconds) {\n  var units = {\n    y: 31536000,\n    mo: 2592000,\n    d: 86400,\n    h: 3600,\n    m: 60\n  };\n\n  if (seconds < 60) {\n    return '1m';\n  } // we will only show two parts, two max granularity's, h-m, y-d, d-h, m, but no seconds\n\n\n  var parts = [];\n  Object.keys(units).forEach(function (unit) {\n    var value = Math.floor(seconds / units[unit]);\n    if (seconds < 60 && parts.length > 0) return;\n    if (parts.length === 2) return;\n\n    if (value > 0) {\n      parts.push(value + unit);\n      seconds -= value * units[unit];\n    }\n  });\n  return parts.join(' ');\n};\n/**\r\n * Creates an SLA object based on the type, applied SLA, and chat details.\r\n * @param type - The type of SLA (FRT, NRT, RT).\r\n * @param appliedSla - The applied SLA details.\r\n * @param chat - The chat details.\r\n * @returns An object containing the SLA status or null if conditions are not met.\r\n */\n\n\nvar createSLAObject = function createSLAObject(type, appliedSla, chat) {\n  var frtThreshold = appliedSla.sla_first_response_time_threshold,\n      nrtThreshold = appliedSla.sla_next_response_time_threshold,\n      rtThreshold = appliedSla.sla_resolution_time_threshold,\n      createdAt = appliedSla.created_at;\n  var firstReplyCreatedAt = chat.first_reply_created_at,\n      waitingSince = chat.waiting_since,\n      status = chat.status;\n  var SLATypes = {\n    FRT: {\n      threshold: calculateThreshold(createdAt, frtThreshold),\n      //   Check FRT only if threshold is not null and first reply hasn't been made\n      condition: frtThreshold !== null && (!firstReplyCreatedAt || firstReplyCreatedAt === 0)\n    },\n    NRT: {\n      threshold: calculateThreshold(waitingSince, nrtThreshold),\n      // Check NRT only if threshold is not null, first reply has been made and we are waiting since\n      condition: nrtThreshold !== null && !!firstReplyCreatedAt && !!waitingSince\n    },\n    RT: {\n      threshold: calculateThreshold(createdAt, rtThreshold),\n      // Check RT only if the conversation is open and threshold is not null\n      condition: status === 'open' && rtThreshold !== null\n    }\n  };\n  var SLAStatus = SLATypes[type];\n  return SLAStatus ? _extends({}, SLAStatus, {\n    type: type\n  }) : null;\n};\n/**\r\n * Evaluates SLA conditions and returns an array of SLAStatus objects.\r\n * @param appliedSla - The applied SLA details.\r\n * @param chat - The chat details.\r\n * @returns An array of SLAStatus objects.\r\n */\n\n\nvar evaluateSLAConditions = function evaluateSLAConditions(appliedSla, chat) {\n  // Filter out the SLA based on conditions and update the object with the breach status(icon, isSlaMissed)\n  var SLATypes = ['FRT', 'NRT', 'RT'];\n  return SLATypes.map(function (type) {\n    return createSLAObject(type, appliedSla, chat);\n  }).filter(function (SLAStatus) {\n    return !!SLAStatus && SLAStatus.condition;\n  }).map(function (SLAStatus) {\n    return _extends({}, SLAStatus, {\n      icon: SLAStatus.threshold <= 0 ? 'flame' : 'alarm',\n      isSlaMissed: SLAStatus.threshold <= 0\n    });\n  });\n};\n/**\r\n * Evaluates the SLA status for a given chat and applied SLA.\r\n * @param {Object} params - The parameters object.\r\n * @param params.appliedSla - The applied SLA details.\r\n * @param params.chat - The chat details.\r\n * @returns An object containing the most urgent SLA status.\r\n */\n\n\nvar evaluateSLAStatus = function evaluateSLAStatus(_ref) {\n  var appliedSla = _ref.appliedSla,\n      chat = _ref.chat;\n  if (!appliedSla || !chat) return {\n    type: '',\n    threshold: '',\n    icon: '',\n    isSlaMissed: false\n  }; // Filter out the SLA and create the object for each breach\n\n  var SLAStatuses = evaluateSLAConditions(appliedSla, chat); // Return the most urgent SLA which is latest to breach or has missed\n\n  var mostUrgent = findMostUrgentSLAStatus(SLAStatuses);\n  return mostUrgent ? {\n    type: mostUrgent == null ? void 0 : mostUrgent.type,\n    threshold: formatSLATime(mostUrgent.threshold <= 0 ? -mostUrgent.threshold : mostUrgent.threshold),\n    icon: mostUrgent.icon,\n    isSlaMissed: mostUrgent.isSlaMissed\n  } : {\n    type: '',\n    threshold: '',\n    icon: '',\n    isSlaMissed: false\n  };\n};\n\nexport { clamp, convertSecondsToTimeUnit, createTypingIndicator, debounce, evaluateSLAStatus, formatDate, formatTime, getContrastingTextColor, getMessageVariables, getQuantileIntervals, getUndefinedVariablesInMessage, parseBoolean, quantile, replaceVariablesInMessage, sortAsc, trimContent };"],"sourceRoot":""}