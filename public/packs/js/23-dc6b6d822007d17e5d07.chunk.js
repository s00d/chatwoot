(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{113:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return h})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return g})),n.d(e,"g",(function(){return s})),n.d(e,"h",(function(){return v})),n.d(e,"i",(function(){return o}));var r=function(t,e,n){var r;return function(){var a=null,i=arguments,o=function(){r=null,n||t.apply(a,i)},s=n&&!r;clearTimeout(r),r=window.setTimeout(o,e),s&&t.apply(a,i)}},a=function(t){var e=t.replace("#","");return.299*parseInt(e.slice(0,2),16)+.587*parseInt(e.slice(2,4),16)+.114*parseInt(e.slice(4,6),16)>186?"#000000":"#FFFFFF"},i=function(t){var e="";if(t>=60&&t<3600){var n=Math.floor(t/60);e=n+" Min";var r=60===n?0:Math.floor(t%60);return e+(r>0?" "+r+" Sec":"")}if(t>=3600&&t<86400){var a=Math.floor(t/3600);e=a+" Hr";var i=t%3600<60||24===a?0:Math.floor(t%3600/60);return e+(i>0?" "+i+" Min":"")}if(t>=86400){var o=Math.floor(t/86400);e=o+" Day";var s=t%86400<3600||o>=364?0:Math.floor(t%86400/3600);return e+(s>0?" "+s+" Hr":"")}return Math.floor(t)+" Sec"},o=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=1024),void 0===n&&(n=!1);var r=t;return t.length>e&&(r=t.substring(0,e)),n&&(r+="..."),r};function s(t){try{var e=String(t).toLowerCase();return Boolean(JSON.parse(e))}catch(n){return!1}}function u(t){return t.slice().sort((function(t,e){return t-e}))}function l(t,e){var n,r,a,i=(r=1,(a=e)<(n=0)?n:a>r?r:a),o=(t.length-1)*i,s=Math.floor(o),u=o-s;return void 0!==t[s+1]?t[s]+u*(t[s+1]-t[s]):t[s]}var c=function(t,e){var n=u(t);return e.map((function(t){return l(n,t)}))},f=/{{(.*?)}}/g,d=function(t){return(t||"").replace(/\b(\w)/g,(function(t){return t.toUpperCase()}))},m=function(t){var e=t.user,n=null!=e&&e.name?e.name.split(" ").shift():"";return d(n)},p=function(t){var e=t.user;if(e&&e.name){var n=e.name.split(" ").length>1?e.name.split(" ").pop():"";return d(n)}return""},h=function(t){var e,n=t.conversation,r=n.meta,a=r.assignee,i=r.sender,o=n.id;return{"contact.name":d((null==i?void 0:i.name)||""),"contact.first_name":m({user:i}),"contact.last_name":p({user:i}),"contact.email":null==i?void 0:i.email,"contact.phone":null==i?void 0:i.phone_number,"contact.id":null==i?void 0:i.id,"conversation.id":o,"agent.name":d((null==a?void 0:a.name)||""),"agent.first_name":m({user:a}),"agent.last_name":p({user:a}),"agent.email":null!=(e=null==a?void 0:a.email)?e:""}},v=function(t){var e=t.message,n=t.variables;return e.replace(f,(function(t,e){return n[e.trim()]?n[e.trim().toLowerCase()]:""}))},g=function(t){var e=t.message,n=t.variables,r=e.replace(/```(?:.|\n)+?```/g,"").match(f);return r?r.map((function(t){return t.replace("{{","").replace("}}","").trim()})).filter((function(t){return!n[t]})):[]}},2053:function(t,e,n){var r=n(34),a=n(248);t.exports=function(t){return r((function(){return!!a[t]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[t]()||a[t].name!==t}))}},2054:function(t,e,n){"use strict";n(676)},2055:function(t,e,n){"use strict";n(677)},3096:function(t,e,n){"use strict";n.r(e);n(6),n(3),n(5),n(9),n(7),n(10);var r=n(346),a=n(4),i=n(113),o=n(991),s=(n(39),n(44),n(22),{name:"GroupedAvatars",components:{Thumbnail:n(65).a},props:{users:{type:Array,default:function(){return[]}}}}),u=n(1),l={name:"AvailableAgents",components:{GroupedAvatars:Object(u.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex"},t._l(t.users,(function(t,e){return n("span",{key:t.id,class:(e?"-ml-4":"")+" inline-block rounded-full text-white shadow-solid"},[n("thumbnail",{attrs:{size:"40px",username:t.name,src:t.avatar,"has-border":""}})],1)})),0)}),[],!1,null,null,null).exports},props:{agents:{type:Array,default:function(){return[]}}},computed:{users:function(){return this.agents.slice(0,5).map((function(t){return{id:t.id,avatar:t.avatar_url,name:t.name}}))}}},c=Object(u.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("grouped-avatars",{attrs:{users:t.users}})}),[],!1,null,null,null).exports,f=n(678),d=n(612),m=n(281);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g={name:"TeamAvailability",components:{AvailableAgents:c,CustomButton:f.a},mixins:[r.a,o.a,d.a,m.a],props:{availableAgents:{type:Array,default:function(){}},hasConversation:{type:Boolean,default:!1}},computed:h(h({},Object(a.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{textColor:function(){return Object(i.c)(this.widgetColor)},isOnline:function(){var t=this.channelConfig.workingHoursEnabled,e=this.availableAgents.length>0;return t?this.isInBetweenTheWorkingHours:e}}),methods:{startConversation:function(){this.$emit("start-conversation")}}},b=Object(u.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-5"},[n("div",{staticClass:"flex items-center justify-between mb-4"},[n("div",{staticClass:"max-w-xs",class:t.$dm("text-black-700","dark:text-slate-50")},[n("div",{staticClass:"text-base leading-5 font-medium mb-1"},[t._v("\n        "+t._s(t.isOnline?t.$t("TEAM_AVAILABILITY.ONLINE"):t.$t("TEAM_AVAILABILITY.OFFLINE"))+"\n      ")]),t._v(" "),n("div",{staticClass:"text-xs leading-4 mt-1"},[t._v("\n        "+t._s(t.replyWaitMessage)+"\n      ")])]),t._v(" "),t.isOnline?n("available-agents",{attrs:{agents:t.availableAgents}}):t._e()],1),t._v(" "),n("custom-button",{staticClass:"font-medium",attrs:{block:"","bg-color":t.widgetColor,"text-color":t.textColor},on:{click:t.startConversation}},[t._v("\n    "+t._s(t.hasConversation?t.$t("CONTINUE_CONVERSATION"):t.$t("START_CONVERSATION"))+"\n  ")])],1)}),[],!1,null,null,null).exports,y=n(589);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x={name:"Home",components:{TeamAvailability:b},mixins:[r.a,y.a],props:{hasFetched:{type:Boolean,default:!1},isCampaignViewClicked:{type:Boolean,default:!1}},data:function(){return{}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){C(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(a.mapGetters)({availableAgents:"agent/availableAgents",activeCampaign:"campaign/getActiveCampaign",conversationSize:"conversation/getConversationSize"})),methods:{startConversation:function(){return this.preChatFormEnabled&&!this.conversationSize?this.replaceRoute("prechat-form"):this.replaceRoute("messages")}}},O=x,S=Object(u.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-1 flex-col justify-end"},[n("div",{staticClass:"flex flex-1 overflow-auto"}),t._v(" "),n("team-availability",{attrs:{"available-agents":t.availableAgents,"has-conversation":!!t.conversationSize},on:{"start-conversation":t.startConversation}})],1)}),[],!1,null,null,null);e.default=S.exports},585:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));n(629),n(47),n(62);var r=function(){var t=12*(window.devicePixelRatio||1),e=document.createElement("canvas");if(!e.getContext||!e.getContext("2d")||"function"!==typeof e.getContext("2d").fillText)return!1;var n=e.getContext("2d");return n.fillStyle="#f00",n.textBaseline="top",n.font="32px Arial",n.fillText("\ud83d\udc28",0,0),0!==n.getImageData(t,t,1,1).data[0]},a=function(t){return t?t.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"").replace(/\s+/g," ").trim():""}},629:function(t,e,n){"use strict";var r=n(36),a=n(247).trim;r({target:"String",proto:!0,forced:n(2053)("trim")},{trim:function(){return a(this)}})},65:function(t,e,n){"use strict";n(30),n(47),n(62),n(32),n(258),n(191);var r={name:"Avatar",props:{username:{type:String,default:""},size:{type:Number,default:40}},computed:{style:function(){return{fontSize:"".concat(Math.floor(this.size/2.5),"px")}},userInitial:function(){var t=this.username.split(/[ -]/).reduce((function(t,e){return t+e.charAt(0)}),"");return t.length>2&&-1!==t.search(/[A-Z]/)&&(t=t.replace(/[a-z]+/g,"")),t=t.substring(0,2).toUpperCase()}}},a=(n(2054),n(1)),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"avatar-container",style:t.style,attrs:{"aria-hidden":"true"}},[t._v("\n  "+t._s(t.userInitial)+"\n")])}),[],!1,null,"fce88f76",null).exports,o=n(585),s={components:{Avatar:i},props:{src:{type:String,default:""},size:{type:String,default:"40px"},badge:{type:String,default:""},username:{type:String,default:""},status:{type:String,default:""},hasBorder:{type:Boolean,default:!1},shouldShowStatusAlways:{type:Boolean,default:!1},title:{type:String,default:""},variant:{type:String,default:"circle"}},data:function(){return{hasImageLoaded:!1,imgError:!1}},computed:{userNameWithoutEmoji:function(){return Object(o.b)(this.username)},showStatusIndicator:function(){return!!this.shouldShowStatusAlways||("online"===this.status||"busy"===this.status)},avatarSize:function(){return Number(this.size.replace(/\D+/g,""))},badgeSrc:function(){return{instagram_direct_message:"instagram-dm",facebook:"messenger","twitter-tweet":"twitter-tweet","twitter-dm":"twitter-dm",whatsapp:"whatsapp",sms:"sms","Channel::Line":"line","Channel::Telegram":"telegram","Channel::WebWidget":""}[this.badge]},badgeStyle:function(){var t=Math.floor(this.avatarSize/3),e="".concat(t+2,"px");return{width:e,height:e,borderRadius:"".concat(t/2,"px")}},statusStyle:function(){var t="".concat(this.avatarSize/4,"px");return{width:t,height:t}},thumbnailClass:function(){var t=this.hasBorder?"border":"",e="circle"===this.variant?"thumbnail-rounded":"thumbnail-square";return"user-thumbnail ".concat(t," ").concat(e)},thumbnailBoxClass:function(){var t="circle"===this.variant?"is-rounded":"";return"user-thumbnail-box ".concat(t)},shouldShowImage:function(){return!!this.src&&(!!this.hasImageLoaded&&!this.imgError)}},watch:{src:function(t,e){t!==e&&this.imgError&&(this.imgError=!1)}},methods:{onImgError:function(){this.imgError=!0},onImgLoad:function(){this.hasImageLoaded=!0}}},u=(n(2055),Object(a.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.thumbnailBoxClass,style:{height:t.size,width:t.size},attrs:{title:t.title}},[n("img",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowImage,expression:"shouldShowImage"}],class:t.thumbnailClass,attrs:{src:t.src},on:{load:t.onImgLoad,error:t.onImgError}}),t._v(" "),n("Avatar",{directives:[{name:"show",rawName:"v-show",value:!t.shouldShowImage,expression:"!shouldShowImage"}],class:t.thumbnailClass,attrs:{username:t.userNameWithoutEmoji,size:t.avatarSize}}),t._v(" "),t.badgeSrc?n("img",{staticClass:"source-badge",style:t.badgeStyle,attrs:{src:"/integrations/channels/badges/"+t.badgeSrc+".png",alt:"Badge"}}):t._e(),t._v(" "),t.showStatusIndicator?n("div",{class:"source-badge user-online-status user-online-status--"+t.status,style:t.statusStyle}):t._e()],1)}),[],!1,null,"4240ad79",null));e.a=u.exports},676:function(t,e,n){},677:function(t,e,n){},678:function(t,e,n){"use strict";n(6);var r={props:{block:{type:Boolean,default:!1},type:{type:String,default:"blue"},bgColor:{type:String,default:""},textColor:{type:String,default:""},disabled:{type:Boolean,default:!1}},computed:{buttonClassName:function(){var t="text-white py-3 px-4 rounded shadow-sm";return"clear"===this.type&&(t="flex mx-auto mt-4 text-xs w-auto text-black-600"),"blue"!==this.type||Object.keys(this.buttonStyles).length||(t="".concat(t," bg-woot-500 hover:bg-woot-700")),this.block&&(t="".concat(t," w-full")),t},buttonStyles:function(){var t={};return this.bgColor&&(t.backgroundColor=this.bgColor),this.textColor&&(t.color=this.textColor),t}},methods:{onClick:function(t){this.$emit("click",t)}}},a=n(1),i=Object(a.a)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{class:t.buttonClassName,style:t.buttonStyles,attrs:{disabled:t.disabled},on:{click:t.onClick}},[t._t("default")],2)}),[],!1,null,null,null);e.a=i.exports}}]);
//# sourceMappingURL=23-dc6b6d822007d17e5d07.chunk.js.map