(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{107:function(e,t,n){"use strict";n(50),n(73);var r=n(128),s=n(155),i=n(2798),a=n(3019);t.a={methods:{messageStamp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kk:mm",n=Object(r.a)(e);return Object(s.a)(n,t)},messageTimestamp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MMM d, yyyy",n=Object(r.a)(e),a=new Date,o=Object(s.a)(n,t);return Object(i.a)(n,a)?o:Object(s.a)(n,"LLL d y, h:mm a")},dynamicTime:function(e){var t=Object(r.a)(e);return Object(a.a)(t,{addSuffix:!0})},dateFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MMM d, yyyy",n=Object(r.a)(e);return Object(s.a)(n,t)},shortTimestamp:function(e){return e.replace(/about|over|almost|/g,"").replace("less than a minute ago","now").replace(" minute ago","m").replace(" minutes ago","m").replace("a minute ago","m").replace("an hour ago","h").replace(" hour ago","h").replace(" hours ago","h").replace(" day ago","d").replace("a day ago","d").replace(" days ago","d").replace("a month ago","mo").replace(" months ago","mo").replace(" month ago","mo").replace("a year ago","y").replace(" year ago","y").replace(" years ago","y")}}}},126:function(e,t,n){"use strict";n(49),n(50),n(73);var r=n(1943),s=n.n(r),i=(n(391),n(1887),n(169),/mention:\/\/(user|team)\/(\d+)\/(.+)/gm);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=n(1942)({html:!1,xhtmlOut:!0,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,quotes:"\u201c\u201d\u2018\u2019",maxNesting:20}).use((function(e){e.renderer.rules.mention=function(e,t){return'<span class="prosemirror-mention-node">'.concat(e[t].content,"</span>")},e.inline.ruler.before("link","mention",(function(e,t){var n,r,s,a,o,c,u="",l=e.posMax;return 91===e.src.charCodeAt(e.pos)&&(s=e.pos+1,!((r=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)&&(n=e.src.slice(s,r),(a=r+1)<l&&40===e.src.charCodeAt(a)&&(a+=1,(o=e.md.helpers.parseLinkDestination(e.src,a,e.posMax)).ok&&(u=e.md.normalizeLink(o.str),e.md.validateLink(u)?a=o.pos:u=""),a+=1),!!u.match(new RegExp(i))&&(t||(e.pos=s,e.posMax=r,(c=e.push("mention","")).href=u,c.content=n),e.pos=a,e.posMax=l,!0)))}))})).use(s.a,{attrs:{class:"link",rel:"noreferrer noopener nofollow",target:"_blank"}}),u=/(^|[^@\w])@(\w{1,15})\b/g,l=/(^|\s)#(\w+)/g,d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a(this,e),this.message=t||"",this.isAPrivateNote=r,this.isATweet=n}var t,n,r;return t=e,(n=[{key:"formatMessage",value:function(){var e=this.message;return this.isATweet&&!this.isAPrivateNote&&(e=(e=e.replace(u,"$1[@$2](http://twitter.com/$2)")).replace(l,"$1[#$2](https://twitter.com/hashtag/$2)")),c.render(e)}},{key:"formattedMessage",get:function(){return this.formatMessage()}},{key:"plainText",get:function(){return(new DOMParser).parseFromString(this.formattedMessage,"text/html").body.textContent||""}}])&&o(t.prototype,n),r&&o(t,r),e}(),m=d;t.a={methods:{formatMessage:function(e,t,n){return new m(e,t,n).formattedMessage},getPlainText:function(e,t){return new m(e,t).plainText},truncateMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.length<100?e:"".concat(e.slice(0,97),"...")}}}},168:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return l}));n(1958),n(1896),n(32),n(389),n(50),n(73),n(273),n(7),n(42),n(219);var r=n(197),s="--";function i(e){var t=new r.MessageMarkdownTransformer(r.messageSchema).parse(e);return r.MessageMarkdownSerializer.serialize(t)}function a(e,t){var n=e.trimEnd(),r=i(t);return n.endsWith(r)?e.lastIndexOf(r):-1}function o(e,t){var n=i(t);return a(e,n)>-1?e:"".concat(e.trimEnd(),"\n\n").concat(function(e){return"".concat(s,"\n\n").concat(i(e))}(n))}function c(e,t){var n=a(e,i(t)),r=e;n>-1&&(r=r.substring(0,n).trimEnd());var o=r.lastIndexOf(s);return-1!==o&&o===r.length-s.length&&(r=r.substring(0,o)),r}function u(e,t,n){return o(c(e,t),n)}function l(e){return e.replace(/```[\s\S]*?```/g,"").replace(/`.*?`/g,"").replace(/!\[.*?\]\(.*?\)/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/#+\s*|[*_-]{1,3}/g,"").split("\n").map((function(e){return e.trim()})).filter(Boolean).join("\n").replace(/\n{2,}/g,"\n").trim()}},1960:function(e,t,n){"use strict";n(8);var r={props:{block:{type:Boolean,default:!1},type:{type:String,default:"blue"},bgColor:{type:String,default:""},textColor:{type:String,default:""},disabled:{type:Boolean,default:!1}},computed:{buttonClassName:function(){var e="text-white py-3 px-4 rounded shadow-sm leading-4";return"clear"===this.type&&(e="flex mx-auto mt-4 text-xs leading-3 w-auto text-black-600"),"blue"!==this.type||Object.keys(this.buttonStyles).length||(e="".concat(e," bg-woot-500 hover:bg-woot-700")),this.block&&(e="".concat(e," w-full")),e},buttonStyles:function(){var e={};return this.bgColor&&(e.backgroundColor=this.bgColor),this.textColor&&(e.color=this.textColor),e}},methods:{onClick:function(e){this.$emit("click",e)}}},s=n(1),i=Object(s.a)(r,(function(){var e=this;return(0,e._self._c)("button",{class:e.buttonClassName,style:e.buttonStyles,attrs:{disabled:e.disabled},on:{click:e.onClick}},[e._t("default")],2)}),[],!1,null,null,null);t.a=i.exports},1967:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(32);var r=function(e,t){return"".concat("https://app.dyte.in/meeting/stage/").concat(e,"?authToken=").concat(t,"&showSetupScreen=true&disableVideoBackground=true")}},3033:function(e,t,n){e.exports=n.p+"media/dashboard/assets/images/chatwoot_bot-905112376e6493b37e2cecea8f9dc50c.png"},3097:function(e,t,n){},3098:function(e,t,n){},3099:function(e,t,n){},3100:function(e,t,n){},3101:function(e,t,n){},3102:function(e,t,n){},3103:function(e,t,n){},3104:function(e,t,n){},3105:function(e,t,n){},3106:function(e,t,n){},3107:function(e,t,n){},3108:function(e,t,n){},3109:function(e,t,n){},3110:function(e,t,n){},3111:function(e,t,n){},3112:function(e,t,n){},3113:function(e,t,n){},3114:function(e,t,n){},3115:function(e,t,n){},3116:function(e,t,n){},3240:function(e,t,n){"use strict";n(3097)},3241:function(e,t,n){"use strict";n(3098)},3242:function(e,t,n){"use strict";n(3099)},3243:function(e,t,n){"use strict";n(3100)},3244:function(e,t,n){"use strict";n(3101)},3245:function(e,t,n){"use strict";n(3102)},3246:function(e,t,n){"use strict";n(3103)},3247:function(e,t,n){"use strict";n(3104)},3248:function(e,t,n){"use strict";n(3105)},3249:function(e,t,n){"use strict";n(3106)},3250:function(e,t,n){"use strict";n(3107)},3251:function(e,t,n){"use strict";n(3108)},3252:function(e,t,n){"use strict";n(3109)},3253:function(e,t,n){"use strict";n(3110)},3254:function(e,t,n){"use strict";n(3111)},3255:function(e,t,n){"use strict";n(3112)},3256:function(e,t,n){"use strict";n(3113)},3257:function(e,t,n){e.exports=n.p+"media/widget/assets/images/typing-6027d21b24f45e3377a729a55158f948.gif"},3258:function(e,t,n){"use strict";n(3114)},3259:function(e,t,n){"use strict";n(3115)},3260:function(e,t,n){"use strict";n(3116)},3265:function(e,t,n){"use strict";n.r(t);n(8),n(4),n(7),n(10),n(9),n(11);var r=n(6),s=(n(12),n(17),n(20),n(172)),i=n(1960),a=(n(21),n(25),n(23),n(32),n(389),n(68)),o=(n(55),n(67),n(301),n(1966)),c=n.n(o),u=n(77),l=n(375),d=n(43),m=n(75),p=n(342),f=n(1866);function g(e,t,n,r,s,i,a){try{var o=e[i](a),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,s)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function a(e){g(i,r,s,a,o,"next",e)}function o(e){g(i,r,s,a,o,"throw",e)}a(void 0)}))}}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={components:{FluentIcon:p.a,FileUpload:c.a,Spinner:u.a},props:{onAttach:{type:Function,default:function(){}}},data:function(){return{isUploading:!1}},computed:v(v({},Object(r.mapGetters)({globalConfig:"globalConfig/get"})),{},{fileUploadSizeLimit:function(){return d.h},allowedFileTypes:function(){return d.a}}),mounted:function(){document.addEventListener("paste",this.handleClipboardPaste)},destroyed:function(){document.removeEventListener("paste",this.handleClipboardPaste)},methods:{handleClipboardPaste:function(e){var t=this;(e.clipboardData||e.originalEvent.clipboardData).items.forEach((function(n){if("file"===n.kind){e.preventDefault();var r=n.getAsFile();t.$refs.upload.add(r)}}))},getFileType:function(e){return e.includes("image")?"image":"file"},onFileUpload:function(e){var t=this;return b(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.globalConfig.directUploadsEnabled){n.next=5;break}return n.next=3,t.onDirectFileUpload(e);case 3:n.next=7;break;case 5:return n.next=7,t.onIndirectFileUpload(e);case 7:case"end":return n.stop()}}),n)})))()},onDirectFileUpload:function(e){var t=this;return b(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:t.isUploading=!0;try{Object(l.a)(e,d.h)?(r=window.chatwootWebChannel.websiteToken,new f.DirectUpload(e.file,"/api/v1/widget/direct_uploads?website_token=".concat(r),{directUploadWillCreateBlobWithXHR:function(e){e.setRequestHeader("X-Auth-Token",window.authToken)}}).create((function(n,r){n?window.bus.$emit(m.a.SHOW_ALERT,{message:n}):t.onAttach(v({file:r.signed_id},t.getLocalFileAttributes(e)))}))):window.bus.$emit(m.a.SHOW_ALERT,{message:t.$t("FILE_SIZE_LIMIT",{MAXIMUM_FILE_UPLOAD_SIZE:t.fileUploadSizeLimit})})}catch(s){}t.isUploading=!1;case 5:case"end":return n.stop()}}),n)})))()},onIndirectFileUpload:function(e){var t=this;return b(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:if(t.isUploading=!0,n.prev=3,!Object(l.a)(e,d.h)){n.next=9;break}return n.next=7,t.onAttach(v({file:e.file},t.getLocalFileAttributes(e)));case 7:n.next=10;break;case 9:window.bus.$emit(m.a.SHOW_ALERT,{message:t.$t("FILE_SIZE_LIMIT",{MAXIMUM_FILE_UPLOAD_SIZE:t.fileUploadSizeLimit})});case 10:n.next=14;break;case 12:n.prev=12,n.t0=n.catch(3);case 14:t.isUploading=!1;case 15:case"end":return n.stop()}}),n,null,[[3,12]])})))()},getLocalFileAttributes:function(e){return{thumbUrl:window.URL.createObjectURL(e.file),fileType:this.getFileType(e.type)}}}},C=n(1),w=Object(C.a)(O,(function(){var e=this,t=e._self._c;return t("file-upload",{ref:"upload",attrs:{size:8388608,accept:e.allowedFileTypes,data:{direct_upload_url:"/api/v1/widget/direct_uploads",direct_upload:!0}},on:{"input-file":e.onFileUpload}},[t("button",{staticClass:"icon-button flex items-center justify-center"},[e.isUploading.image?e._e():t("fluent-icon",{attrs:{icon:"attach"}}),e._v(" "),e.isUploading?t("spinner",{attrs:{size:"small"}}):e._e()],1)])}),[],!1,null,null,null).exports,_={components:{FluentIcon:p.a,Spinner:u.a},props:{loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},onClick:{type:Function,default:function(){}},color:{type:String,default:"#6e6f73"}}},k=Object(C.a)(_,(function(){var e=this,t=e._self._c;return t("button",{staticClass:"icon-button flex items-center justify-center ml-1",attrs:{type:"submit",disabled:e.disabled},on:{click:e.onClick}},[e.loading?t("spinner",{attrs:{size:"small"}}):t("fluent-icon",{style:`color: ${e.color}`,attrs:{icon:"send"}})],1)}),[],!1,null,null,null).exports,j=n(390),x=n(397),S=n(333);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T={name:"ChatInputWrap",components:{ChatAttachmentButton:w,ChatSendButton:k,EmojiInput:function(){return n.e(5).then(n.bind(null,3296))},FluentIcon:p.a,ResizableTextArea:x.a},mixins:[a.mixin,j.a,S.a],props:{onSendMessage:{type:Function,default:function(){}},onSendAttachment:{type:Function,default:function(){}}},data:function(){return{userInput:"",showEmojiPicker:!1,isFocused:!1}},computed:A(A({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor",isWidgetOpen:"appConfig/getIsWidgetOpen"})),{},{showAttachment:function(){return this.hasAttachmentsEnabled&&0===this.userInput.length},showSendButton:function(){return this.userInput.length>0},inputColor:function(){return"".concat(this.$dm("bg-white","dark:bg-slate-600"),"\n        ").concat(this.$dm("text-black-900","dark:text-slate-50"))},emojiIconColor:function(){return this.showEmojiPicker?"text-woot-500 ".concat(this.$dm("text-black-900","dark:text-slate-100")):"".concat(this.$dm("text-black-900","dark:text-slate-100"))}}),watch:{isWidgetOpen:function(e){e&&this.focusInput()}},destroyed:function(){document.removeEventListener("keypress",this.handleEnterKeyPress)},mounted:function(){document.addEventListener("keypress",this.handleEnterKeyPress),this.isWidgetOpen&&this.focusInput()},methods:{onBlur:function(){this.isFocused=!1},onFocus:function(){this.isFocused=!0},handleButtonClick:function(){this.userInput&&this.userInput.trim()&&this.onSendMessage(this.userInput),this.userInput="",this.focusInput()},handleEnterKeyPress:function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),this.handleButtonClick())},toggleEmojiPicker:function(){this.showEmojiPicker=!this.showEmojiPicker},hideEmojiPicker:function(e){this.showEmojiPicker&&(e.stopPropagation(),this.toggleEmojiPicker())},emojiOnClick:function(e){this.userInput="".concat(this.userInput).concat(e," ")},onTypingOff:function(){this.toggleTyping("off")},onTypingOn:function(){this.toggleTyping("on")},toggleTyping:function(e){this.$store.dispatch("conversation/toggleUserTyping",{typingStatus:e})},focusInput:function(){this.$refs.chatInput.focus()}}},I=(n(3240),Object(C.a)(T,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"chat-message--input is-focused",class:e.$dm("bg-white ","dark:bg-slate-600"),on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.hideEmojiPicker.apply(null,arguments)}}},[t("resizable-text-area",{ref:"chatInput",staticClass:"form-input user-message-input is-focused",class:e.inputColor,attrs:{id:"chat-input","aria-label":e.$t("CHAT_PLACEHOLDER"),placeholder:e.$t("CHAT_PLACEHOLDER")},on:{"typing-off":e.onTypingOff,"typing-on":e.onTypingOn,focus:e.onFocus,blur:e.onBlur},model:{value:e.userInput,callback:function(t){e.userInput=t},expression:"userInput"}}),e._v(" "),t("div",{staticClass:"button-wrap"},[e.showAttachment?t("chat-attachment-button",{class:e.$dm("text-black-900","dark:text-slate-100"),attrs:{"on-attach":e.onSendAttachment}}):e._e(),e._v(" "),e.hasEmojiPickerEnabled?t("button",{staticClass:"icon-button flex justify-center items-center",attrs:{"aria-label":"Emoji picker"},on:{click:e.toggleEmojiPicker}},[t("fluent-icon",{class:e.emojiIconColor,attrs:{icon:"emoji"}})],1):e._e(),e._v(" "),e.showEmojiPicker?t("emoji-input",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.hideEmojiPicker,expression:"hideEmojiPicker"}],attrs:{"on-click":e.emojiOnClick},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.hideEmojiPicker.apply(null,arguments)}}}):e._e(),e._v(" "),e.showSendButton?t("chat-send-button",{attrs:{"on-click":e.handleButtonClick,color:e.widgetColor}}):e._e()],1)],1)}),[],!1,null,"1981afbb",null)),$=I.exports,M=n(244),D=n(1851);function L(e,t,n,r,s,i,a){try{var o=e[i](a),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,s)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function a(e){L(i,r,s,a,o,"next",e)}function o(e){L(i,r,s,a,o,"throw",e)}a(void 0)}))}}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V={components:{ChatInputWrap:$,CustomButton:i.a},mixins:[D.a],props:{msg:{type:String,default:""}},computed:B(B({},Object(r.mapGetters)({conversationAttributes:"conversationAttributes/getConversationParams",widgetColor:"appConfig/getWidgetColor",conversationSize:"conversation/getConversationSize",currentUser:"contacts/getCurrentUser",isWidgetStyleFlat:"appConfig/isWidgetStyleFlat"})),{},{textColor:function(){return Object(s.c)(this.widgetColor)},hideReplyBox:function(){var e=window.chatwootWebChannel.allowMessagesAfterResolved,t=this.conversationAttributes.status;return!e&&"resolved"===t},showEmailTranscriptButton:function(){return this.currentUser&&this.currentUser.email}}),methods:B(B(B({},Object(r.mapActions)("conversation",["sendMessage","sendAttachment","clearConversations"])),Object(r.mapActions)("conversationAttributes",["getAttributes","clearConversationAttributes"])),{},{handleSendMessage:function(e){var t=this;return R(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.sendMessage({content:e});case 2:0===t.conversationSize&&t.getAttributes();case 3:case"end":return n.stop()}}),n)})))()},handleSendAttachment:function(e){this.sendAttachment({attachment:e})},startNewConversation:function(){this.clearConversations(),this.clearConversationAttributes(),this.replaceRoute("prechat-form")},sendTranscript:function(){var e=this;return R(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.currentUser.email)){t.next=11;break}return t.prev=2,t.next=5,Object(M.f)({email:n});case 5:window.bus.$emit(m.a.SHOW_ALERT,{message:e.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_SUCCESS"),type:"success"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),window.bus.$emit(m.a.SHOW_ALERT,{message:e.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_ERROR")});case 11:case"end":return t.stop()}}),t,null,[[2,8]])})))()}})},N=(n(3241),Object(C.a)(V,(function(){var e=this,t=e._self._c;return e.hideReplyBox?t("div",[t("custom-button",{staticClass:"font-medium",attrs:{block:"","bg-color":e.widgetColor,"text-color":e.textColor},on:{click:e.startNewConversation}},[e._v("\n    "+e._s(e.$t("START_NEW_CONVERSATION"))+"\n  ")]),e._v(" "),e.showEmailTranscriptButton?t("custom-button",{staticClass:"font-normal",attrs:{type:"clear"},on:{click:e.sendTranscript}},[e._v("\n    "+e._s(e.$t("EMAIL_TRANSCRIPT.BUTTON_TEXT"))+"\n  ")]):e._e()],1):t("footer",{staticClass:"shadow-sm bg-white mb-1 z-50 relative",class:{"rounded-lg":!e.isWidgetStyleFlat}},[t("chat-input-wrap",{attrs:{"on-send-message":e.handleSendMessage,"on-send-attachment":e.handleSendAttachment}})],1)}),[],!1,null,"3a0f4a14",null).exports),W=(n(22),n(42),n(27),n(31),n(49),n(52),n(126)),q={name:"UserMessageBubble",mixins:[W.a],props:{message:{type:String,default:""},status:{type:String,default:""},widgetColor:{type:String,default:""}},computed:{textColor:function(){return Object(s.c)(this.widgetColor)}}},z=(n(3242),Object(C.a)(q,(function(){var e=this;return(0,e._self._c)("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:e.formatMessage(e.message,!1),expression:"formatMessage(message, false)"}],staticClass:"chat-bubble user",style:{background:e.widgetColor,color:e.textColor}})}),[],!1,null,"3309eefb",null).exports),H={props:{url:{type:String,default:""},thumb:{type:String,default:""},readableTime:{type:String,default:""}},methods:{onImgError:function(){this.$emit("error")},onClick:function(){this.$emit("click")}}},G=(n(3243),Object(C.a)(H,(function(){var e=this,t=e._self._c;return t("a",{staticClass:"image",attrs:{href:e.url,target:"_blank",rel:"noreferrer noopener nofollow"}},[t("div",{staticClass:"wrap"},[t("img",{attrs:{src:e.thumb,alt:"Picture message"},on:{click:e.onClick,error:e.onImgError}}),e._v(" "),t("span",{staticClass:"time"},[e._v(e._s(e.readableTime))])])])}),[],!1,null,"674f83bd",null).exports),K={components:{FluentIcon:p.a},mixins:[S.a],props:{url:{type:String,default:""},isInProgress:{type:Boolean,default:!1},widgetColor:{type:String,default:""},isUserBubble:{type:Boolean,default:!1}},computed:{title:function(){return this.isInProgress?this.$t("COMPONENTS.FILE_BUBBLE.UPLOADING"):decodeURI(this.fileName)},fileName:function(){return this.url.substring(this.url.lastIndexOf("/")+1)},contrastingTextColor:function(){return Object(s.c)(this.widgetColor)},textColor:function(){return this.isUserBubble&&this.widgetColor?this.contrastingTextColor:""},titleColor:function(){return this.isUserBubble?"":this.$dm("text-black-900","dark:text-slate-50")}},methods:{openLink:function(){window.open(this.url,"_blank").focus()}}},Y=(n(3244),Object(C.a)(K,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"file flex flex-row items-center p-3 cursor-pointer"},[t("div",{staticClass:"icon-wrap",style:{color:e.textColor}},[t("fluent-icon",{attrs:{icon:"document",size:"28"}})],1),e._v(" "),t("div",{staticClass:"meta"},[t("div",{staticClass:"title",class:e.titleColor,style:{color:e.textColor}},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),t("div",{staticClass:"link-wrap mb-1"},[t("a",{staticClass:"download",style:{color:e.textColor},attrs:{rel:"noreferrer noopener nofollow",target:"_blank",href:e.url}},[e._v("\n        "+e._s(e.$t("COMPONENTS.FILE_BUBBLE.DOWNLOAD"))+"\n      ")])])])])}),[],!1,null,"3fc1205c",null).exports),X=n(107),Z={computed:{messageContentAttributes:function(){var e=this.message.content_attributes;return void 0===e?{}:e},hasAttachments:function(){return!!(this.message.attachments&&this.message.attachments.length>0)}}};function J(e,t,n,r,s,i,a){try{var o=e[i](a),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,s)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne={name:"UserMessage",components:{UserMessageBubble:z,ImageBubble:G,FileBubble:Y,FluentIcon:p.a},mixins:[X.a,Z],props:{message:{type:Object,default:function(){}}},data:function(){return{hasImageError:!1}},computed:ee(ee({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{isInProgress:function(){var e=this.message.status;return"in_progress"===(void 0===e?"":e)},showTextBubble:function(){return!!this.message.content},readableTime:function(){var e=this.message.created_at,t=void 0===e?"":e;return this.messageStamp(t)},isFailed:function(){var e=this.message.status;return"failed"===(void 0===e?"":e)},errorMessage:function(){var e=this.message.meta;return e?e.error:this.$t("COMPONENTS.MESSAGE_BUBBLE.ERROR_MESSAGE")}}),watch:{message:function(){this.hasImageError=!1}},mounted:function(){this.hasImageError=!1},methods:{retrySendMessage:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("conversation/sendMessageWithData",t.message);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function a(e){J(i,r,s,a,o,"next",e)}function o(e){J(i,r,s,a,o,"throw",e)}a(void 0)}))})()},onImageLoadError:function(){this.hasImageError=!0}}},re=ne,se=Object(C.a)(re,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-message-wrap"},[t("div",{staticClass:"user-message"},[t("div",{staticClass:"message-wrap",class:{"in-progress":e.isInProgress,"is-failed":e.isFailed}},[e.showTextBubble?t("user-message-bubble",{attrs:{message:e.message.content,status:e.message.status,"widget-color":e.widgetColor}}):e._e(),e._v(" "),e.hasAttachments?t("div",{staticClass:"chat-bubble has-attachment user",style:{backgroundColor:e.widgetColor}},e._l(e.message.attachments,(function(n){return t("div",{key:n.id},["image"!==n.file_type||e.hasImageError?t("file-bubble",{attrs:{url:n.data_url,"is-in-progress":e.isInProgress,"widget-color":e.widgetColor,"is-user-bubble":""}}):t("image-bubble",{attrs:{url:n.data_url,thumb:n.data_url,"readable-time":e.readableTime},on:{error:e.onImageLoadError}})],1)})),0):e._e(),e._v(" "),e.isFailed?t("div",{staticClass:"flex justify-end align-middle px-4 py-2 text-red-700"},[e.hasAttachments?e._e():t("button",{staticClass:"inline-flex justify-center items-center ml-2",attrs:{title:e.$t("COMPONENTS.MESSAGE_BUBBLE.RETRY")},on:{click:e.retrySendMessage}},[t("fluent-icon",{attrs:{icon:"arrow-clockwise",size:"14"}})],1)]):e._e()],1)])])}),[],!1,null,null,null).exports;n(33);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce={components:{},props:{action:{type:Object,default:function(){}}},computed:ae(ae({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{textColor:function(){return Object(s.c)(this.widgetColor)},isLink:function(){return"link"===this.action.type}}),methods:{onClick:function(){}}},ue=(n(3245),{components:{CardButton:Object(C.a)(ce,(function(){var e=this,t=e._self._c;return e.isLink?t("a",{key:e.action.uri,staticClass:"action-button button",style:{background:e.widgetColor,borderColor:e.widgetColor,color:e.textColor},attrs:{href:e.action.uri,target:"_blank",rel:"noopener nofollow noreferrer"}},[e._v("\n  "+e._s(e.action.text)+"\n")]):t("button",{key:e.action.payload,staticClass:"action-button button",style:{borderColor:e.widgetColor,color:e.widgetColor},on:{click:e.onClick}},[e._v("\n  "+e._s(e.action.text)+"\n")])}),[],!1,null,"4071c27e",null).exports},mixins:[S.a],props:{title:{type:String,default:""},description:{type:String,default:""},mediaUrl:{type:String,default:""},actions:{type:Array,default:function(){return[]}},showAvatar:Boolean},computed:{}}),le=(n(3246),Object(C.a)(ue,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"card-message chat-bubble agent",class:e.$dm("bg-white","dark:bg-slate-700")},[t("img",{staticClass:"media",attrs:{src:e.mediaUrl}}),e._v(" "),t("div",{staticClass:"card-body"},[t("h4",{staticClass:"title",class:e.$dm("text-black-900","dark:text-slate-50")},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),t("p",{staticClass:"body",class:e.$dm("text-black-700","dark:text-slate-100")},[e._v("\n      "+e._s(e.description)+"\n    ")]),e._v(" "),e._l(e.actions,(function(e){return t("card-button",{key:e.id,attrs:{action:e}})}))],2)])}),[],!1,null,"6cf511a6",null).exports);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe={mixins:[S.a],props:{buttonLabel:{type:String,default:""},items:{type:Array,default:function(){return[]}},submittedValues:{type:Array,default:function(){return[]}}},data:function(){return{formValues:{},hasSubmitted:!1}},computed:me(me({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{textColor:function(){return Object(s.c)(this.widgetColor)},inputColor:function(){return"".concat(this.$dm("bg-white","dark:bg-slate-600"),"\n        ").concat(this.$dm("text-black-900","dark:text-slate-50"))},isFormValid:function(){var e=this;return this.items.reduce((function(t,n){var r=n.name;return!!e.formValues[r]&&t}),!0)}}),mounted:function(){this.submittedValues.length?this.updateFormValues():this.setFormDefaults()},methods:{onSubmitClick:function(){this.hasSubmitted=!0},onSubmit:function(){this.isFormValid&&this.$emit("submit",this.formValues)},buildFormObject:function(e){return e.reduce((function(e,t){return me(me({},e),{},pe({},t.name,t.value||t.default))}),{})},updateFormValues:function(){this.formValues=this.buildFormObject(this.submittedValues)},setFormDefaults:function(){this.formValues=this.buildFormObject(this.items)}}},ge=(n(3247),Object(C.a)(fe,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"form chat-bubble agent",class:e.$dm("bg-white","dark:bg-slate-700")},[t("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[e._l(e.items,(function(n){return t("div",{key:n.key,staticClass:"form-block",class:{"has-submitted":e.hasSubmitted}},[t("label",{class:e.$dm("text-black-900","dark:text-slate-50")},[e._v(e._s(n.label))]),e._v(" "),"checkbox"===n.type&&"email"===n.type?t("input",{directives:[{name:"model",rawName:"v-model",value:e.formValues[n.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{pattern:n.regex,title:n.title,required:n.required&&"required",name:n.name,placeholder:n.placeholder,disabled:!!e.submittedValues.length,type:"checkbox"},domProps:{checked:Array.isArray(e.formValues[n.name])?e._i(e.formValues[n.name],null)>-1:e.formValues[n.name]},on:{change:function(t){var r=e.formValues[n.name],s=t.target,i=!!s.checked;if(Array.isArray(r)){var a=e._i(r,null);s.checked?a<0&&e.$set(e.formValues,n.name,r.concat([null])):a>-1&&e.$set(e.formValues,n.name,r.slice(0,a).concat(r.slice(a+1)))}else e.$set(e.formValues,n.name,i)}}}):"radio"===n.type&&"email"===n.type?t("input",{directives:[{name:"model",rawName:"v-model",value:e.formValues[n.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{pattern:n.regex,title:n.title,required:n.required&&"required",name:n.name,placeholder:n.placeholder,disabled:!!e.submittedValues.length,type:"radio"},domProps:{checked:e._q(e.formValues[n.name],null)},on:{change:function(t){return e.$set(e.formValues,n.name,null)}}}):"email"===n.type?t("input",{directives:[{name:"model",rawName:"v-model",value:e.formValues[n.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{pattern:n.regex,title:n.title,required:n.required&&"required",name:n.name,placeholder:n.placeholder,disabled:!!e.submittedValues.length,type:n.type},domProps:{value:e.formValues[n.name]},on:{input:function(t){t.target.composing||e.$set(e.formValues,n.name,t.target.value)}}}):"text"===n.type?"checkbox"===n.type?t("input",{directives:[{name:"model",rawName:"v-model",value:e.formValues[n.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{required:n.required&&"required",pattern:n.pattern,title:n.title,name:n.name,placeholder:n.placeholder,disabled:!!e.submittedValues.length,type:"checkbox"},domProps:{checked:Array.isArray(e.formValues[n.name])?e._i(e.formValues[n.name],null)>-1:e.formValues[n.name]},on:{change:function(t){var r=e.formValues[n.name],s=t.target,i=!!s.checked;if(Array.isArray(r)){var a=e._i(r,null);s.checked?a<0&&e.$set(e.formValues,n.name,r.concat([null])):a>-1&&e.$set(e.formValues,n.name,r.slice(0,a).concat(r.slice(a+1)))}else e.$set(e.formValues,n.name,i)}}}):"radio"===n.type?t("input",{directives:[{name:"model",rawName:"v-model",value:e.formValues[n.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{required:n.required&&"required",pattern:n.pattern,title:n.title,name:n.name,placeholder:n.placeholder,disabled:!!e.submittedValues.length,type:"radio"},domProps:{checked:e._q(e.formValues[n.name],null)},on:{change:function(t){return e.$set(e.formValues,n.name,null)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.formValues[n.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{required:n.required&&"required",pattern:n.pattern,title:n.title,name:n.name,placeholder:n.placeholder,disabled:!!e.submittedValues.length,type:n.type},domProps:{value:e.formValues[n.name]},on:{input:function(t){t.target.composing||e.$set(e.formValues,n.name,t.target.value)}}}):"text_area"===n.type?t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formValues[n.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{required:n.required&&"required",title:n.title,name:n.name,placeholder:n.placeholder,disabled:!!e.submittedValues.length},domProps:{value:e.formValues[n.name]},on:{input:function(t){t.target.composing||e.$set(e.formValues,n.name,t.target.value)}}}):"select"===n.type?t("select",{directives:[{name:"model",rawName:"v-model",value:e.formValues[n.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{required:n.required&&"required"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.formValues,n.name,t.target.multiple?r:r[0])}}},e._l(n.options,(function(n){return t("option",{key:n.key,domProps:{value:n.value}},[e._v("\n          "+e._s(n.label)+"\n        ")])})),0):e._e(),e._v(" "),t("span",{staticClass:"error-message"},[e._v("\n        "+e._s(n.pattern_error||e.$t("CHAT_FORM.INVALID.FIELD"))+"\n      ")])])})),e._v(" "),e.submittedValues.length?e._e():t("button",{staticClass:"button block",style:{background:e.widgetColor,borderColor:e.widgetColor,color:e.textColor},attrs:{type:"submit"},on:{click:e.onSubmitClick}},[e._v("\n      "+e._s(e.buttonLabel||e.$t("COMPONENTS.FORM_BUBBLE.SUBMIT"))+"\n    ")])],2)])}),[],!1,null,"28b9fbb6",null)),be=ge.exports;function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ye={components:{},props:{action:{type:Object,default:function(){}},isSelected:{type:Boolean,default:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),methods:{onClick:function(){this.$emit("click",this.action)}}},Oe=ye,Ce=(n(3248),{components:{ChatOption:Object(C.a)(Oe,(function(){var e=this,t=e._self._c;return t("li",{staticClass:"option",class:{"is-selected":e.isSelected},style:{borderColor:e.widgetColor}},[t("button",{staticClass:"option-button button",on:{click:e.onClick}},[t("span",{style:{color:e.widgetColor}},[e._v(e._s(e.action.title))])])])}),[],!1,null,"dddfa04c",null).exports},mixins:[W.a],props:{title:{type:String,default:""},options:{type:Array,default:function(){return[]}},selected:{type:String,default:""},hideFields:{type:Boolean,default:!1}},methods:{isSelected:function(e){return this.selected===e.id},onClick:function(e){this.$emit("click",e)}}}),we=(n(3249),n(3250),Object(C.a)(Ce,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"options-message chat-bubble agent bg-white dark:bg-slate-700"},[t("div",{staticClass:"card-body"},[t("h4",{staticClass:"title text-black-900 dark:text-slate-50"},[t("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:e.formatMessage(e.title,!1),expression:"formatMessage(title, false)"}],staticClass:"message-content text-black-900 dark:text-slate-50"})]),e._v(" "),e.hideFields?e._e():t("ul",{staticClass:"options",class:{"has-selected":!!e.selected}},e._l(e.options,(function(n){return t("chat-option",{key:n.id,attrs:{action:n,"is-selected":e.isSelected(n)},on:{click:e.onClick}})})),1)])])}),[],!1,null,"323cba20",null).exports),_e={components:{FluentIcon:p.a},mixins:[W.a,S.a],props:{items:{type:Array,default:function(){return[]}}}},ke=(n(3251),Object(C.a)(_e,(function(){var e=this,t=e._self._c;return e.items.length?t("div",{staticClass:"chat-bubble agent",class:e.$dm("bg-white","dark:bg-slate-700")},e._l(e.items,(function(n){return t("div",{key:n.link,staticClass:"article-item"},[t("a",{attrs:{href:n.link,target:"_blank",rel:"noopener noreferrer nofollow"}},[t("span",{staticClass:"title flex items-center text-black-900 font-medium"},[t("fluent-icon",{staticClass:"mr-1",class:e.$dm("text-black-900","dark:text-slate-50"),attrs:{icon:"link"}}),e._v(" "),t("span",{class:e.$dm("text-slate-900","dark:text-slate-50")},[e._v(e._s(n.title))])],1),e._v(" "),t("span",{staticClass:"description",class:e.$dm("text-slate-700","dark:text-slate-200")},[e._v("\n        "+e._s(e.truncateMessage(n.description))+"\n      ")])])])})),0):e._e()}),[],!1,null,"feefd62e",null).exports),je=n(18);function xe(e,t,n,r,s,i,a){try{var o=e[i](a),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,s)}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){Ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ee={components:{FluentIcon:p.a,Spinner:u.a},mixins:[S.a],props:{messageId:{type:Number,required:!0},messageContentAttributes:{type:Object,default:function(){}}},data:function(){return{email:"",isUpdating:!1}},computed:Pe(Pe({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{textColor:function(){return Object(s.c)(this.widgetColor)},hasSubmitted:function(){return this.messageContentAttributes&&this.messageContentAttributes.submitted_email},inputColor:function(){return"".concat(this.$dm("bg-white","dark:bg-slate-600"),"\n        ").concat(this.$dm("text-black-900","dark:text-slate-50"),"\n        ").concat(this.$dm("border-black-200","dark:border-black-500"))},inputHasError:function(){return this.$v.email.$error?"".concat(this.inputColor," error"):"".concat(this.inputColor)}}),validations:{email:{required:je.required,email:je.email}},methods:{onSubmit:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$v.$invalid){e.next=2;break}return e.abrupt("return");case 2:return t.isUpdating=!0,e.prev=3,e.next=6,t.$store.dispatch("message/update",{email:t.email,messageId:t.messageId});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:return e.prev=10,t.isUpdating=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[3,8,10,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function a(e){xe(i,r,s,a,o,"next",e)}function o(e){xe(i,r,s,a,o,"throw",e)}a(void 0)}))})()}}},Te=Ee,Ie=(n(3252),Object(C.a)(Te,(function(){var e=this,t=e._self._c;return t("div",[e.hasSubmitted?e._e():t("form",{staticClass:"email-input-group",on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.email,expression:"email",modifiers:{trim:!0}}],staticClass:"form-input",class:e.inputHasError,attrs:{placeholder:e.$t("EMAIL_PLACEHOLDER")},domProps:{value:e.email},on:{input:[function(t){t.target.composing||(e.email=t.target.value.trim())},e.$v.email.$touch],keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit.apply(null,arguments)},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),t("button",{staticClass:"button small",style:{background:e.widgetColor,borderColor:e.widgetColor,color:e.textColor},attrs:{disabled:e.$v.email.$invalid}},[e.isUpdating?t("spinner",{staticClass:"mx-2"}):t("fluent-icon",{attrs:{icon:"chevron-right"}})],1)])])}),[],!1,null,"11b045aa",null)),$e=Ie.exports;function Me(e,t,n,r,s,i,a){try{var o=e[i](a),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,s)}function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){Re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe={components:{Spinner:u.a,FluentIcon:p.a},mixins:[S.a],props:{messageContentAttributes:{type:Object,default:function(){}},messageId:{type:Number,required:!0}},data:function(){return{email:"",ratings:d.g,selectedRating:null,isUpdating:!1,feedback:""}},computed:Le(Le({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{isRatingSubmitted:function(){var e,t;return null===(e=this.messageContentAttributes)||void 0===e||null===(t=e.csat_survey_response)||void 0===t?void 0:t.rating},isFeedbackSubmitted:function(){var e,t;return null===(e=this.messageContentAttributes)||void 0===e||null===(t=e.csat_survey_response)||void 0===t?void 0:t.feedback_message},isButtonDisabled:function(){return!(this.selectedRating&&this.feedback)},inputColor:function(){return"".concat(this.$dm("bg-white","dark:bg-slate-600"),"\n        ").concat(this.$dm("text-black-900","dark:text-slate-50"))},textColor:function(){return Object(s.c)(this.widgetColor)},title:function(){return this.isRatingSubmitted?this.$t("CSAT.SUBMITTED_TITLE"):this.$t("CSAT.TITLE")}}),mounted:function(){if(this.isRatingSubmitted){var e=this.messageContentAttributes.csat_survey_response,t=e.rating,n=e.feedback_message;this.selectedRating=t,this.feedback=n}},methods:{buttonClass:function(e){return[{selected:e.value===this.selectedRating},{disabled:this.isRatingSubmitted},{hover:this.isRatingSubmitted},"emoji-button"]},onSubmit:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isUpdating=!0,e.prev=1,e.next=4,t.$store.dispatch("message/update",{submittedValues:{csat_survey_response:{rating:t.selectedRating,feedback_message:t.feedback}},messageId:t.messageId});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.prev=8,t.isUpdating=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[1,6,8,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function a(e){Me(i,r,s,a,o,"next",e)}function o(e){Me(i,r,s,a,o,"throw",e)}a(void 0)}))})()},selectRating:function(e){this.selectedRating=e.value,this.onSubmit()}}},Be=Fe,Ue=(n(3253),Object(C.a)(Be,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"customer-satisfaction",class:e.$dm("bg-white","dark:bg-slate-700"),style:{borderColor:e.widgetColor}},[t("h6",{staticClass:"title",class:e.$dm("text-slate-900","dark:text-slate-50")},[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),t("div",{staticClass:"ratings"},e._l(e.ratings,(function(n){return t("button",{key:n.key,class:e.buttonClass(n),on:{click:function(t){return e.selectRating(n)}}},[e._v("\n      "+e._s(n.emoji)+"\n    ")])})),0),e._v(" "),e.isFeedbackSubmitted?e._e():t("form",{staticClass:"feedback-form",on:{submit:function(t){return t.preventDefault(),e.onSubmit()}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.feedback,expression:"feedback"}],staticClass:"form-input",class:e.inputColor,attrs:{placeholder:e.$t("CSAT.PLACEHOLDER")},domProps:{value:e.feedback},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit.apply(null,arguments)},input:function(t){t.target.composing||(e.feedback=t.target.value)}}}),e._v(" "),t("button",{staticClass:"button small",style:{background:e.widgetColor,borderColor:e.widgetColor,color:e.textColor},attrs:{disabled:e.isButtonDisabled}},[e.isUpdating&&e.feedback?t("spinner"):t("fluent-icon",{attrs:{icon:"chevron-right"}})],1)])])}),[],!1,null,"7b924d1d",null)),Ve=Ue.exports,Ne=(n(50),n(233),n(99)),We=n(253),qe=function(e){var t=Object(We.b)(window.location.search),n={url:"/api/v1/widget/integrations/dyte/add_participant_to_meeting".concat(t)};return Ne.a.post(n.url,{message_id:e})},ze=n(1967);function He(e,t,n,r,s,i,a){try{var o=e[i](a),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,s)}function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xe={components:{FluentIcon:p.a},props:{messageId:{type:Number,required:!0},meetingData:{type:Object,default:function(){return{}}}},data:function(){return{isLoading:!1,dyteAuthToken:"",isSDKMounted:!1}},computed:Ke(Ke({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{textColor:function(){return Object(s.c)(this.widgetColor)},meetingLink:function(){return Object(ze.a)(this.meetingData.room_name,this.dyteAuthToken)}}),methods:{joinTheCall:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n,r,s,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,qe(t.messageId);case 4:n=e.sent,r=n.data,s=(r=void 0===r?{}:r).authResponse,i=(s=void 0===s?{}:s).authToken,a=void 0===i?"":i,t.dyteAuthToken=a,e.next=15;break;case 13:e.prev=13,e.t0=e.catch(1);case 15:return e.prev=15,t.isLoading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,13,15,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function a(e){He(i,r,s,a,o,"next",e)}function o(e){He(i,r,s,a,o,"throw",e)}a(void 0)}))})()},leaveTheRoom:function(){this.dyteAuthToken=""}}},Ze=Xe,Je=(n(3254),{name:"AgentMessageBubble",components:{ChatArticle:ke,ChatCard:le,ChatForm:be,ChatOptions:we,EmailInput:$e,CustomerSatisfaction:Ve,IntegrationCard:Object(C.a)(Ze,(function(){var e=this,t=e._self._c;return t("div",[t("button",{staticClass:"button join-call-button",style:{background:e.widgetColor,borderColor:e.widgetColor,color:e.textColor},attrs:{"color-scheme":"secondary","is-loading":e.isLoading},on:{click:e.joinTheCall}},[t("fluent-icon",{staticClass:"mr-2",attrs:{icon:"video-add"}}),e._v("\n    "+e._s(e.$t("INTEGRATIONS.DYTE.CLICK_HERE_TO_JOIN"))+"\n  ")],1),e._v(" "),e.dyteAuthToken?t("div",{staticClass:"video-call--container"},[t("iframe",{attrs:{src:e.meetingLink,allow:"camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;"}}),e._v(" "),t("button",{staticClass:"button small join-call-button leave-room-button",on:{click:e.leaveTheRoom}},[e._v("\n      "+e._s(e.$t("INTEGRATIONS.DYTE.LEAVE_THE_ROOM"))+"\n    ")])]):e._e()])}),[],!1,null,"45604e1d",null).exports},mixins:[W.a,S.a],props:{message:{type:String,default:null},contentType:{type:String,default:null},messageType:{type:Number,default:null},messageId:{type:Number,default:null},messageContentAttributes:{type:Object,default:function(){}}},computed:{isTemplate:function(){return 3===this.messageType},isTemplateEmail:function(){return"input_email"===this.contentType},isCards:function(){return"cards"===this.contentType},isOptions:function(){return"input_select"===this.contentType},isForm:function(){return"form"===this.contentType},isArticle:function(){return"article"===this.contentType},isCSAT:function(){return"input_csat"===this.contentType},isIntegrations:function(){return"integrations"===this.contentType}},methods:{onResponse:function(e){this.$store.dispatch("message/update",e)},onOptionSelect:function(e){this.onResponse({submittedValues:[e],messageId:this.messageId})},onFormSubmit:function(e){var t=Object.keys(e).map((function(t){return{name:t,value:e[t]}}));this.onResponse({submittedValues:t,messageId:this.messageId})}}}),Qe=Object(C.a)(Je,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"chat-bubble-wrap"},[e.isCards||e.isOptions||e.isForm||e.isArticle||e.isCards||e.isCSAT?e._e():t("div",{staticClass:"chat-bubble agent",class:e.$dm("bg-white","dark:bg-slate-700 has-dark-mode")},[t("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:e.formatMessage(e.message,!1),expression:"formatMessage(message, false)"}],staticClass:"message-content text-slate-900 dark:text-slate-50"}),e._v(" "),e.isTemplateEmail?t("email-input",{attrs:{"message-id":e.messageId,"message-content-attributes":e.messageContentAttributes}}):e._e(),e._v(" "),e.isIntegrations?t("integration-card",{attrs:{"message-id":e.messageId,"meeting-data":e.messageContentAttributes.data}}):e._e()],1),e._v(" "),e.isOptions?t("div",[t("chat-options",{attrs:{title:e.message,options:e.messageContentAttributes.items,"hide-fields":!!e.messageContentAttributes.submitted_values},on:{click:e.onOptionSelect}})],1):e._e(),e._v(" "),e.isForm&&!e.messageContentAttributes.submitted_values?t("chat-form",{attrs:{items:e.messageContentAttributes.items,"button-label":e.messageContentAttributes.button_label,"submitted-values":e.messageContentAttributes.submitted_values},on:{submit:e.onFormSubmit}}):e._e(),e._v(" "),e.isCards?t("div",e._l(e.messageContentAttributes.items,(function(e){return t("chat-card",{key:e.title,attrs:{"media-url":e.media_url,title:e.title,description:e.description,actions:e.actions}})})),1):e._e(),e._v(" "),e.isArticle?t("div",[t("chat-article",{attrs:{items:e.messageContentAttributes.items}})],1):e._e(),e._v(" "),e.isCSAT?t("customer-satisfaction",{attrs:{"message-content-attributes":e.messageContentAttributes.submitted_values,"message-id":e.messageId}}):e._e()],1)}),[],!1,null,null,null).exports,et=n(70),tt=n(165),nt=n(297);function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,s,i=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(c){o=!0,s=c}finally{try{a||null==n.return||n.return()}finally{if(o)throw s}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return st(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return st(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var it={name:"AgentMessage",components:{AgentMessageBubble:Qe,ImageBubble:G,Thumbnail:et.a,UserMessage:se,FileBubble:Y},mixins:[X.a,j.a,Z,S.a],props:{message:{type:Object,default:function(){}}},data:function(){return{hasImageError:!1}},computed:{shouldDisplayAgentMessage:function(){return!("input_select"===this.contentType&&this.messageContentAttributes.submitted_values&&!this.message.content)&&this.message.content},readableTime:function(){var e=this.message.created_at,t=void 0===e?"":e;return this.messageStamp(t,"LLL d yyyy, kk:mm")},messageType:function(){var e=this.message.message_type;return void 0===e?1:e},contentType:function(){var e=this.message.content_type;return void 0===e?"":e},agentName:function(){return this.message.sender?this.message.sender.available_name||this.message.sender.name:this.useInboxAvatarForBot?this.channelConfig.websiteName:this.$t("UNREAD_VIEW.BOT")},avatarUrl:function(){var e=n(3033),t=this.useInboxAvatarForBot?this.inboxAvatarUrl:e;return this.message.message_type===tt.b.TEMPLATE?t:this.message.sender?this.message.sender.avatar_url:t},hasRecordedResponse:function(){return this.messageContentAttributes.submitted_email||this.messageContentAttributes.submitted_values&&!["form","input_csat"].includes(this.contentType)},responseMessage:function(){if(this.messageContentAttributes.submitted_email)return{content:this.messageContentAttributes.submitted_email};if(this.messageContentAttributes.submitted_values&&"input_select"===this.contentType){var e=rt(this.messageContentAttributes.submitted_values,1)[0],t=void 0===e?{}:e;return{content:t.title||t.value}}return""},isASubmittedForm:function(){return Object(nt.b)(this.message)},submittedFormValues:function(){return this.messageContentAttributes.submitted_values.map((function(e){return{id:e.name,content:e.value}}))},wrapClass:function(){return{"has-text":this.shouldDisplayAgentMessage}}},watch:{message:function(){this.hasImageError=!1}},mounted:function(){this.hasImageError=!1},methods:{onImageLoadError:function(){this.hasImageError=!0}}},at={components:{AgentMessage:Object(C.a)(it,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"agent-message-wrap",class:{"has-response":e.hasRecordedResponse||e.isASubmittedForm}},[e.isASubmittedForm?e._e():t("div",{staticClass:"agent-message"},[t("div",{staticClass:"avatar-wrap"},[e.message.showAvatar||e.hasRecordedResponse?t("thumbnail",{attrs:{src:e.avatarUrl,size:"24px",username:e.agentName}}):e._e()],1),e._v(" "),t("div",{staticClass:"message-wrap"},[e.shouldDisplayAgentMessage?t("AgentMessageBubble",{attrs:{"content-type":e.contentType,"message-content-attributes":e.messageContentAttributes,"message-id":e.message.id,"message-type":e.messageType,message:e.message.content}}):e._e(),e._v(" "),e.hasAttachments?t("div",{staticClass:"chat-bubble has-attachment agent",class:(e.wrapClass,e.$dm("bg-white","dark:bg-slate-700"))},e._l(e.message.attachments,(function(n){return t("div",{key:n.id},["image"!==n.file_type||e.hasImageError?"audio"===n.file_type?t("audio",{attrs:{controls:""}},[t("source",{attrs:{src:n.data_url}})]):t("file-bubble",{attrs:{url:n.data_url}}):t("image-bubble",{attrs:{url:n.data_url,thumb:n.data_url,"readable-time":e.readableTime},on:{error:e.onImageLoadError}})],1)})),0):e._e(),e._v(" "),e.message.showAvatar||e.hasRecordedResponse?t("p",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:e.agentName,expression:"agentName"}],staticClass:"agent-name",class:e.$dm("text-slate-700","dark:text-slate-200")}):e._e()],1)]),e._v(" "),e.hasRecordedResponse?t("UserMessage",{attrs:{message:e.responseMessage}}):e._e(),e._v(" "),e.isASubmittedForm?t("div",e._l(e.submittedFormValues,(function(e){return t("UserMessage",{key:e.id,attrs:{message:e}})})),1):e._e()],1)}),[],!1,null,null,null).exports,UserMessage:se},props:{message:{type:Object,default:function(){}}},computed:{isUserMessage:function(){return this.message.message_type===tt.b.INCOMING}}},ot=(n(3255),n(3256),Object(C.a)(at,(function(){var e=this,t=e._self._c;return e.isUserMessage?t("UserMessage",{attrs:{message:e.message}}):t("AgentMessage",{attrs:{message:e.message}})}),[],!1,null,"b5e457ba",null).exports),ct={name:"AgentTypingBubble",mixins:[S.a]},ut=(n(3258),Object(C.a)(ct,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"agent-message-wrap"},[t("div",{staticClass:"agent-message"},[t("div",{staticClass:"avatar-wrap"}),e._v(" "),t("div",{staticClass:"message-wrap mt-2"},[t("div",{staticClass:"typing-bubble chat-bubble agent",class:e.$dm("bg-white","dark:bg-slate-50")},[t("img",{attrs:{src:n(3257),alt:"Agent is typing a message"}})])])])])}),[],!1,null,"49502ac0",null).exports),lt=n(212),dt={mixins:[S.a],props:{date:{type:String,required:!0}},computed:{formattedDate:function(){return Object(lt.a)({date:this.date,todayText:this.$t("TODAY"),yesterdayText:this.$t("YESTERDAY")})}}};n(3259);function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gt={name:"ConversationWrap",components:{ChatMessage:ot,AgentTypingBubble:ut,DateSeparator:Object(C.a)(dt,(function(){var e=this;return(0,e._self._c)("div",{staticClass:"date--separator",class:e.$dm("text-slate-700","dark:text-slate-200")},[e._v("\n  "+e._s(e.formattedDate)+"\n")])}),[],!1,null,"0619d2c7",null).exports,Spinner:u.a},mixins:[S.a],props:{groupedMessages:{type:Array,default:function(){return[]}}},data:function(){return{previousScrollHeight:0,previousConversationSize:0}},computed:pt(pt({},Object(r.mapGetters)({earliestMessage:"conversation/getEarliestMessage",lastMessage:"conversation/getLastMessage",allMessagesLoaded:"conversation/getAllMessagesLoaded",isFetchingList:"conversation/getIsFetchingList",conversationSize:"conversation/getConversationSize",isAgentTyping:"conversation/getIsAgentTyping",conversationAttributes:"conversationAttributes/getConversationParams"})),{},{colorSchemeClass:function(){return"".concat("dark"===this.darkMode?"dark-scheme":"light-scheme")},showStatusIndicator:function(){var e="pending"===this.conversationAttributes.status,t=this.lastMessage.message_type===d.k.INCOMING;return this.isAgentTyping||e&&t}}),watch:{allMessagesLoaded:function(){this.previousScrollHeight=0}},mounted:function(){this.$el.addEventListener("scroll",this.handleScroll),this.scrollToBottom()},updated:function(){this.previousConversationSize!==this.conversationSize&&(this.previousConversationSize=this.conversationSize,this.scrollToBottom())},unmounted:function(){this.$el.removeEventListener("scroll",this.handleScroll)},methods:pt(pt({},Object(r.mapActions)("conversation",["fetchOldConversations"])),{},{scrollToBottom:function(){var e=this.$el;e.scrollTop=e.scrollHeight-this.previousScrollHeight,this.previousScrollHeight=0},handleScroll:function(){this.isFetchingList||this.allMessagesLoaded||!this.conversationSize||this.$el.scrollTop<100&&(this.fetchOldConversations({before:this.earliestMessage.id}),this.previousScrollHeight=this.$el.scrollHeight)}})};n(3260);function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vt={components:{ChatFooter:N,ConversationWrap:Object(C.a)(gt,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"conversation--container",class:e.colorSchemeClass},[t("div",{staticClass:"conversation-wrap",class:{"is-typing":e.isAgentTyping}},[e.isFetchingList?t("div",{staticClass:"message--loader"},[t("spinner")],1):e._e(),e._v(" "),e._l(e.groupedMessages,(function(n){return t("div",{key:n.date,staticClass:"messages-wrap"},[t("date-separator",{attrs:{date:n.date}}),e._v(" "),e._l(n.messages,(function(e){return t("chat-message",{key:e.id,attrs:{message:e}})}))],2)})),e._v(" "),e.showStatusIndicator?t("agent-typing-bubble"):e._e()],2)])}),[],!1,null,"dd2501de",null).exports},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(r.mapGetters)({groupedMessages:"conversation/getGroupedConversation"})),mounted:function(){this.$store.dispatch("conversation/setUserLastSeen")}},yt=vt,Ot=Object(C.a)(yt,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-col flex-1 overflow-hidden rounded-b-lg bg-slate-25 dark:bg-slate-800"},[t("div",{staticClass:"flex flex-1 overflow-auto"},[t("conversation-wrap",{attrs:{"grouped-messages":e.groupedMessages}})],1),e._v(" "),t("div",{staticClass:"px-5"},[t("chat-footer")],1)])}),[],!1,null,null,null);t.default=Ot.exports},375:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));n(1963);var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=1024,r=t<0?0:t,s=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+s[i]},s=function(e,t){var n,r=(null===e||void 0===e||null===(n=e.file)||void 0===n?void 0:n.size)||(null===e||void 0===e?void 0:e.size);return r/1048576<=t}},397:function(e,t,n){"use strict";n(33),n(1958);var r=n(168),s={props:{placeholder:{type:String,default:""},value:{type:String,default:""},minHeight:{type:Number,default:2},signature:{type:String,default:""},sendWithSignature:{type:Boolean,default:!1},allowSignature:{type:Boolean,default:!1}},data:function(){return{idleTimer:null}},computed:{cleanedSignature:function(){return Object(r.b)(this.signature)}},watch:{value:function(){var e=this;this.resizeTextarea(),document.activeElement!==this.$refs.textarea&&this.$nextTick((function(){e.setCursor()}))},sendWithSignature:function(e){this.allowSignature&&this.toggleSignatureInEditor(e)}},mounted:function(){var e=this;this.$nextTick((function(){e.value?(e.resizeTextarea(),e.setCursor()):e.focus()}))},methods:{resizeTextarea:function(){this.value?this.$el.style.height="".concat(this.$el.scrollHeight,"px"):this.$el.style.height="".concat(this.minHeight,"rem")},toggleSignatureInEditor:function(e){var t=this,n=e?Object(r.a)(this.value,this.cleanedSignature):Object(r.c)(this.value,this.cleanedSignature);this.$emit("input",n),this.$nextTick((function(){t.resizeTextarea(),t.setCursor()}))},setCursor:function(){var e=Object(r.c)(this.value,this.cleanedSignature).trimEnd().length,t=this.$refs.textarea;t&&(t.focus(),t.setSelectionRange(e,e))},onInput:function(e){this.$emit("input",e.target.value),this.resizeTextarea()},resetTyping:function(){this.$emit("typing-off"),this.idleTimer=null},turnOffIdleTimer:function(){this.idleTimer&&clearTimeout(this.idleTimer)},onKeyup:function(){var e=this;this.idleTimer||this.$emit("typing-on"),this.turnOffIdleTimer(),this.idleTimer=setTimeout((function(){return e.resetTyping()}),4e3)},onBlur:function(){this.turnOffIdleTimer(),this.resetTyping(),this.$emit("blur")},onFocus:function(){this.$emit("focus")},focus:function(){this.$refs.textarea&&this.$refs.textarea.focus()}}},i=n(1),a=Object(i.a)(s,(function(){var e=this;return(0,e._self._c)("textarea",{ref:"textarea",attrs:{placeholder:e.placeholder},domProps:{value:e.value},on:{input:e.onInput,focus:e.onFocus,keyup:e.onKeyup,blur:e.onBlur}})}),[],!1,null,null,null);t.a=a.exports}}]);
//# sourceMappingURL=22-fdf8bcc456f58b464e85.chunk.js.map