{"version":3,"sources":["webpack:///./app/javascript/shared/helpers/markdownIt/link.js","webpack:///./app/javascript/shared/helpers/MessageFormatter.js","webpack:///./app/javascript/shared/mixins/messageFormatterMixin.js","webpack:///./app/javascript/shared/mixins/keyboardEventListenerMixins.js","webpack:///./app/javascript/superadmin_pages/views/playground/Index.vue?ef64","webpack:///./app/javascript/superadmin_pages/components/playground/Header.vue?6265","webpack:///./app/javascript/superadmin_pages/components/playground/Header.vue","webpack:///./app/javascript/superadmin_pages/components/playground/Header.vue?2bd1","webpack:///./app/javascript/superadmin_pages/components/playground/UserMessage.vue?cdd0","webpack:///./app/javascript/superadmin_pages/components/playground/UserMessage.vue","webpack:///./app/javascript/superadmin_pages/components/playground/UserMessage.vue?8dec","webpack:///./app/javascript/superadmin_pages/components/playground/BotMessage.vue?8cbb","webpack:///./app/javascript/superadmin_pages/components/playground/BotMessage.vue","webpack:///./app/javascript/superadmin_pages/components/playground/BotMessage.vue?cc36","webpack:///./app/javascript/superadmin_pages/components/playground/TypingIndicator.vue?b0d5","webpack:///app/javascript/superadmin_pages/views/playground/Index.vue","webpack:///./app/javascript/superadmin_pages/components/playground/TypingIndicator.vue","webpack:///./app/javascript/superadmin_pages/components/playground/TypingIndicator.vue?6432","webpack:///./app/javascript/superadmin_pages/views/playground/Index.vue?18c9","webpack:///./app/javascript/superadmin_pages/views/playground/Index.vue","webpack:///./app/javascript/shared/helpers/KeyboardHelpers.js","webpack:///./app/javascript/superadmin_pages/components/playground/assets/typing.gif"],"names":["USER_MENTIONS_REGEX","processInlineToken","blockToken","children","forEach","inlineToken","type","imgSrc","attrGet","height","URL","searchParams","get","attrSet","setImageHeight","md","require","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","maxNesting","use","renderer","rules","mention","tokens","idx","content","inline","ruler","before","state","silent","label","labelEnd","labelStart","pos","res","token","href","max","posMax","src","charCodeAt","helpers","parseLinkLabel","slice","parseLinkDestination","ok","normalizeLink","str","validateLink","match","RegExp","push","core","after","mila","attrs","class","rel","target","TWITTER_USERNAME_REGEX","TWITTER_HASH_REGEX","MessageFormatter","message","isATweet","isAPrivateNote","this","updatedMessage","replace","render","formatMessage","DOMParser","parseFromString","formattedMessage","body","textContent","methods","getPlainText","plainText","truncateMessage","description","length","highlightContent","searchTerm","highlightClass","plainTextContent","escapedSearchTerm","taggedHandlers","mounted","events","getKeyboardEvents","wrappedEvents","wrapEventsInKeybindingsHandler","keydownHandler","createKeybindingsHandler","addEventHandler","beforeDestroy","$el","dataset","keydownHandlerIndex","handlerToRemove","document","removeEventListener","indexToAppend","root","addEventListener","Object","keys","eventName","keydownWrapper","handler","e","actionToPerform","action","allowOnFocusedInput","isActiveElementTypeable","isEscape","blur","_vm","_c","_self","_setupProxy","staticClass","responseSourcePath","_v","_s","responseSourceName","directives","name","rawName","value","expression","TypingIndicator","componentData","ref","_l","key","id","_e","domProps","on","$event","composing","messageContent","isEnter","hasPressedCommand","metaKey","hasPressedEnterAndNotCmdOrShift","shiftKey","hasPressedShift","hasPressedCommandAndEnter","activeElement","tagName","contentEditable","className","includes","module","exports"],"mappings":"yLACMA,G,OAAsB,0C,oQCE5B,IASMC,EAAqB,SAAAC,GACzBA,EAAWC,SAASC,SAAQ,SAAAC,GACD,UAArBA,EAAYC,MAXG,SAAAD,GACrB,IAAME,EAASF,EAAYG,QAAQ,OACnC,GAAKD,EAAL,CACA,IACME,EADM,IAAIC,IAAIH,GACDI,aAAaC,IAAI,mBAC/BH,GACLJ,EAAYQ,QAAQ,QAApB,kBAAwCJ,EAAxC,OAMIK,CAAeT,OAiBfU,EAAKC,EAAQ,KAARA,CAAuB,CAChCC,MAAM,EACNC,UAAU,EACVC,QAAQ,EACRC,WAAY,YACZC,SAAS,EACTC,aAAa,EACbC,OAAQ,2BACRC,WAAY,KAEXC,KDuBY,SAAuBV,GACpCA,EAAGW,SAASC,MAAMC,QALS,SAACC,EAAQC,GACpC,MAAM,0CAAN,OAAiDD,EAAOC,GAAKC,QAA7D,YAKAhB,EAAGiB,OAAOC,MAAMC,OAAO,OAAQ,WAhEA,SAACC,EAAOC,GACvC,IAAIC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAAO,GACPC,EAAMT,EAAMU,OAEhB,OAAwC,KAApCV,EAAMW,IAAIC,WAAWZ,EAAMK,OAI/BD,EAAaJ,EAAMK,IAAM,KACzBF,EAAWH,EAAMpB,GAAGiC,QAAQC,eAAed,EAAOA,EAAMK,KAAK,IAG9C,KAIfH,EAAQF,EAAMW,IAAII,MAAMX,EAAYD,IACpCE,EAAMF,EAAW,GAEPM,GAAqC,KAA9BT,EAAMW,IAAIC,WAAWP,KACpCA,GAAO,GACPC,EAAMN,EAAMpB,GAAGiC,QAAQG,qBAAqBhB,EAAMW,IAAKN,EAAKL,EAAMU,SAC1DO,KACNT,EAAOR,EAAMpB,GAAGsC,cAAcZ,EAAIa,KAC9BnB,EAAMpB,GAAGwC,aAAaZ,GACxBH,EAAMC,EAAID,IAEVG,EAAO,IAGXH,GAAO,KAGJG,EAAKa,MAAM,IAAIC,OAAOzD,MAItBoC,IACHD,EAAMK,IAAMD,EACZJ,EAAMU,OAASP,GAEfI,EAAQP,EAAMuB,KAAK,UAAW,KACxBf,KAAOA,EACbD,EAAMX,QAAUM,GAGlBF,EAAMK,IAAMA,EACZL,EAAMU,OAASD,GAER,WCfNnB,KAvBsB,SAAAV,GAGvBA,EAAG4C,KAAK1B,MAAM2B,MAAM,SAAU,oBAAoB,SAAAzB,GAChDA,EAAMN,OAAOzB,SAAQ,SAAAF,GACK,WAApBA,EAAWI,MACbL,EAAmBC,YAkBxBuB,IAAIoC,IAAM,CACTC,MAAO,CACLC,MAAO,OACPC,IAAK,+BACLC,OAAQ,YAIRC,EAAyB,2BAEzBC,EAAqB,gBAGrBC,E,WACJ,WAAYC,GAAoD,IAA3CC,EAA0C,wDAAxBC,EAAwB,kEAC7DC,KAAKH,QAAUA,GAAW,GAC1BG,KAAKD,eAAiBA,EACtBC,KAAKF,SAAWA,E,oDAGlB,WACE,IAAIG,EAAiBD,KAAKH,QAW1B,OAVIG,KAAKF,WAAaE,KAAKD,iBAKzBE,GAJAA,EAAiBA,EAAeC,QAC9BR,EAf6B,mCAkBCQ,QAC9BP,EAjByB,4CAqBtBpD,EAAG4D,OAAOF,K,4BAGnB,WACE,OAAOD,KAAKI,kB,qBAGd,WAKE,OAJwB,IAAIC,WAAYC,gBACtCN,KAAKO,iBACL,aAEqBC,KAAKC,aAAe,Q,gCAIhCb,IC1FA,KACbc,QAAS,CACPN,cADO,SACOP,EAASC,EAAUC,GAM/B,OALyB,IAAIH,EAC3BC,EACAC,EACAC,GAEsBQ,kBAE1BI,aATO,SASMd,EAASC,GAEpB,OADyB,IAAIF,EAAiBC,EAASC,GAC/Bc,WAE1BC,gBAbO,WAa4B,IAAnBC,EAAkB,uDAAJ,GAC5B,OAAIA,EAAYC,OAAS,IAChBD,EAGH,GAAN,OAAUA,EAAYpC,MAAM,EAAG,IAA/B,QAGFsC,iBArBO,WAqB+D,IAArDzD,EAAoD,uDAA1C,GAAI0D,EAAsC,uDAAzB,GAAIC,EAAqB,uDAAJ,GACzDC,EAAmBnB,KAAKW,aAAapD,GAGrC6D,EAAoBH,EAAWf,QACnC,sBACA,QAGF,OAAOiB,EAAiBjB,QACtB,IAAIjB,OAAJ,WAAemC,EAAf,KAAqC,MADhC,uBAEWF,EAFX,oB,mEC5BPG,EAAiB,GAER,KACbC,QADa,WAEX,IAAMC,EAASvB,KAAKwB,oBACpB,GAAID,EAAQ,CACV,IAAME,EAAgBzB,KAAK0B,+BAA+BH,GACpDI,EAAiBC,YAAyBH,GAChDzB,KAAK6B,gBAAgBF,KAGzBG,cATa,WASI,IAAD,EACd,GAAI9B,KAAK+B,KAAL,UAAY/B,KAAK+B,IAAIC,eAArB,OAAY,EAAkBC,oBAAqB,CACrD,IAAMC,EACJb,EAAerB,KAAK+B,IAAIC,QAAQC,qBAClCE,SAASC,oBAAoB,UAAWF,KAG5CxB,QAAS,CACPmB,gBADO,SACSF,GACd,IAAMU,EAAgBhB,EAAenC,KAAKyC,GAAkB,EACtDW,EAAOtC,KAAK+B,IACdO,GAAQA,EAAKN,UAGfG,SAASI,iBAAiB,UAAWZ,GACrCW,EAAKN,QAAQC,oBAAsBI,IAGvCb,kBAXO,WAYL,OAAO,MAETE,+BAdO,SAcwBH,GAAS,IAAD,OAC/BE,EAAgB,GAKtB,OAJAe,OAAOC,KAAKlB,GAAQ3F,SAAQ,SAAA8G,GAC1BjB,EAAciB,GAAa,EAAKC,eAAepB,EAAOmB,OAGjDjB,GAETkB,eAtBO,SAsBQC,GACb,OAAO,SAAAC,GACL,IAAMC,EACe,oBAAZF,EAAyBA,EAAUA,EAAQG,OAC9CC,EACe,oBAAZJ,GAAiCA,EAAQI,oBAE/BC,YAAwBJ,KAGrCK,YAASL,IACXA,EAAEpD,OAAO0D,QAGNH,IAGPF,EAAgBD,Q,iEC9DxB,I,mBCA6N,E,+JCkB9M,EAXC,YACd,GCRW,WAAkB,IAAIO,EAAIpD,KAAKqD,EAAGD,EAAIE,MAAMD,GAAUD,EAAIE,MAAMC,YAAY,OAAOF,EAAG,SAAS,CAACG,YAAY,iEAAiElE,MAAM,CAAC,KAAO,WAAW,CAAC+D,EAAG,IAAI,CAACG,YAAY,qCAAqClE,MAAM,CAAC,KAAO8D,EAAIK,qBAAqB,CAACL,EAAIM,GAAG,oBAAoBN,EAAIM,GAAG,KAAKL,EAAG,MAAM,CAACG,YAAY,6EAA6E,CAACH,EAAG,MAAM,CAAC/D,MAAM,CAAC,MAAQ,KAAK,OAAS,OAAO,CAAC+D,EAAG,MAAM,CAAC/D,MAAM,CAAC,aAAa,yBAAyB8D,EAAIM,GAAG,KAAKL,EAAG,MAAM,CAACG,YAAY,qCAAqC,CAACH,EAAG,KAAK,CAACG,YAAY,uCAAuClE,MAAM,CAAC,GAAK,eAAe,CAAC8D,EAAIM,GAAG,uCAAuCN,EAAIM,GAAG,KAAKL,EAAG,IAAI,CAACG,YAAY,0BAA0B,CAACJ,EAAIM,GAAG,wCAAwCL,EAAG,OAAO,CAACG,YAAY,eAAe,CAACJ,EAAIM,GAAG,aAAaN,EAAIO,GAAGP,EAAIQ,oBAAoB,cAAcR,EAAIM,GAAG,4DAEv7B,IDSpB,EACA,KACA,KACA,M,QEdgO,E,qGCkBnN,EAXC,YACd,GCRW,WAAkB,IAAIN,EAAIpD,KAAKqD,EAAGD,EAAIE,MAAMD,GAAUD,EAAIE,MAAMC,YAAY,OAAOF,EAAG,MAAM,CAACG,YAAY,6CAA6C,CAACH,EAAG,MAAM,CAACQ,WAAW,CAAC,CAACC,KAAK,iBAAiBC,QAAQ,mBAAmBC,MAAOZ,EAAW,QAAEa,WAAW,YAAYT,YAAY,yEAE7Q,IDSpB,EACA,KACA,KACA,M,QEd+N,E,oGCkBlN,EAXC,YACd,GCRW,WAAkB,IAAIJ,EAAIpD,KAAKqD,EAAGD,EAAIE,MAAMD,GAAUD,EAAIE,MAAMC,YAAY,OAAOF,EAAG,MAAM,CAACG,YAAY,+CAA+C,CAACH,EAAG,MAAM,CAACQ,WAAW,CAAC,CAACC,KAAK,iBAAiBC,QAAQ,mBAAmBC,MAAOZ,EAAW,QAAEa,WAAW,YAAYT,YAAY,sHAE/Q,IDSpB,EACA,KACA,KACA,M,2BEdoO,E,4MC0CtO,OACA,YACA,mBACA,cACA,aACA,gBCxCgB,YACd,GCRW,WAAkB,IAAaH,EAALrD,KAAYsD,MAAMD,GAAgC,OAAOA,EAAG,MAAM,CAACG,YAAY,+CAA+C,CAACH,EAAG,MAAM,CAACG,YAAY,iHAAiH,CAACH,EAAG,MAAM,CAACG,YAAY,MAAMlE,MAAM,CAAC,IAA1SU,KAAgCsD,MAAMC,YAAiRW,gBAAgB,IAAM,2BAE9V,IDSpB,EACA,KACA,KACA,M,SDmCF,iBACA,OACA,eACA,YACA,+BAGA,KAdA,WAeA,oDAEA,UACA,iBADA,WAEA,6CACA,YACA,wBAIA,QAzBA,WA0BA,mBAEA,SACA,kBADA,WACA,WACA,OACA,cACA,kBACA,mBAEA,0BAIA,WAXA,WAYA,iCAEA,cAdA,WAeA,kDACA,+CAEA,oBAlBA,WAkBA,WACA,2BACA,yCACA,8CACA,wCAGA,iBAzBA,SAyBA,KACA,+DACA,4BAEA,oBA7BA,SA6BA,O,EAAA,c,EAAA,yIACA,oBACA,eACA,WACA,yCACA,wBALA,kBAQC,MAAD,sBACA,cACA,SACA,kCACA,kBAEA,qBACA,UACA,uCAEA,wBAlBA,WAQA,EARA,QAqBA,GArBA,sBAsBC,IAAD,+CAtBA,wBAyBC,EAAD,OAzBA,iBAyBA,EAzBA,EAyBA,QACA,4BA1BA,kDA4BA,mBACA,MACA,kFA9BA,yBAiCA,eACA,eAlCA,4E,oLGnGiN,ICO7M,EAAY,YACd,GfRW,WAAkB,IAAId,EAAIpD,KAAKqD,EAAGD,EAAIE,MAAMD,GAAG,OAAOA,EAAG,UAAU,CAACG,YAAY,2CAA2C,CAACH,EAAG,mBAAmB,CAAC/D,MAAM,CAAC,uBAAuB8D,EAAIe,cAAcP,mBAAmB,uBAAuBR,EAAIe,cAAcV,sBAAsBL,EAAIM,GAAG,KAAKL,EAAG,MAAM,CAACe,IAAI,gBAAgBZ,YAAY,kCAAkC,CAACJ,EAAIiB,GAAIjB,EAAY,UAAE,SAASvD,GAAS,OAAOwD,EAAG,MAAM,CAACiB,IAAIzE,EAAQ0E,GAAGjF,MAAM,CAAC,GAAK,WAAWO,EAAQ0E,OAAO,CAAmB,SAAjB1E,EAAQ/D,KAAiBuH,EAAG,cAAc,CAAC/D,MAAM,CAAC,QAAU8D,EAAIhD,cAAcP,EAAQtC,YAAY8F,EAAG,aAAa,CAAC/D,MAAM,CAAC,QAAU8D,EAAIhD,cAAcP,EAAQtC,aAAa,MAAK6F,EAAIM,GAAG,KAAMN,EAAa,UAAEC,EAAG,mBAAmBD,EAAIoB,MAAM,GAAGpB,EAAIM,GAAG,KAAKL,EAAG,MAAM,CAACG,YAAY,oBAAoB,CAACH,EAAG,WAAW,CAACQ,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOZ,EAAkB,eAAEa,WAAW,mBAAmBG,IAAI,eAAeZ,YAAY,8RAA8RlE,MAAM,CAAC,KAAO,EAAE,YAAc,+CAA+C,UAAY,GAAG,aAAe,OAAOmF,SAAS,CAAC,MAASrB,EAAkB,gBAAGsB,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOlF,OAAOmF,YAAiBxB,EAAIyB,eAAeF,EAAOlF,OAAOuE,cAAa,KAEn7C,IeSpB,EACA,KACA,KACA,MAIa,Y,qOClBFc,EAAU,SAAAjC,GACrB,MAAiB,UAAVA,EAAEyB,KAGEpB,EAAW,SAAAL,GACtB,MAAiB,WAAVA,EAAEyB,KAOES,EAAoB,SAAAlC,GAC/B,OAAOA,EAAEmC,SAGEC,EAAkC,SAAApC,GAC7C,OAAOiC,EAAQjC,KAAOkC,EAAkBlC,KATX,SAAAA,GAC7B,OAAOA,EAAEqC,SAQsCC,CAAgBtC,IAGpDuC,EAA4B,SAAAvC,GACvC,OAAOkC,EAAkBlC,IAAMiC,EAAQjC,IAgB5BI,EAA0B,SAAAJ,GAAM,IAAD,EAGpCwC,EAAgBxC,EAAEpD,QAAU0C,SAASkD,cAE3C,SAC6B,WAAd,OAAbA,QAAa,IAAbA,OAAA,EAAAA,EAAeC,UACY,gBAAd,OAAbD,QAAa,IAAbA,OAAA,EAAAA,EAAeC,UACY,cAAd,OAAbD,QAAa,IAAbA,OAAA,EAAAA,EAAeC,UACoB,UAAtB,OAAbD,QAAa,IAAbA,OAAA,EAAAA,EAAeE,kBAHf,OAIAF,QAJA,IAIAA,GAJA,UAIAA,EAAeG,iBAJf,OAIA,EAA0BC,SAAS,kB,qBC/CvCC,EAAOC,QAAU,IAA0B","file":"js/76-ee37f54b4e86e5b3a155.chunk.js","sourcesContent":["// Process [@mention](mention://user/1/Pranav)\nconst USER_MENTIONS_REGEX = /mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm;\n\nconst buildMentionTokens = () => (state, silent) => {\n  var label;\n  var labelEnd;\n  var labelStart;\n  var pos;\n  var res;\n  var token;\n  var href = '';\n  var max = state.posMax;\n\n  if (state.src.charCodeAt(state.pos) !== 0x5b /* [ */) {\n    return false;\n  }\n\n  labelStart = state.pos + 1;\n  labelEnd = state.md.helpers.parseLinkLabel(state, state.pos, true);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) {\n    return false;\n  }\n\n  label = state.src.slice(labelStart, labelEnd);\n  pos = labelEnd + 1;\n\n  if (pos < max && state.src.charCodeAt(pos) === 0x28 /* ( */) {\n    pos += 1;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n    }\n    pos += 1;\n  }\n\n  if (!href.match(new RegExp(USER_MENTIONS_REGEX))) {\n    return false;\n  }\n\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    token = state.push('mention', '');\n    token.href = href;\n    token.content = label;\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n\n  return true;\n};\n\nconst renderMentions = () => (tokens, idx) => {\n  return `<span class=\"prosemirror-mention-node\">${tokens[idx].content}</span>`;\n};\n\nexport default function mentionPlugin(md) {\n  md.renderer.rules.mention = renderMentions(md);\n  md.inline.ruler.before('link', 'mention', buildMentionTokens(md));\n}\n","import mila from 'markdown-it-link-attributes';\nimport mentionPlugin from './markdownIt/link';\n\nconst setImageHeight = inlineToken => {\n  const imgSrc = inlineToken.attrGet('src');\n  if (!imgSrc) return;\n  const url = new URL(imgSrc);\n  const height = url.searchParams.get('cw_image_height');\n  if (!height) return;\n  inlineToken.attrSet('style', `height: ${height};`);\n};\n\nconst processInlineToken = blockToken => {\n  blockToken.children.forEach(inlineToken => {\n    if (inlineToken.type === 'image') {\n      setImageHeight(inlineToken);\n    }\n  });\n};\n\nconst imgResizeManager = md => {\n  // Custom rule for image resize in markdown\n  // If the image url has a query param cw_image_height, then add a style attribute to the image\n  md.core.ruler.after('inline', 'add-image-height', state => {\n    state.tokens.forEach(blockToken => {\n      if (blockToken.type === 'inline') {\n        processInlineToken(blockToken);\n      }\n    });\n  });\n};\n\nconst md = require('markdown-it')({\n  html: false,\n  xhtmlOut: true,\n  breaks: true,\n  langPrefix: 'language-',\n  linkify: true,\n  typographer: true,\n  quotes: '\\u201c\\u201d\\u2018\\u2019',\n  maxNesting: 20,\n})\n  .use(mentionPlugin)\n  .use(imgResizeManager)\n  .use(mila, {\n    attrs: {\n      class: 'link',\n      rel: 'noreferrer noopener nofollow',\n      target: '_blank',\n    },\n  });\n\nconst TWITTER_USERNAME_REGEX = /(^|[^@\\w])@(\\w{1,15})\\b/g;\nconst TWITTER_USERNAME_REPLACEMENT = '$1[@$2](http://twitter.com/$2)';\nconst TWITTER_HASH_REGEX = /(^|\\s)#(\\w+)/g;\nconst TWITTER_HASH_REPLACEMENT = '$1[#$2](https://twitter.com/hashtag/$2)';\n\nclass MessageFormatter {\n  constructor(message, isATweet = false, isAPrivateNote = false) {\n    this.message = message || '';\n    this.isAPrivateNote = isAPrivateNote;\n    this.isATweet = isATweet;\n  }\n\n  formatMessage() {\n    let updatedMessage = this.message;\n    if (this.isATweet && !this.isAPrivateNote) {\n      updatedMessage = updatedMessage.replace(\n        TWITTER_USERNAME_REGEX,\n        TWITTER_USERNAME_REPLACEMENT\n      );\n      updatedMessage = updatedMessage.replace(\n        TWITTER_HASH_REGEX,\n        TWITTER_HASH_REPLACEMENT\n      );\n    }\n    return md.render(updatedMessage);\n  }\n\n  get formattedMessage() {\n    return this.formatMessage();\n  }\n\n  get plainText() {\n    const strippedOutHtml = new DOMParser().parseFromString(\n      this.formattedMessage,\n      'text/html'\n    );\n    return strippedOutHtml.body.textContent || '';\n  }\n}\n\nexport default MessageFormatter;\n","import MessageFormatter from '../helpers/MessageFormatter';\n\nexport default {\n  methods: {\n    formatMessage(message, isATweet, isAPrivateNote) {\n      const messageFormatter = new MessageFormatter(\n        message,\n        isATweet,\n        isAPrivateNote\n      );\n      return messageFormatter.formattedMessage;\n    },\n    getPlainText(message, isATweet) {\n      const messageFormatter = new MessageFormatter(message, isATweet);\n      return messageFormatter.plainText;\n    },\n    truncateMessage(description = '') {\n      if (description.length < 100) {\n        return description;\n      }\n\n      return `${description.slice(0, 97)}...`;\n    },\n\n    highlightContent(content = '', searchTerm = '', highlightClass = '') {\n      const plainTextContent = this.getPlainText(content);\n\n      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#escaping\n      const escapedSearchTerm = searchTerm.replace(\n        /[.*+?^${}()|[\\]\\\\]/g,\n        '\\\\$&'\n      );\n\n      return plainTextContent.replace(\n        new RegExp(`(${escapedSearchTerm})`, 'ig'),\n        `<span class=\"${highlightClass}\">$1</span>`\n      );\n    },\n  },\n};\n","import { isActiveElementTypeable, isEscape } from '../helpers/KeyboardHelpers';\n\nimport { createKeybindingsHandler } from 'tinykeys';\n\n// this is a store that stores the handler globally, and only gets reset on reload\nconst taggedHandlers = [];\n\nexport default {\n  mounted() {\n    const events = this.getKeyboardEvents();\n    if (events) {\n      const wrappedEvents = this.wrapEventsInKeybindingsHandler(events);\n      const keydownHandler = createKeybindingsHandler(wrappedEvents);\n      this.addEventHandler(keydownHandler);\n    }\n  },\n  beforeDestroy() {\n    if (this.$el && this.$el.dataset?.keydownHandlerIndex) {\n      const handlerToRemove =\n        taggedHandlers[this.$el.dataset.keydownHandlerIndex];\n      document.removeEventListener('keydown', handlerToRemove);\n    }\n  },\n  methods: {\n    addEventHandler(keydownHandler) {\n      const indexToAppend = taggedHandlers.push(keydownHandler) - 1;\n      const root = this.$el;\n      if (root && root.dataset) {\n        // For the components with a top level v-if Vue renders it as an empty comment in the DOM\n        // so we need to check if the root element has a dataset property to ensure it is a valid element\n        document.addEventListener('keydown', keydownHandler);\n        root.dataset.keydownHandlerIndex = indexToAppend;\n      }\n    },\n    getKeyboardEvents() {\n      return null;\n    },\n    wrapEventsInKeybindingsHandler(events) {\n      const wrappedEvents = {};\n      Object.keys(events).forEach(eventName => {\n        wrappedEvents[eventName] = this.keydownWrapper(events[eventName]);\n      });\n\n      return wrappedEvents;\n    },\n    keydownWrapper(handler) {\n      return e => {\n        const actionToPerform =\n          typeof handler === 'function' ? handler : handler.action;\n        const allowOnFocusedInput =\n          typeof handler === 'function' ? false : handler.allowOnFocusedInput;\n\n        const isTypeable = isActiveElementTypeable(e);\n\n        if (isTypeable) {\n          if (isEscape(e)) {\n            e.target.blur();\n          }\n\n          if (!allowOnFocusedInput) return;\n        }\n\n        actionToPerform(e);\n      };\n    },\n  },\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"h-full w-full flex flex-col bg-slate-25\"},[_c('PlaygroundHeader',{attrs:{\"response-source-name\":_vm.componentData.responseSourceName,\"response-source-path\":_vm.componentData.responseSourcePath}}),_vm._v(\" \"),_c('div',{ref:\"chatContainer\",staticClass:\"flex-1 overflow-auto px-8 py-4\"},[_vm._l((_vm.messages),function(message){return _c('div',{key:message.id,attrs:{\"id\":`message-${message.id}`}},[(message.type === 'User')?_c('UserMessage',{attrs:{\"message\":_vm.formatMessage(message.content)}}):_c('BotMessage',{attrs:{\"message\":_vm.formatMessage(message.content)}})],1)}),_vm._v(\" \"),(_vm.isWaiting)?_c('TypingIndicator'):_vm._e()],2),_vm._v(\" \"),_c('div',{staticClass:\"w-full px-8 py-6\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.messageContent),expression:\"messageContent\"}],ref:\"messageInput\",staticClass:\"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border !outline-2 border-slate-100 focus:ring-woot-500 focus:border-woot-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-woot-500 dark:focus:border-woot-500\",attrs:{\"rows\":4,\"placeholder\":\"Type a message... [CMD/CTRL + Enter to send]\",\"autofocus\":\"\",\"autocomplete\":\"off\"},domProps:{\"value\":(_vm.messageContent)},on:{\"input\":function($event){if($event.target.composing)return;_vm.messageContent=$event.target.value}}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./Header.vue?vue&type=template&id=0fa12268&\"\nimport script from \"./Header.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./Header.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('header',{staticClass:\"flex items-center px-8 py-4 bg-white border-b border-slate-100\",attrs:{\"role\":\"banner\"}},[_c('a',{staticClass:\"text-woot-500 hover:underline mr-4\",attrs:{\"href\":_vm.responseSourcePath}},[_vm._v(\"\\n    Back\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"border border-solid border-slate-100 text-slate-700 mr-4 p-2 rounded-full\"},[_c('svg',{attrs:{\"width\":\"24\",\"height\":\"24\"}},[_c('use',{attrs:{\"xlink:href\":\"#icon-mist-fill\"}})])]),_vm._v(\" \"),_c('div',{staticClass:\"flex flex-col h-14 justify-center\"},[_c('h1',{staticClass:\"text-base font-medium text-slate-900\",attrs:{\"id\":\"page-title\"}},[_vm._v(\"\\n      Robin AI playground\\n    \")]),_vm._v(\" \"),_c('p',{staticClass:\"text-sm text-slate-600\"},[_vm._v(\"\\n      Chat with the source\\n      \"),_c('span',{staticClass:\"font-medium\"},[_vm._v(\"\\n        \"+_vm._s(_vm.responseSourceName)+\"\\n      \")]),_vm._v(\"\\n      and evaluate itâ€™s efficiency.\\n    \")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMessage.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserMessage.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./UserMessage.vue?vue&type=template&id=8cd00670&\"\nimport script from \"./UserMessage.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./UserMessage.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-end\"},[_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.message),expression:\"message\"}],staticClass:\"px-4 py-3 bg-woot-400 text-white text-sm rounded-md inline-block\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotMessage.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BotMessage.vue?vue&type=script&setup=true&lang=js&\"","import { render, staticRenderFns } from \"./BotMessage.vue?vue&type=template&id=92255130&\"\nimport script from \"./BotMessage.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./BotMessage.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-start\"},[_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.message),expression:\"message\"}],staticClass:\"px-4 py-3 bg-white max-w-4xl text-slate-700 leading-6 text-sm rounded-md inline-block border border-slate-100\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"","<template>\n  <section class=\"h-full w-full flex flex-col bg-slate-25\">\n    <PlaygroundHeader\n      :response-source-name=\"componentData.responseSourceName\"\n      :response-source-path=\"componentData.responseSourcePath\"\n    />\n    <div ref=\"chatContainer\" class=\"flex-1 overflow-auto px-8 py-4\">\n      <div\n        v-for=\"message in messages\"\n        :id=\"`message-${message.id}`\"\n        :key=\"message.id\"\n      >\n        <UserMessage\n          v-if=\"message.type === 'User'\"\n          :message=\"formatMessage(message.content)\"\n        />\n        <BotMessage v-else :message=\"formatMessage(message.content)\" />\n      </div>\n      <TypingIndicator v-if=\"isWaiting\" />\n    </div>\n    <div class=\"w-full px-8 py-6\">\n      <textarea\n        ref=\"messageInput\"\n        v-model=\"messageContent\"\n        :rows=\"4\"\n        class=\"resize-none block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border !outline-2 border-slate-100 focus:ring-woot-500 focus:border-woot-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-woot-500 dark:focus:border-woot-500\"\n        placeholder=\"Type a message... [CMD/CTRL + Enter to send]\"\n        autofocus\n        autocomplete=\"off\"\n      />\n    </div>\n  </section>\n</template>\n\n<script>\nimport messageFormatterMixin from 'shared/mixins/messageFormatterMixin';\nimport keyboardEventListenerMixins from 'shared/mixins/keyboardEventListenerMixins';\nimport Header from '../../components/playground/Header.vue';\nimport UserMessage from '../../components/playground/UserMessage.vue';\nimport BotMessage from '../../components/playground/BotMessage.vue';\nimport TypingIndicator from '../../components/playground/TypingIndicator.vue';\n\nexport default {\n  components: {\n    PlaygroundHeader: Header,\n    UserMessage,\n    BotMessage,\n    TypingIndicator,\n  },\n  mixins: [messageFormatterMixin, keyboardEventListenerMixins],\n  props: {\n    componentData: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n  data() {\n    return { messages: [], messageContent: '', isWaiting: false };\n  },\n  computed: {\n    previousMessages() {\n      return this.messages.map(message => ({\n        type: message.type,\n        message: message.content,\n      }));\n    },\n  },\n  mounted() {\n    this.focusInput();\n  },\n  methods: {\n    getKeyboardEvents() {\n      return {\n        '$mod+Enter': {\n          action: () => {\n            this.onMessageSend();\n          },\n          allowOnFocusedInput: true,\n        },\n      };\n    },\n    focusInput() {\n      this.$refs.messageInput.focus();\n    },\n    onMessageSend() {\n      this.addMessageToData('User', this.messageContent);\n      this.sendMessageToServer(this.messageContent);\n    },\n    scrollToLastMessage() {\n      this.$nextTick(() => {\n        const messageId = this.messages[this.messages.length - 1].id;\n        const messageElement = document.getElementById(`message-${messageId}`);\n        messageElement.scrollIntoView({ behavior: 'smooth' });\n      });\n    },\n    addMessageToData(type, content) {\n      this.messages.push({ id: this.messages.length, type, content });\n      this.scrollToLastMessage();\n    },\n    async sendMessageToServer(messageContent) {\n      this.messageContent = '';\n      this.isWaiting = true;\n      const csrfToken = document\n        .querySelector('meta[name=\"csrf-token\"]')\n        .getAttribute('content');\n\n      try {\n        const response = await fetch(window.location.href, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'X-CSRF-Token': csrfToken,\n          },\n          body: JSON.stringify({\n            message: messageContent,\n            previous_messages: this.previousMessages,\n          }),\n          credentials: 'include',\n        });\n\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const { message } = await response.json();\n        this.addMessageToData('Bot', message);\n      } catch (error) {\n        this.addMessageToData(\n          'bot',\n          'Error: Could not retrieve response. Please check the console for more details.'\n        );\n      } finally {\n        this.isWaiting = false;\n        this.focusInput();\n      }\n    },\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./TypingIndicator.vue?vue&type=template&id=278d0699&\"\nimport script from \"./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"\nexport * from \"./TypingIndicator.vue?vue&type=script&setup=true&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"w-full mb-4 flex items-center justify-start\"},[_c('div',{staticClass:\"px-2 py-2 bg-white max-w-4xl text-slate-700 leading-6 text-sm rounded-md inline-block border border-slate-100\"},[_c('img',{staticClass:\"h-4\",attrs:{\"src\":_setup.TypingIndicator,\"alt\":\"TypingIndicator\"}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=8aac9116&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export const isEnter = e => {\n  return e.key === 'Enter';\n};\n\nexport const isEscape = e => {\n  return e.key === 'Escape';\n};\n\nexport const hasPressedShift = e => {\n  return e.shiftKey;\n};\n\nexport const hasPressedCommand = e => {\n  return e.metaKey;\n};\n\nexport const hasPressedEnterAndNotCmdOrShift = e => {\n  return isEnter(e) && !hasPressedCommand(e) && !hasPressedShift(e);\n};\n\nexport const hasPressedCommandAndEnter = e => {\n  return hasPressedCommand(e) && isEnter(e);\n};\n\n/**\n * Determines whether the active element is typeable.\n *\n * @param {KeyboardEvent} e - The keyboard event object.\n * @returns {boolean} `true` if the active element is typeable, `false` otherwise.\n *\n * @example\n * document.addEventListener('keydown', e => {\n *   if (isActiveElementTypeable(e)) {\n *     handleTypeableElement(e);\n *   }\n * });\n */\nexport const isActiveElementTypeable = e => {\n  /** @type {HTMLElement | null} */\n  // @ts-ignore\n  const activeElement = e.target || document.activeElement;\n\n  return !!(\n    activeElement?.tagName === 'INPUT' ||\n    activeElement?.tagName === 'NINJA-KEYS' ||\n    activeElement?.tagName === 'TEXTAREA' ||\n    activeElement?.contentEditable === 'true' ||\n    activeElement?.className?.includes('ProseMirror')\n  );\n};\n","module.exports = __webpack_public_path__ + \"media/superadmin_pages/components/playground/assets/typing-929e3aeb589b7668d0b4ff57f73e17e3.gif\";"],"sourceRoot":""}