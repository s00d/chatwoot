{"version":3,"sources":["webpack:///./app/javascript/dashboard/components/widgets/AutomationActionInput.vue?ab4c","webpack:///./app/javascript/dashboard/components/widgets/AutomationActionTeamMessageInput.vue?ae91","webpack:///app/javascript/dashboard/components/widgets/AutomationActionTeamMessageInput.vue","webpack:///./app/javascript/dashboard/components/widgets/AutomationActionTeamMessageInput.vue","webpack:///./app/javascript/dashboard/components/widgets/AutomationActionTeamMessageInput.vue?daed","webpack:///app/javascript/dashboard/components/widgets/AutomationFileInput.vue","webpack:///./app/javascript/dashboard/components/widgets/AutomationFileInput.vue?db5d","webpack:///app/javascript/dashboard/components/widgets/AutomationActionInput.vue","webpack:///./app/javascript/dashboard/components/widgets/AutomationActionInput.vue?b8ec","webpack:///./app/javascript/dashboard/components/widgets/AutomationFileInput.vue","webpack:///./app/javascript/dashboard/components/widgets/AutomationFileInput.vue?afde","webpack:///./app/javascript/dashboard/components/widgets/AutomationActionInput.vue","webpack:///./app/javascript/dashboard/helper/automationHelper.js","webpack:///./app/javascript/dashboard/routes/dashboard/settings/automation/operators.js","webpack:///./app/javascript/dashboard/helper/actionQueryGenerator.js","webpack:///./app/javascript/dashboard/components/widgets/AutomationActionTeamMessageInput.vue?17a2","webpack:///./app/javascript/dashboard/components/widgets/AutomationFileInput.vue?1d88","webpack:///./app/javascript/dashboard/components/widgets/AutomationActionInput.vue?69e9"],"names":["_vm","this","_c","_self","staticClass","attrs","$t","teams","on","updateValue","model","value","callback","$$v","selectedTeams","expression","_v","directives","name","rawName","domProps","$event","target","composing","message","class","uploadState","onChangeFile","_e","_s","label","actionInputStyles","showActionInput","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","_value","action_name","multiple","resetAction","_l","attribute","key","inputType","dropdownValues","action_params","initialFileName","isMacro","removeAction","castMessageVmodel","v","$dirty","$error","MESSAGE_CONDITION_VALUES","id","PRIORITY_CONDITION_VALUES","getCustomAttributeInputType","date","text","list","checkbox","isACustomAttribute","customAttributes","find","attr","attribute_key","getOperatorTypes","OPERATOR_TYPES_1","OPERATOR_TYPES_3","number","link","OPERATOR_TYPES_4","generateCustomAttributeTypes","type","attribute_display_name","attribute_display_type","filterOperators","customAttributeType","generateConditionOptions","i","title","addNoneToList","agents","getActionOptions","labels","slaPolicies","assign_agent","assign_team","send_email_to_team","add_label","remove_label","change_priority","add_sla","getConditionOptions","booleanFilterOptions","campaigns","contacts","countries","inboxes","languages","statusFilterOptions","isCustomAttributeCheckbox","isCustomAttributeList","attribute_values","item","getCustomAttributeListDropdownValues","status","assignee_id","contact","inbox_id","team_id","browser_language","conversation_language","country_code","message_type","priority","getFileName","action","files","blobId","file","blob_id","filename","toString","getDefaultConditions","eventName","filter_operator","values","query_operator","custom_attribute_type","getDefaultActions","filterCustomAttributes","getStandardAttributeInputType","automationTypes","event","conditions","generateAutomationPayload","payload","automation","JSON","parse","stringify","length","filterQueryGenerator","actions","actionQueryGenerator","isCustomAttribute","generateCustomAttributes","conversationAttributes","contactAttributes","conversationlabel","contactlabel","push","disabled","OPERATOR_TYPES_2","OPERATOR_TYPES_6","generatePayload","data","params","isArray","every","elem","val","generatePayloadForObject"],"mappings":"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","file":"js/16-dd6fd3acf8907c5d6f7c.chunk.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"filter\",class:_vm.actionInputStyles},[_c('div',{staticClass:\"filter-inputs\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.action_name),expression:\"action_name\"}],staticClass:\"action__question\",class:{ 'full-width': !_vm.showActionInput },on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.action_name=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},function($event){return _vm.resetAction()}]}},_vm._l((_vm.actionTypes),function(attribute){return _c('option',{key:attribute.key,domProps:{\"value\":attribute.key}},[_vm._v(\"\\n        \"+_vm._s(attribute.label)+\"\\n      \")])}),0),_vm._v(\" \"),(_vm.showActionInput)?_c('div',{staticClass:\"filter__answer--wrap\"},[(_vm.inputType)?_c('div',{staticClass:\"w-full\"},[(_vm.inputType === 'search_select')?_c('div',{staticClass:\"multiselect-wrap--small\"},[_c('multiselect',{attrs:{\"track-by\":\"id\",\"label\":\"name\",\"placeholder\":_vm.$t('FORMS.MULTISELECT.SELECT'),\"selected-label\":\"\",\"select-label\":_vm.$t('FORMS.MULTISELECT.ENTER_TO_SELECT'),\"deselect-label\":\"\",\"max-height\":160,\"options\":_vm.dropdownValues,\"allow-empty\":false,\"option-height\":104},model:{value:(_vm.action_params),callback:function ($$v) {_vm.action_params=$$v},expression:\"action_params\"}})],1):(_vm.inputType === 'multi_select')?_c('div',{staticClass:\"multiselect-wrap--small\"},[_c('multiselect',{attrs:{\"track-by\":\"id\",\"label\":\"name\",\"placeholder\":_vm.$t('FORMS.MULTISELECT.SELECT'),\"multiple\":true,\"selected-label\":\"\",\"select-label\":_vm.$t('FORMS.MULTISELECT.ENTER_TO_SELECT'),\"deselect-label\":\"\",\"max-height\":160,\"options\":_vm.dropdownValues,\"allow-empty\":false,\"option-height\":104},model:{value:(_vm.action_params),callback:function ($$v) {_vm.action_params=$$v},expression:\"action_params\"}})],1):(_vm.inputType === 'email')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.action_params),expression:\"action_params\"}],staticClass:\"answer--text-input\",attrs:{\"type\":\"email\",\"placeholder\":\"Enter email\"},domProps:{\"value\":(_vm.action_params)},on:{\"input\":function($event){if($event.target.composing)return;_vm.action_params=$event.target.value}}}):(_vm.inputType === 'url')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.action_params),expression:\"action_params\"}],staticClass:\"answer--text-input\",attrs:{\"type\":\"url\",\"placeholder\":\"Enter url\"},domProps:{\"value\":(_vm.action_params)},on:{\"input\":function($event){if($event.target.composing)return;_vm.action_params=$event.target.value}}}):_vm._e(),_vm._v(\" \"),(_vm.inputType === 'attachment')?_c('automation-action-file-input',{attrs:{\"initial-file-name\":_vm.initialFileName},model:{value:(_vm.action_params),callback:function ($$v) {_vm.action_params=$$v},expression:\"action_params\"}}):_vm._e()],1):_vm._e()]):_vm._e(),_vm._v(\" \"),(!_vm.isMacro)?_c('woot-button',{attrs:{\"icon\":\"dismiss\",\"variant\":\"clear\",\"color-scheme\":\"secondary\"},on:{\"click\":_vm.removeAction}}):_vm._e()],1),_vm._v(\" \"),(_vm.inputType === 'team_message')?_c('automation-action-team-message-input',{attrs:{\"teams\":_vm.dropdownValues},model:{value:(_vm.action_params),callback:function ($$v) {_vm.action_params=$$v},expression:\"action_params\"}}):_vm._e(),_vm._v(\" \"),(_vm.inputType === 'textarea')?_c('woot-message-editor',{staticClass:\"action-message\",attrs:{\"rows\":\"4\",\"enable-variables\":true,\"placeholder\":_vm.$t('AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER')},model:{value:(_vm.castMessageVmodel),callback:function ($$v) {_vm.castMessageVmodel=$$v},expression:\"castMessageVmodel\"}}):_vm._e(),_vm._v(\" \"),(_vm.v.action_params.$dirty && _vm.v.action_params.$error)?_c('p',{staticClass:\"filter-error\"},[_vm._v(\"\\n    \"+_vm._s(_vm.$t('FILTER.EMPTY_VALUE_ERROR'))+\"\\n  \")]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AutomationActionTeamMessageInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AutomationActionTeamMessageInput.vue?vue&type=script&lang=js&\"","<template>\n  <div>\n    <div class=\"multiselect-wrap--small\">\n      <multiselect\n        v-model=\"selectedTeams\"\n        track-by=\"id\"\n        label=\"name\"\n        :placeholder=\"$t('AUTOMATION.ACTION.TEAM_DROPDOWN_PLACEHOLDER')\"\n        :multiple=\"true\"\n        selected-label\n        :select-label=\"$t('FORMS.MULTISELECT.ENTER_TO_SELECT')\"\n        deselect-label=\"\"\n        :max-height=\"160\"\n        :options=\"teams\"\n        :allow-empty=\"false\"\n        @input=\"updateValue\"\n      />\n      <textarea\n        v-model=\"message\"\n        rows=\"4\"\n        :placeholder=\"$t('AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER')\"\n        @input=\"updateValue\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  // The value types are dynamic, hence prop validation removed to work with our action schema\n  // eslint-disable-next-line vue/require-prop-types\n  props: ['teams', 'value'],\n  data() {\n    return {\n      selectedTeams: [],\n      message: '',\n    };\n  },\n  mounted() {\n    const { team_ids: teamIds } = this.value;\n    this.selectedTeams = teamIds;\n    this.message = this.value.message;\n  },\n  methods: {\n    updateValue() {\n      this.$emit('input', {\n        team_ids: this.selectedTeams.map(team => team.id),\n        message: this.message,\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.multiselect {\n  margin: var(--space-smaller) var(--space-zero);\n}\ntextarea {\n  margin-bottom: var(--space-zero);\n}\n</style>\n","import { render, staticRenderFns } from \"./AutomationActionTeamMessageInput.vue?vue&type=template&id=3a0353d8&scoped=true&\"\nimport script from \"./AutomationActionTeamMessageInput.vue?vue&type=script&lang=js&\"\nexport * from \"./AutomationActionTeamMessageInput.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AutomationActionTeamMessageInput.vue?vue&type=style&index=0&id=3a0353d8&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3a0353d8\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"multiselect-wrap--small\"},[_c('multiselect',{attrs:{\"track-by\":\"id\",\"label\":\"name\",\"placeholder\":_vm.$t('AUTOMATION.ACTION.TEAM_DROPDOWN_PLACEHOLDER'),\"multiple\":true,\"selected-label\":\"\",\"select-label\":_vm.$t('FORMS.MULTISELECT.ENTER_TO_SELECT'),\"deselect-label\":\"\",\"max-height\":160,\"options\":_vm.teams,\"allow-empty\":false},on:{\"input\":_vm.updateValue},model:{value:(_vm.selectedTeams),callback:function ($$v) {_vm.selectedTeams=$$v},expression:\"selectedTeams\"}}),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.message),expression:\"message\"}],attrs:{\"rows\":\"4\",\"placeholder\":_vm.$t('AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER')},domProps:{\"value\":(_vm.message)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.message=$event.target.value},_vm.updateValue]}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <label class=\"input-wrapper\" :class=\"uploadState\">\n    <input\n      v-if=\"uploadState !== 'processing'\"\n      type=\"file\"\n      name=\"attachment\"\n      :class=\"uploadState === 'processing' ? 'disabled' : ''\"\n      @change=\"onChangeFile\"\n    />\n    <spinner v-if=\"uploadState === 'processing'\" />\n    <fluent-icon v-if=\"uploadState === 'idle'\" icon=\"file-upload\" />\n    <fluent-icon\n      v-if=\"uploadState === 'uploaded'\"\n      icon=\"checkmark-circle\"\n      type=\"outline\"\n      class=\"success-icon\"\n    />\n    <fluent-icon\n      v-if=\"uploadState === 'failed'\"\n      icon=\"dismiss-circle\"\n      type=\"outline\"\n      class=\"error-icon\"\n    />\n    <p class=\"file-button\">{{ label }}</p>\n  </label>\n</template>\n\n<script>\nimport Spinner from 'shared/components/Spinner.vue';\nimport alertMixin from 'shared/mixins/alertMixin';\nexport default {\n  components: {\n    Spinner,\n  },\n  mixins: [alertMixin],\n  props: {\n    value: {\n      type: Array,\n      default: () => [],\n    },\n    initialFileName: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      uploadState: 'idle',\n      label: this.$t('AUTOMATION.ATTACHMENT.LABEL_IDLE'),\n    };\n  },\n  mounted() {\n    if (this.initialFileName) {\n      this.label = this.initialFileName;\n      this.uploadState = 'uploaded';\n    }\n  },\n  methods: {\n    async onChangeFile(event) {\n      this.uploadState = 'processing';\n      this.label = this.$t('AUTOMATION.ATTACHMENT.LABEL_UPLOADING');\n      try {\n        const file = event.target.files[0];\n        const id = await this.$store.dispatch(\n          'automations/uploadAttachment',\n          file\n        );\n        this.$emit('input', [id]);\n        this.uploadState = 'uploaded';\n        this.label = this.$t('AUTOMATION.ATTACHMENT.LABEL_UPLOADED');\n      } catch (error) {\n        this.uploadState = 'failed';\n        this.label = this.$t('AUTOMATION.ATTACHMENT.LABEL_UPLOAD_FAILED');\n        this.showAlert(this.$t('AUTOMATION.ATTACHMENT.UPLOAD_ERROR'));\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\ninput[type='file'] {\n  @apply hidden;\n}\n.input-wrapper {\n  @apply flex h-9 bg-white dark:bg-slate-900 py-1 px-2 items-center text-xs cursor-pointer rounded-sm border border-dashed border-woot-100 dark:border-woot-500;\n}\n.success-icon {\n  @apply text-green-500 dark:text-green-600 mr-2;\n}\n.error-icon {\n  @apply text-red-500 dark:text-red-600 mr-2;\n}\n\n.processing {\n  @apply cursor-not-allowed opacity-90;\n}\n.file-button {\n  @apply whitespace-nowrap overflow-hidden text-ellipsis w-full mb-0;\n}\n</style>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AutomationFileInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AutomationFileInput.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"filter\" :class=\"actionInputStyles\">\n    <div class=\"filter-inputs\">\n      <select\n        v-model=\"action_name\"\n        class=\"action__question\"\n        :class=\"{ 'full-width': !showActionInput }\"\n        @change=\"resetAction()\"\n      >\n        <option\n          v-for=\"attribute in actionTypes\"\n          :key=\"attribute.key\"\n          :value=\"attribute.key\"\n        >\n          {{ attribute.label }}\n        </option>\n      </select>\n      <div v-if=\"showActionInput\" class=\"filter__answer--wrap\">\n        <div v-if=\"inputType\" class=\"w-full\">\n          <div\n            v-if=\"inputType === 'search_select'\"\n            class=\"multiselect-wrap--small\"\n          >\n            <multiselect\n              v-model=\"action_params\"\n              track-by=\"id\"\n              label=\"name\"\n              :placeholder=\"$t('FORMS.MULTISELECT.SELECT')\"\n              selected-label\n              :select-label=\"$t('FORMS.MULTISELECT.ENTER_TO_SELECT')\"\n              deselect-label=\"\"\n              :max-height=\"160\"\n              :options=\"dropdownValues\"\n              :allow-empty=\"false\"\n              :option-height=\"104\"\n            />\n          </div>\n          <div\n            v-else-if=\"inputType === 'multi_select'\"\n            class=\"multiselect-wrap--small\"\n          >\n            <multiselect\n              v-model=\"action_params\"\n              track-by=\"id\"\n              label=\"name\"\n              :placeholder=\"$t('FORMS.MULTISELECT.SELECT')\"\n              :multiple=\"true\"\n              selected-label\n              :select-label=\"$t('FORMS.MULTISELECT.ENTER_TO_SELECT')\"\n              deselect-label=\"\"\n              :max-height=\"160\"\n              :options=\"dropdownValues\"\n              :allow-empty=\"false\"\n              :option-height=\"104\"\n            />\n          </div>\n          <input\n            v-else-if=\"inputType === 'email'\"\n            v-model=\"action_params\"\n            type=\"email\"\n            class=\"answer--text-input\"\n            placeholder=\"Enter email\"\n          />\n          <input\n            v-else-if=\"inputType === 'url'\"\n            v-model=\"action_params\"\n            type=\"url\"\n            class=\"answer--text-input\"\n            placeholder=\"Enter url\"\n          />\n          <automation-action-file-input\n            v-if=\"inputType === 'attachment'\"\n            v-model=\"action_params\"\n            :initial-file-name=\"initialFileName\"\n          />\n        </div>\n      </div>\n      <woot-button\n        v-if=\"!isMacro\"\n        icon=\"dismiss\"\n        variant=\"clear\"\n        color-scheme=\"secondary\"\n        @click=\"removeAction\"\n      />\n    </div>\n    <automation-action-team-message-input\n      v-if=\"inputType === 'team_message'\"\n      v-model=\"action_params\"\n      :teams=\"dropdownValues\"\n    />\n    <woot-message-editor\n      v-if=\"inputType === 'textarea'\"\n      v-model=\"castMessageVmodel\"\n      rows=\"4\"\n      :enable-variables=\"true\"\n      :placeholder=\"$t('AUTOMATION.ACTION.TEAM_MESSAGE_INPUT_PLACEHOLDER')\"\n      class=\"action-message\"\n    />\n    <p\n      v-if=\"v.action_params.$dirty && v.action_params.$error\"\n      class=\"filter-error\"\n    >\n      {{ $t('FILTER.EMPTY_VALUE_ERROR') }}\n    </p>\n  </div>\n</template>\n\n<script>\nimport AutomationActionTeamMessageInput from './AutomationActionTeamMessageInput.vue';\nimport AutomationActionFileInput from './AutomationFileInput.vue';\nimport WootMessageEditor from 'dashboard/components/widgets/WootWriter/Editor.vue';\nexport default {\n  components: {\n    AutomationActionTeamMessageInput,\n    AutomationActionFileInput,\n    WootMessageEditor,\n  },\n  props: {\n    value: {\n      type: Object,\n      default: () => null,\n    },\n    actionTypes: {\n      type: Array,\n      default: () => [],\n    },\n    dropdownValues: {\n      type: Array,\n      default: () => [],\n    },\n    v: {\n      type: Object,\n      default: () => null,\n    },\n    showActionInput: {\n      type: Boolean,\n      default: true,\n    },\n    initialFileName: {\n      type: String,\n      default: '',\n    },\n    isMacro: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {\n    action_name: {\n      get() {\n        if (!this.value) return null;\n        return this.value.action_name;\n      },\n      set(value) {\n        const payload = this.value || {};\n        this.$emit('input', { ...payload, action_name: value });\n      },\n    },\n    action_params: {\n      get() {\n        if (!this.value) return null;\n        return this.value.action_params;\n      },\n      set(value) {\n        const payload = this.value || {};\n        this.$emit('input', { ...payload, action_params: value });\n      },\n    },\n    inputType() {\n      return this.actionTypes.find(action => action.key === this.action_name)\n        .inputType;\n    },\n    actionInputStyles() {\n      return {\n        'has-error': this.v.action_params.$dirty && this.v.action_params.$error,\n        'is-a-macro': this.isMacro,\n      };\n    },\n    castMessageVmodel: {\n      get() {\n        if (Array.isArray(this.action_params)) {\n          return this.action_params[0];\n        }\n        return this.action_params;\n      },\n      set(value) {\n        this.action_params = value;\n      },\n    },\n  },\n  methods: {\n    removeAction() {\n      this.$emit('removeAction');\n    },\n    resetAction() {\n      this.$emit('resetAction');\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.filter {\n  @apply bg-slate-50 dark:bg-slate-800 p-2 border border-solid border-slate-75 dark:border-slate-600 rounded-md mb-2;\n\n  &.is-a-macro {\n    @apply mb-0 bg-white dark:bg-slate-700 p-0 border-0 rounded-none;\n  }\n}\n\n.no-margin-bottom {\n  @apply mb-0;\n}\n\n.filter.has-error {\n  @apply bg-red-50 dark:bg-red-800/50 border-red-100 dark:border-red-700/50;\n}\n\n.filter-inputs {\n  @apply flex;\n}\n\n.filter-error {\n  @apply text-red-500 dark:text-red-200 block my-1 mx-0;\n}\n\n.action__question,\n.filter__operator {\n  @apply mb-0 mr-1;\n}\n\n.action__question {\n  @apply max-w-[50%];\n}\n\n.action__question.full-width {\n  @apply max-w-full;\n}\n\n.filter__answer--wrap {\n  @apply max-w-[50%] flex-grow mr-1 flex w-full items-center justify-start;\n\n  input {\n    @apply mb-0;\n  }\n}\n.filter__answer {\n  &.answer--text-input {\n    @apply mb-0;\n  }\n}\n\n.filter__join-operator-wrap {\n  @apply relative z-20 m-0;\n}\n\n.filter__join-operator {\n  @apply flex items-center justify-center relative my-2.5 mx-0;\n\n  .operator__line {\n    @apply absolute w-full border-b border-solid border-slate-75 dark:border-slate-600;\n  }\n\n  .operator__select {\n    margin-bottom: var(--space-zero) !important;\n    @apply relative w-auto;\n  }\n}\n\n.multiselect {\n  @apply mb-0;\n}\n.action-message {\n  @apply mt-2 mx-0 mb-0;\n}\n// Prosemirror does not have a native way of hiding the menu bar, hence\n::v-deep .ProseMirror-menubar {\n  @apply hidden;\n}\n</style>\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AutomationActionInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AutomationActionInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AutomationFileInput.vue?vue&type=template&id=b0a9e21e&scoped=true&\"\nimport script from \"./AutomationFileInput.vue?vue&type=script&lang=js&\"\nexport * from \"./AutomationFileInput.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AutomationFileInput.vue?vue&type=style&index=0&id=b0a9e21e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b0a9e21e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('label',{staticClass:\"input-wrapper\",class:_vm.uploadState},[(_vm.uploadState !== 'processing')?_c('input',{class:_vm.uploadState === 'processing' ? 'disabled' : '',attrs:{\"type\":\"file\",\"name\":\"attachment\"},on:{\"change\":_vm.onChangeFile}}):_vm._e(),_vm._v(\" \"),(_vm.uploadState === 'processing')?_c('spinner'):_vm._e(),_vm._v(\" \"),(_vm.uploadState === 'idle')?_c('fluent-icon',{attrs:{\"icon\":\"file-upload\"}}):_vm._e(),_vm._v(\" \"),(_vm.uploadState === 'uploaded')?_c('fluent-icon',{staticClass:\"success-icon\",attrs:{\"icon\":\"checkmark-circle\",\"type\":\"outline\"}}):_vm._e(),_vm._v(\" \"),(_vm.uploadState === 'failed')?_c('fluent-icon',{staticClass:\"error-icon\",attrs:{\"icon\":\"dismiss-circle\",\"type\":\"outline\"}}):_vm._e(),_vm._v(\" \"),_c('p',{staticClass:\"file-button\"},[_vm._v(_vm._s(_vm.label))])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./AutomationActionInput.vue?vue&type=template&id=569fbaba&scoped=true&\"\nimport script from \"./AutomationActionInput.vue?vue&type=script&lang=js&\"\nexport * from \"./AutomationActionInput.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AutomationActionInput.vue?vue&type=style&index=0&id=569fbaba&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"569fbaba\",\n  null\n  \n)\n\nexport default component.exports","import {\n  OPERATOR_TYPES_1,\n  OPERATOR_TYPES_3,\n  OPERATOR_TYPES_4,\n} from 'dashboard/routes/dashboard/settings/automation/operators';\nimport filterQueryGenerator from './filterQueryGenerator';\nimport actionQueryGenerator from './actionQueryGenerator';\nconst MESSAGE_CONDITION_VALUES = [\n  {\n    id: 'incoming',\n    name: 'Incoming Message',\n  },\n  {\n    id: 'outgoing',\n    name: 'Outgoing Message',\n  },\n];\n\nexport const PRIORITY_CONDITION_VALUES = [\n  {\n    id: 'nil',\n    name: 'None',\n  },\n  {\n    id: 'low',\n    name: 'Low',\n  },\n  {\n    id: 'medium',\n    name: 'Medium',\n  },\n  {\n    id: 'high',\n    name: 'High',\n  },\n  {\n    id: 'urgent',\n    name: 'Urgent',\n  },\n];\n\nexport const getCustomAttributeInputType = key => {\n  const customAttributeMap = {\n    date: 'date',\n    text: 'plain_text',\n    list: 'search_select',\n    checkbox: 'search_select',\n  };\n\n  return customAttributeMap[key] || 'plain_text';\n};\n\nexport const isACustomAttribute = (customAttributes, key) => {\n  return customAttributes.find(attr => {\n    return attr.attribute_key === key;\n  });\n};\n\nexport const getCustomAttributeListDropdownValues = (\n  customAttributes,\n  type\n) => {\n  return customAttributes\n    .find(attr => attr.attribute_key === type)\n    .attribute_values.map(item => {\n      return {\n        id: item,\n        name: item,\n      };\n    });\n};\n\nexport const isCustomAttributeCheckbox = (customAttributes, key) => {\n  return customAttributes.find(attr => {\n    return (\n      attr.attribute_key === key && attr.attribute_display_type === 'checkbox'\n    );\n  });\n};\n\nexport const isCustomAttributeList = (customAttributes, type) => {\n  return customAttributes.find(attr => {\n    return (\n      attr.attribute_key === type && attr.attribute_display_type === 'list'\n    );\n  });\n};\n\nexport const getOperatorTypes = key => {\n  const operatorMap = {\n    list: OPERATOR_TYPES_1,\n    text: OPERATOR_TYPES_3,\n    number: OPERATOR_TYPES_1,\n    link: OPERATOR_TYPES_1,\n    date: OPERATOR_TYPES_4,\n    checkbox: OPERATOR_TYPES_1,\n  };\n\n  return operatorMap[key] || OPERATOR_TYPES_1;\n};\n\nexport const generateCustomAttributeTypes = (customAttributes, type) => {\n  return customAttributes.map(attr => {\n    return {\n      key: attr.attribute_key,\n      name: attr.attribute_display_name,\n      inputType: getCustomAttributeInputType(attr.attribute_display_type),\n      filterOperators: getOperatorTypes(attr.attribute_display_type),\n      customAttributeType: type,\n    };\n  });\n};\n\nexport const generateConditionOptions = (options, key = 'id') => {\n  return options.map(i => {\n    return {\n      id: i[key],\n      name: i.title,\n    };\n  });\n};\n\n// Add the \"None\" option to the agent list\nexport const addNoneToList = agents => [\n  {\n    id: 'nil',\n    name: 'None',\n  },\n  ...(agents || []),\n];\n\nexport const getActionOptions = ({\n  agents,\n  teams,\n  labels,\n  slaPolicies,\n  type,\n}) => {\n  const actionsMap = {\n    assign_agent: addNoneToList(agents),\n    assign_team: addNoneToList(teams),\n    send_email_to_team: teams,\n    add_label: generateConditionOptions(labels, 'title'),\n    remove_label: generateConditionOptions(labels, 'title'),\n    change_priority: PRIORITY_CONDITION_VALUES,\n    add_sla: slaPolicies,\n  };\n  return actionsMap[type];\n};\n\nexport const getConditionOptions = ({\n  agents,\n  booleanFilterOptions,\n  campaigns,\n  contacts,\n  countries,\n  customAttributes,\n  inboxes,\n  languages,\n  statusFilterOptions,\n  teams,\n  type,\n}) => {\n  if (isCustomAttributeCheckbox(customAttributes, type)) {\n    return booleanFilterOptions;\n  }\n\n  if (isCustomAttributeList(customAttributes, type)) {\n    return getCustomAttributeListDropdownValues(customAttributes, type);\n  }\n\n  const conditionFilterMaps = {\n    status: statusFilterOptions,\n    assignee_id: agents,\n    contact: contacts,\n    inbox_id: inboxes,\n    team_id: teams,\n    campaigns: generateConditionOptions(campaigns),\n    browser_language: languages,\n    conversation_language: languages,\n    country_code: countries,\n    message_type: MESSAGE_CONDITION_VALUES,\n    priority: PRIORITY_CONDITION_VALUES,\n  };\n\n  return conditionFilterMaps[type];\n};\n\nexport const getFileName = (action, files = []) => {\n  const blobId = action.action_params[0];\n  if (!blobId) return '';\n  if (action.action_name === 'send_attachment') {\n    const file = files.find(item => item.blob_id === blobId);\n    if (file) return file.filename.toString();\n  }\n  return '';\n};\n\nexport const getDefaultConditions = eventName => {\n  if (eventName === 'message_created') {\n    return [\n      {\n        attribute_key: 'message_type',\n        filter_operator: 'equal_to',\n        values: '',\n        query_operator: 'and',\n        custom_attribute_type: '',\n      },\n    ];\n  }\n  if (eventName === 'conversation_opened') {\n    return [\n      {\n        attribute_key: 'browser_language',\n        filter_operator: 'equal_to',\n        values: '',\n        query_operator: 'and',\n        custom_attribute_type: '',\n      },\n    ];\n  }\n  return [\n    {\n      attribute_key: 'status',\n      filter_operator: 'equal_to',\n      values: '',\n      query_operator: 'and',\n      custom_attribute_type: '',\n    },\n  ];\n};\n\nexport const getDefaultActions = () => {\n  return [\n    {\n      action_name: 'assign_agent',\n      action_params: [],\n    },\n  ];\n};\n\nexport const filterCustomAttributes = customAttributes => {\n  return customAttributes.map(attr => {\n    return {\n      key: attr.attribute_key,\n      name: attr.attribute_display_name,\n      type: attr.attribute_display_type,\n    };\n  });\n};\n\nexport const getStandardAttributeInputType = (automationTypes, event, key) => {\n  return automationTypes[event].conditions.find(item => item.key === key)\n    .inputType;\n};\n\nexport const generateAutomationPayload = payload => {\n  const automation = JSON.parse(JSON.stringify(payload));\n  automation.conditions[automation.conditions.length - 1].query_operator = null;\n  automation.conditions = filterQueryGenerator(automation.conditions).payload;\n  automation.actions = actionQueryGenerator(automation.actions);\n  return automation;\n};\n\nexport const isCustomAttribute = (attrs, key) => {\n  return attrs.find(attr => attr.key === key);\n};\n\nexport const generateCustomAttributes = (\n  // eslint-disable-next-line default-param-last\n  conversationAttributes = [],\n  // eslint-disable-next-line default-param-last\n  contactAttributes = [],\n  conversationlabel,\n  contactlabel\n) => {\n  const customAttributes = [];\n  if (conversationAttributes.length) {\n    customAttributes.push(\n      {\n        key: `conversation_custom_attribute`,\n        name: conversationlabel,\n        disabled: true,\n      },\n      ...conversationAttributes\n    );\n  }\n  if (contactAttributes.length) {\n    customAttributes.push(\n      {\n        key: `contact_custom_attribute`,\n        name: contactlabel,\n        disabled: true,\n      },\n      ...contactAttributes\n    );\n  }\n  return customAttributes;\n};\n","export const OPERATOR_TYPES_1 = [\n  {\n    value: 'equal_to',\n    label: 'Equal to',\n  },\n  {\n    value: 'not_equal_to',\n    label: 'Not equal to',\n  },\n];\n\nexport const OPERATOR_TYPES_2 = [\n  {\n    value: 'equal_to',\n    label: 'Equal to',\n  },\n  {\n    value: 'not_equal_to',\n    label: 'Not equal to',\n  },\n  {\n    value: 'contains',\n    label: 'Contains',\n  },\n  {\n    value: 'does_not_contain',\n    label: 'Does not contain',\n  },\n];\n\nexport const OPERATOR_TYPES_3 = [\n  {\n    value: 'equal_to',\n    label: 'Equal to',\n  },\n  {\n    value: 'not_equal_to',\n    label: 'Not equal to',\n  },\n  {\n    value: 'is_present',\n    label: 'Is present',\n  },\n  {\n    value: 'is_not_present',\n    label: 'Is not present',\n  },\n];\n\nexport const OPERATOR_TYPES_4 = [\n  {\n    value: 'equal_to',\n    label: 'Equal to',\n  },\n  {\n    value: 'not_equal_to',\n    label: 'Not equal to',\n  },\n  {\n    value: 'is_present',\n    label: 'Is present',\n  },\n  {\n    value: 'is_not_present',\n    label: 'Is not present',\n  },\n  {\n    value: 'is_greater_than',\n    label: 'Is greater than',\n  },\n  {\n    value: 'is_less_than',\n    label: 'Is less than',\n  },\n];\n\nexport const OPERATOR_TYPES_5 = [\n  {\n    value: 'is_greater_than',\n    label: 'Is greater than',\n  },\n  {\n    value: 'is_less_than',\n    label: 'Is less than',\n  },\n  {\n    value: 'days_before',\n    label: 'Is x days before',\n  },\n];\n\nexport const OPERATOR_TYPES_6 = [\n  {\n    value: 'equal_to',\n    label: 'Equal to',\n  },\n  {\n    value: 'not_equal_to',\n    label: 'Not equal to',\n  },\n  {\n    value: 'contains',\n    label: 'Contains',\n  },\n  {\n    value: 'does_not_contain',\n    label: 'Does not contain',\n  },\n  {\n    value: 'starts_with',\n    label: 'Starts With',\n  },\n];\n","const allElementsString = arr => {\n  return arr.every(elem => typeof elem === 'string');\n};\n\nconst allElementsNumbers = arr => {\n  return arr.every(elem => typeof elem === 'number');\n};\n\nconst formatArray = params => {\n  if (params.length <= 0) {\n    params = [];\n  } else if (allElementsString(params) || allElementsNumbers(params)) {\n    params = [...params];\n  } else {\n    params = params.map(val => val.id);\n  }\n  return params;\n};\n\nconst generatePayloadForObject = item => {\n  if (item.action_params.id) {\n    item.action_params = [item.action_params.id];\n  } else {\n    item.action_params = [item.action_params];\n  }\n  return item.action_params;\n};\n\nconst generatePayload = data => {\n  const actions = JSON.parse(JSON.stringify(data));\n  let payload = actions.map(item => {\n    if (Array.isArray(item.action_params)) {\n      item.action_params = formatArray(item.action_params);\n    } else if (typeof item.action_params === 'object') {\n      item.action_params = generatePayloadForObject(item);\n    } else if (!item.action_params) {\n      item.action_params = [];\n    } else {\n      item.action_params = [item.action_params];\n    }\n    return item;\n  });\n  return payload;\n};\n\nexport default generatePayload;\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js??ref--2-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js??ref--2-2!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AutomationActionTeamMessageInput.vue?vue&type=style&index=0&id=3a0353d8&prod&scoped=true&lang=css&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js??ref--2-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js??ref--2-2!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AutomationFileInput.vue?vue&type=style&index=0&id=b0a9e21e&prod&scoped=true&lang=css&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AutomationActionInput.vue?vue&type=style&index=0&id=569fbaba&prod&lang=scss&scoped=true&\""],"sourceRoot":""}