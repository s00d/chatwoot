(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{2137:function(e,t,n){var o=n(26),a=n(192),r=n(104);o({target:"Object",stat:!0},{fromEntries:function(e){var t={};return a(e,(function(e,n){r(t,e,n)}),{AS_ENTRIES:!0}),t}})},2644:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(5),a=n.n(o),r=n(202).a;function c(){if(!r)throw new Error("vue-i18n not initialized");var e=r,t=Object(o.getCurrentInstance)(),n=(null===t||void 0===t?void 0:t.proxy)||t||new a.a({});return{locale:Object(o.computed)({get:function(){return e.locale},set:function(t){e.locale=t}}),t:n.$t.bind(n),tc:n.$tc.bind(n),d:n.$d.bind(n),te:n.$te.bind(n),n:n.$n.bind(n)}}},2650:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var o=n(5),a=function(){var e=Object(o.getCurrentInstance)();if(!e)throw new Error("must be called in setup");return e.proxy.$track};function r(e,t){bus.$emit("newToastMessage",e,t)}},2666:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));n(19),n(2137),n(72),n(11);var o=n(5),a=function(){var e=Object(o.getCurrentInstance)();if(!e)throw new Error("must be called in setup");return e.proxy.$store},r=function(){var e=a();return Object.fromEntries(Object.keys(e.getters).map((function(t){return[t,Object(o.computed)((function(){return e.getters[t]}))]})))}},2667:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));n(1919);var o=n(5);function a(){var e=Object(o.getCurrentInstance)(),t=Object(o.reactive)(Object.assign({},e.proxy.$root.$route));return Object(o.watchEffect)((function(){Object.assign(t,e.proxy.$root.$route)})),t}function r(){var e=Object(o.getCurrentInstance)(),t=e.proxy.$root.$router;return Object(o.watchEffect)((function(){t&&Object.assign(t,e.proxy.$root.$router)})),t}},2791:function(e,t,n){},2792:function(e,t,n){},2873:function(e,t,n){"use strict";n(2791)},2874:function(e,t,n){"use strict";n(2792)},2888:function(e,t,n){"use strict";var o={mixins:[n(1779).a],props:{locales:{type:Array,default:function(){return[]}},selectedLocaleCode:{type:String,default:""}},methods:{changeDefaultLocale:function(e){this.$emit("change-default-locale",{localeCode:e})},deleteLocale:function(e){this.$emit("delete",{localeCode:e})}}},a=(n(2873),n(6)),r=Object(a.a)(o,(function(){var e=this,t=e._self._c;return t("table",[t("thead",[t("tr",[t("th",{attrs:{scope:"col"}},[e._v("\n        "+e._s(e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.NAME"))+"\n      ")]),e._v(" "),t("th",{attrs:{scope:"col"}},[e._v("\n        "+e._s(e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.CODE"))+"\n      ")]),e._v(" "),t("th",{attrs:{scope:"col"}},[e._v("\n        "+e._s(e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.ARTICLE_COUNT"))+"\n      ")]),e._v(" "),t("th",{attrs:{scope:"col"}},[e._v("\n        "+e._s(e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.CATEGORIES"))+"\n      ")]),e._v(" "),t("th",{attrs:{scope:"col"}})])]),e._v(" "),e._m(0),e._v(" "),t("tbody",e._l(e.locales,(function(n){return t("tr",{key:n.code},[t("td",[t("span",[e._v(e._s(e.localeName(n.code)))]),e._v(" "),n.code===e.selectedLocaleCode?t("woot-label",{staticClass:"default-status",attrs:{title:e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.DEFAULT_LOCALE"),"color-scheme":"warning",small:!0,variant:"smooth"}}):e._e()],1),e._v(" "),t("td",[t("span",[e._v(e._s(n.code))])]),e._v(" "),t("td",[t("span",[e._v(e._s(n.articles_count))])]),e._v(" "),t("td",[t("span",[e._v(e._s(n.categories_count))])]),e._v(" "),t("td",[t("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.SWAP"),expression:"\n            $t(\n              'HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.SWAP'\n            )\n          ",modifiers:{"top-end":!0}}],attrs:{size:"tiny",variant:"smooth",icon:"arrow-swap","color-scheme":"primary",disabled:n.code===e.selectedLocaleCode},on:{click:function(t){return e.changeDefaultLocale(n.code)}}}),e._v(" "),t("woot-button",{directives:[{name:"tooltip",rawName:"v-tooltip.top-end",value:e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.DELETE"),expression:"\n            $t(\n              'HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.AVAILABLE_LOCALES.TABLE.DELETE'\n            )\n          ",modifiers:{"top-end":!0}}],attrs:{size:"tiny",variant:"smooth",icon:"delete","color-scheme":"alert",disabled:n.code===e.selectedLocaleCode},on:{click:function(t){return e.deleteLocale(n.code)}}})],1)])})),0)])}),[function(){var e=this._self._c;return e("tr",[e("td",{staticClass:"horizontal-line",attrs:{colspan:"100%"}})])}],!1,null,"0694de7a",null);t.a=r.exports},2889:function(e,t,n){"use strict";n(34),n(72),n(9),n(11),n(77),n(96),n(41),n(8),n(25);var o=n(312),a=n(78),r=n(62),c=n(1940),l=n(87);function s(e,t,n,o,a,r,c){try{var l=e[r](c),s=l.value}catch(u){return void n(u)}l.done?t(s):Promise.resolve(s).then(o,a)}var u={components:{Modal:o.a},mixins:[a.a],props:{show:{type:Boolean,default:!0},portal:{type:Object,default:function(){return{}}}},data:function(){return{selectedLocale:"",isUpdating:!1}},computed:{addedLocales:function(){return this.portal.config.allowed_locales.map((function(e){return e.code}))},locales:function(){var e=this.portal.config.allowed_locales.map((function(e){return e.code}));return Object.keys(c.a).map((function(e){return{id:e,name:c.a[e],code:e}})).filter((function(t){return!e.includes(t.code)}))}},validations:{selectedLocale:{required:r.required}},methods:{onCreate:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$v.$touch(),!t.$v.$invalid){e.next=3;break}return e.abrupt("return");case 3:return(n=t.addedLocales).push(t.selectedLocale),t.isUpdating=!0,e.prev=6,e.next=9,t.$store.dispatch("portals/update",{portalSlug:t.portal.slug,config:{allowed_locales:n}});case 9:t.alertMessage=t.$t("HELP_CENTER.PORTAL.ADD_LOCALE.API.SUCCESS_MESSAGE"),t.onClose(),t.$track(l.i.CREATE_LOCALE,{localeAdded:t.selectedLocale,totalLocales:n.length,from:t.$route.name}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),t.alertMessage=(null===e.t0||void 0===e.t0?void 0:e.t0.message)||t.$t("HELP_CENTER.PORTAL.ADD_LOCALE.API.ERROR_MESSAGE");case 17:return e.prev=17,t.showAlert(t.alertMessage),t.isUpdating=!1,e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[6,14,17,21]])})),function(){var t=this,n=arguments;return new Promise((function(o,a){var r=e.apply(t,n);function c(e){s(r,o,a,c,l,"next",e)}function l(e){s(r,o,a,c,l,"throw",e)}c(void 0)}))})()},onClose:function(){this.$emit("cancel")}}},i=u,d=(n(2874),n(6)),L=Object(d.a)(i,(function(){var e=this,t=e._self._c;return t("modal",{attrs:{show:e.show,"on-close":e.onClose},on:{"update:show":function(t){e.show=t}}},[t("woot-modal-header",{attrs:{"header-title":e.$t("HELP_CENTER.PORTAL.ADD_LOCALE.TITLE"),"header-content":e.$t("HELP_CENTER.PORTAL.ADD_LOCALE.SUB_TITLE")}}),e._v(" "),t("form",{staticClass:"w-full",on:{submit:function(t){return t.preventDefault(),e.onCreate.apply(null,arguments)}}},[t("div",{staticClass:"w-full"},[t("label",{class:{error:e.$v.selectedLocale.$error}},[e._v("\n        "+e._s(e.$t("HELP_CENTER.PORTAL.ADD_LOCALE.LOCALE.LABEL"))+"\n        "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedLocale,expression:"selectedLocale"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedLocale=t.target.multiple?n:n[0]}}},e._l(e.locales,(function(n){return t("option",{key:n.name,domProps:{value:n.id}},[e._v("\n            "+e._s(n.name)+"-"+e._s(n.code)+"\n          ")])})),0),e._v(" "),e.$v.selectedLocale.$error?t("span",{staticClass:"message"},[e._v("\n          "+e._s(e.$t("HELP_CENTER.PORTAL.ADD_LOCALE.LOCALE.ERROR"))+"\n        ")]):e._e()]),e._v(" "),t("div",{staticClass:"w-full"},[t("div",{staticClass:"flex flex-row justify-end gap-2 py-2 px-0 w-full"},[t("woot-button",{staticClass:"button clear",on:{click:function(t){return t.preventDefault(),e.onClose.apply(null,arguments)}}},[e._v("\n            "+e._s(e.$t("HELP_CENTER.PORTAL.ADD_LOCALE.BUTTONS.CANCEL"))+"\n          ")]),e._v(" "),t("woot-button",[e._v("\n            "+e._s(e.$t("HELP_CENTER.PORTAL.ADD_LOCALE.BUTTONS.CREATE"))+"\n          ")])],1)])])])],1)}),[],!1,null,"30b24ea8",null);t.a=L.exports},3397:function(e,t,n){"use strict";n.r(t);n(34),n(72),n(11),n(41),n(9),n(8),n(25);var o=n(2888),a=n(2889),r=n(87),c=n(2650),l=n(2666),s=n(2667),u=n(2644),i=n(5);function d(e,t,n,o,a,r,c){try{var l=e[r](c),s=l.value}catch(u){return void n(u)}l.done?t(s):Promise.resolve(s).then(o,a)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var r=e.apply(t,n);function c(e){d(r,o,a,c,l,"next",e)}function l(e){d(r,o,a,c,l,"throw",e)}c(void 0)}))}}var E={__name:"EditPortalLocales",setup:function(e){var t=this;Object(i.defineComponent)({name:"EditPortalLocales"});var n=Object(i.ref)(!1),d=Object(l.b)(),E=Object(l.a)(),f=Object(s.a)(),_=Object(c.b)(),p=Object(u.a)().t,v=Object(i.computed)((function(){return f.params.portalSlug})),A=Object(i.computed)((function(){var e=v.value;return e?d["portals/portalBySlug"].value(e):d["portals/allPortals"].value[0]})),T=Object(i.computed)((function(){var e;return null===(e=A.value)||void 0===e?void 0:e.config.allowed_locales})),O=Object(i.computed)((function(){return Object.keys(T.value).map((function(e){return t.locales.value[e].code}))}));function m(){return C.apply(this,arguments)}function C(){return(C=L(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.dispatch("portals/index");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return P.apply(this,arguments)}function P(){return(P=L(regeneratorRuntime.mark((function e(t){var n,o,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.newAllowedLocales,o=t.defaultLocale,a=t.messageKey,r="",e.prev=2,e.next=5,E.dispatch("portals/update",{portalSlug:v.value,config:{default_locale:o,allowed_locales:n}});case 5:r=p("HELP_CENTER.PORTAL.".concat(a,".API.SUCCESS_MESSAGE")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),r=(null===e.t0||void 0===e.t0?void 0:e.t0.message)||p("HELP_CENTER.PORTAL.".concat(a,".API.ERROR_MESSAGE"));case 11:return e.prev=11,Object(c.a)(r),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])})))).apply(this,arguments)}return Object(i.onBeforeMount)((function(){m()})),{__sfc:!0,isAddLocaleModalOpen:n,getters:d,store:E,route:f,track:_,t:p,currentPortalSlug:v,currentPortal:A,locales:T,allowedLocales:O,fetchPortals:m,updatePortalLocales:h,changeDefaultLocale:function(e){var t=e.localeCode;h({allowedLocales:O.value,defaultLocale:t,messageKey:"CHANGE_DEFAULT_LOCALE"}),_(r.i.SET_DEFAULT_LOCALE,{newLocale:t,from:f.name})},deletePortalLocale:function(e){var t,n=e.localeCode;h({allowedLocales:O.value.filter((function(e){return e!==n})),defaultLocale:null===(t=A.value)||void 0===t?void 0:t.meta.default_locale,messageKey:"DELETE_LOCALE"}),_(r.i.DELETE_LOCALE,{deletedLocale:n,from:f.name})},closeAddLocaleModal:function(){n.value=!1},addLocale:function(){n.value=!0},LocaleItemTable:o.a,AddLocale:a.a}}},f=E,_=n(6),p=Object(_.a)(f,(function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"w-full h-full max-w-6xl space-y-4 bg-white dark:bg-slate-900"},[t("div",{staticClass:"flex justify-end"},[t("woot-button",{staticClass:"header-action-buttons",attrs:{variant:"smooth",size:"small","color-scheme":"primary"},on:{click:n.addLocale}},[e._v("\n      "+e._s(e.$t("HELP_CENTER.PORTAL.PORTAL_SETTINGS.LIST_ITEM.HEADER.ADD"))+"\n    ")])],1),e._v(" "),n.currentPortal?t(n.LocaleItemTable,{attrs:{locales:n.locales,"selected-locale-code":n.currentPortal.meta.default_locale},on:{"change-default-locale":n.changeDefaultLocale,delete:n.deletePortalLocale}}):e._e(),e._v(" "),t("woot-modal",{attrs:{show:n.isAddLocaleModalOpen,"on-close":n.closeAddLocaleModal},on:{"update:show":function(e){n.isAddLocaleModalOpen=e}}},[t(n.AddLocale,{attrs:{show:n.isAddLocaleModalOpen,portal:n.currentPortal},on:{cancel:n.closeAddLocaleModal}})],1)],1)}),[],!1,null,null,null);t.default=p.exports}}]);
//# sourceMappingURL=49-293f587f0d09e50cb184.chunk.js.map