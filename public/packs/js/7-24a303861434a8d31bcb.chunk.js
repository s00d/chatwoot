(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{2646:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return s})),r.d(e,"a",(function(){return i})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return p}));var n={1:{id:1,period:"day"},2:{id:2,period:"week"},3:{id:3,period:"month"},4:{id:4,period:"year"}},s={DAY:{id:"DAY",period:"day",translationKey:"REPORT.GROUPING_OPTIONS.DAY"},WEEK:{id:"WEEK",period:"week",translationKey:"REPORT.GROUPING_OPTIONS.WEEK"},MONTH:{id:"MONTH",period:"month",translationKey:"REPORT.GROUPING_OPTIONS.MONTH"},YEAR:{id:"YEAR",period:"year",translationKey:"REPORT.GROUPING_OPTIONS.YEAR"}},i={LAST_7_DAYS:{id:"LAST_7_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_7_DAYS",offset:6,groupByOptions:[s.DAY]},LAST_30_DAYS:{id:"LAST_30_DAYS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_30_DAYS",offset:29,groupByOptions:[s.DAY,s.WEEK]},LAST_3_MONTHS:{id:"LAST_3_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_3_MONTHS",offset:89,groupByOptions:[s.DAY,s.WEEK,s.MONTH]},LAST_6_MONTHS:{id:"LAST_6_MONTHS",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_6_MONTHS",offset:179,groupByOptions:[s.WEEK,s.MONTH]},LAST_YEAR:{id:"LAST_YEAR",translationKey:"REPORT.DATE_RANGE_OPTIONS.LAST_YEAR",offset:364,groupByOptions:[s.WEEK,s.MONTH]},CUSTOM_DATE_RANGE:{id:"CUSTOM_DATE_RANGE",translationKey:"REPORT.DATE_RANGE_OPTIONS.CUSTOM_DATE_RANGE",offset:null,groupByOptions:[s.DAY,s.WEEK,s.MONTH,s.YEAR]}},o='PlusJakarta,-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif',a={type:"bar",backgroundColor:"rgb(31, 147, 255)"},l={datasets:[a],scales:{xAxes:[{ticks:{fontFamily:o},gridLines:{drawOnChartArea:!1}}],yAxes:[{id:"y-left",type:"linear",position:"left",ticks:{fontFamily:o,beginAtZero:!0,stepSize:1,callback:function(t,e,r){return e&&e!==r.length-1?"":t}},gridLines:{drawOnChartArea:!1}}]}},c={datasets:[a],scales:{xAxes:[{ticks:{fontFamily:o},gridLines:{drawOnChartArea:!1}}],yAxes:[{id:"y-left",type:"linear",position:"left",ticks:{fontFamily:o,callback:function(t,e,r){return e&&e!==r.length-1?"":function(t){if(!t)return"";if(t<60)return"".concat(t,"s");if(t<3600){var e=Math.floor(t/60);return"".concat(e,"m")}if(t<86400){var r=Math.floor(t/3600);return"".concat(r,"h")}var n=Math.floor(t/86400);return"".concat(n,"d")}(t)}},gridLines:{drawOnChartArea:!1}}]}},u={conversations_count:l,incoming_messages_count:l,outgoing_messages_count:l,avg_first_response_time:c,reply_time:c,avg_resolution_time:c,resolutions_count:l,bot_resolutions_count:l,bot_handoffs_count:l},p={open:"OPEN",unattended:"UNATTENDED",unassigned:"UNASSIGNED",pending:"PENDING",online:"ONLINE",busy:"BUSY",offline:"OFFLINE"}},2651:function(t,e,r){"use strict";r(53),r(72),r(43),r(77),r(11),r(7),r(9),r(13),r(10),r(14);var n=r(27),s=r(279);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e.a={props:{accountSummaryKey:{type:String,default:"getAccountSummary"}},computed:o(o({},Object(n.mapGetters)({accountReport:"getAccountReports"})),{},{accountSummary:function(){return this.$store.getters[this.accountSummaryKey]}}),methods:{calculateTrend:function(t){if(!this.accountSummary.previous[t])return 0;var e=this.accountSummary[t]-this.accountSummary.previous[t];return Math.round(e/this.accountSummary.previous[t]*100)},displayMetric:function(t){return this.isAverageMetricType(t)?Object(s.e)(this.accountSummary[t]):Number(this.accountSummary[t]||"").toLocaleString()},displayInfoText:function(t){if(this.metrics[this.currentSelection].KEY!==t)return"";if(this.isAverageMetricType(t)){var e=this.accountReport.data.map((function(t){return t.count})).reduce((function(t,e){return t+e}),0);return"".concat(this.metrics[this.currentSelection].INFO_TEXT," ").concat(e)}return""},isAverageMetricType:function(t){return["avg_first_response_time","avg_resolution_time","reply_time"].includes(t)}}}},2797:function(t,e,r){"use strict";r(11),r(72),r(43),r(7),r(9),r(13),r(10),r(14);var n=r(2646),s=r(194),i=r(286),o=r(279),a=r(2651),l={mixins:[a.a],props:{metric:{type:Object,default:function(){return{}}}},methods:{trendColor:function(t,e){return this.isAverageMetricType(e)?t>0?"border-red-500 text-red-500":"border-green-500 text-green-500":t<0?"border-red-500 text-red-500":"border-green-500 text-green-500"}}},c=r(6);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var m={components:{ChartStats:Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-slate-900 dark:text-slate-100"},[e("span",{staticClass:"text-sm"},[t._v("\n    "+t._s(t.metric.NAME)+"\n  ")]),t._v(" "),e("div",{staticClass:"flex items-end"},[e("div",{staticClass:"font-medium text-xl"},[t._v("\n      "+t._s(t.displayMetric(t.metric.KEY))+"\n    ")]),t._v(" "),t.metric.trend?e("div",{staticClass:"text-xs ml-4 flex items-center mb-0.5"},[t.metric.trend<0?e("div",{staticClass:"h-0 w-0 border-x-4 medium border-x-transparent border-t-[8px] mr-1",class:t.trendColor(t.metric.trend,t.metric.KEY)}):e("div",{staticClass:"h-0 w-0 border-x-4 medium border-x-transparent border-b-[8px] mr-1",class:t.trendColor(t.metric.trend,t.metric.KEY)}),t._v(" "),e("span",{staticClass:"font-medium",class:t.trendColor(t.metric.trend,t.metric.KEY)},[t._v("\n        "+t._s(t.calculateTrend(t.metric.KEY))+"%\n      ")])]):t._e()])])}),[],!1,null,null,null).exports},mixins:[a.a],props:{groupBy:{type:Object,default:function(){return{}}},reportKeys:{type:Object,default:function(){return{CONVERSATIONS:"conversations_count",INCOMING_MESSAGES:"incoming_messages_count",OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"}}}},computed:{metrics:function(){var t=this,e=Object.keys(this.reportKeys),r={FIRST_RESPONSE_TIME:this.$t("REPORT.METRICS.FIRST_RESPONSE_TIME.INFO_TEXT"),RESOLUTION_TIME:this.$t("REPORT.METRICS.RESOLUTION_TIME.INFO_TEXT")};return e.map((function(e){return{NAME:t.$t("REPORT.METRICS.".concat(e,".NAME")),KEY:t.reportKeys[e],DESC:t.$t("REPORT.METRICS.".concat(e,".DESC")),INFO_TEXT:r[e],TOOLTIP_TEXT:"REPORT.METRICS.".concat(e,".TOOLTIP_TEXT"),trend:t.calculateTrend(t.reportKeys[e])}}))}},methods:{getCollection:function(t){var e=this;if(!this.accountReport.data[t.KEY])return{};var r=this.accountReport.data[t.KEY];return{labels:r.map((function(t){var r,o,a;if((null===(r=e.groupBy)||void 0===r?void 0:r.period)===n.b[2].period){var l=new Date(Object(s.a)(t.timestamp)),c=l.getDate()-l.getDay(),u=c+6,p=new Date(l.setDate(c)),d=new Date(l.setDate(u));return"".concat(Object(i.a)(p,"dd-MMM")," - ").concat(Object(i.a)(d,"dd-MMM"))}return(null===(o=e.groupBy)||void 0===o?void 0:o.period)===n.b[3].period?Object(i.a)(Object(s.a)(t.timestamp),"MMM-yyyy"):(null===(a=e.groupBy)||void 0===a?void 0:a.period)===n.b[4].period?Object(i.a)(Object(s.a)(t.timestamp),"yyyy"):Object(i.a)(Object(s.a)(t.timestamp),"dd-MMM")})),datasets:n.d[t.KEY].datasets.map((function(n){switch(n.type){case"bar":return p(p({},n),{},{yAxisID:"y-left",label:t.NAME,data:r.map((function(t){return t.value}))});case"line":return p(p({},n),{},{yAxisID:"y-right",label:e.metrics[0].NAME,data:r.map((function(t){return t.count}))});default:return n}}))}},getChartOptions:function(t){var e=this,r={};return this.isAverageMetricType(t.KEY)&&(r.callbacks={label:function(r){return e.$t(t.TOOLTIP_TEXT,{metricValue:Object(o.e)(r.yLabel),conversationCount:e.accountReport.data[t.KEY][r.index].count})}}),{scales:n.d[t.KEY].scales,tooltips:r}}}},f=Object(c.a)(m,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 bg-white dark:bg-slate-800 p-2 border border-slate-100 dark:border-slate-700 rounded-md"},t._l(t.metrics,(function(r){return e("div",{key:r.KEY,staticClass:"p-4 rounded-md mb-3"},[e("chart-stats",{attrs:{metric:r,"account-summary-key":t.accountSummaryKey}}),t._v(" "),e("div",{staticClass:"mt-4 h-72"},[t.accountReport.isFetching[r.KEY]?e("woot-loading-state",{staticClass:"text-xs",attrs:{message:t.$t("REPORT.LOADING_CHART")}}):e("div",{staticClass:"h-72 flex items-center justify-center"},[t.accountReport.data[r.KEY].length?e("woot-bar",{staticClass:"h-72 w-full",attrs:{collection:t.getCollection(r),"chart-options":t.getChartOptions(r)}}):e("span",{staticClass:"text-sm text-slate-600"},[t._v("\n          "+t._s(t.$t("REPORT.NO_ENOUGH_DATA"))+"\n        ")])],1)],1)],1)})),0)}),[],!1,null,null,null);e.a=f.exports},2816:function(t,e,r){"use strict";r(9),r(8),r(25),r(34);var n=r(520),s=r(1773),i=r(158),o=r(1778),a=r(272),l=r(2894),c=r(2646),u={components:{WootDateRangePicker:l.a,Thumbnail:a.a},props:{filterItemsList:{type:Array,default:function(){return[]}},groupByFilterItemsList:{type:Array,default:function(){return[]}},type:{type:String,default:"agent"},selectedGroupByFilter:{type:Object,default:function(){}}},data:function(){return{currentSelectedFilter:null,currentDateRangeSelection:this.$t("REPORT.DATE_RANGE")[0],dateRange:this.$t("REPORT.DATE_RANGE"),customDateRange:[new Date,new Date],currentSelectedGroupByFilter:null,businessHoursSelected:!1}},computed:{isDateRangeSelected:function(){return 5===this.currentDateRangeSelection.id},to:function(){return this.isDateRangeSelected?this.toCustomDate(this.customDateRange[1]):this.toCustomDate(new Date)},from:function(){if(this.isDateRangeSelected)return this.fromCustomDate(this.customDateRange[0]);var t={0:6,1:29,2:89,3:179,4:364}[this.currentDateRangeSelection.id],e=Object(o.a)(new Date,t);return this.fromCustomDate(e)},multiselectLabel:function(){return{agent:this.$t("AGENT_REPORTS.FILTER_DROPDOWN_LABEL"),label:this.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL"),inbox:this.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL"),team:this.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL")}[this.type]||this.$t("FORMS.MULTISELECT.SELECT_ONE")},groupBy:function(){return this.isDateRangeSelected?c.b[4].period:{0:c.b[1].period,1:c.b[2].period,2:c.b[3].period,3:c.b[3].period,4:c.b[4].period}[this.currentDateRangeSelection.id]},notLast7Days:function(){return this.groupBy!==c.b[1].period}},watch:{filterItemsList:function(t){this.currentSelectedFilter=t[0],this.changeFilterSelection()},groupByFilterItemsList:function(){this.currentSelectedGroupByFilter=this.selectedGroupByFilter},businessHoursSelected:function(){this.$emit("business-hours-toggle",this.businessHoursSelected)}},mounted:function(){this.onDateRangeChange()},methods:{onDateRangeChange:function(){this.$emit("date-range-change",{from:this.from,to:this.to,groupBy:this.groupBy})},fromCustomDate:function(t){return Object(s.a)(Object(i.a)(t))},toCustomDate:function(t){return Object(s.a)(Object(n.a)(t))},changeDateSelection:function(t){this.currentDateRangeSelection=t,this.onDateRangeChange()},changeFilterSelection:function(){this.$emit("filter-change",this.currentSelectedFilter)},onChange:function(t){this.customDateRange=t,this.onDateRangeChange()},changeGroupByFilterSelection:function(){this.$emit("group-by-filter-change",this.currentSelectedGroupByFilter)}}},p=r(6),d=Object(p.a)(u,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-col md:flex-row"},[e("div",{staticClass:"flex items-center w-full flex-col md:flex-row"},["agent"===t.type?e("div",{staticClass:"md:w-[240px] w-full multiselect-wrap--small"},[e("p",{staticClass:"text-xs mb-2 font-medium"},[t._v("\n        "+t._s(t.$t("AGENT_REPORTS.FILTER_DROPDOWN_LABEL"))+"\n      ")]),t._v(" "),e("multiselect",{attrs:{placeholder:t.multiselectLabel,label:"name","track-by":"id",options:t.filterItemsList,"option-height":24,"show-labels":!1},on:{input:t.changeFilterSelection},scopedSlots:t._u([{key:"singleLabel",fn:function(r){return[e("div",{staticClass:"flex items-center gap-2"},[e("thumbnail",{attrs:{src:r.option.thumbnail,status:r.option.availability_status,username:r.option.name,size:"22px"}}),t._v(" "),e("span",{staticClass:"reports-option__desc"},[e("span",{staticClass:"my-0 text-slate-800 dark:text-slate-75"},[t._v(t._s(r.option.name))])])],1)]}},{key:"option",fn:function(r){return[e("div",{staticClass:"flex items-center gap-2"},[e("thumbnail",{attrs:{src:r.option.thumbnail,status:r.option.availability_status,username:r.option.name,size:"22px"}}),t._v(" "),e("p",{staticClass:"my-0 text-slate-800 dark:text-slate-75"},[t._v("\n              "+t._s(r.option.name)+"\n            ")])],1)]}}],null,!1,4025078773),model:{value:t.currentSelectedFilter,callback:function(e){t.currentSelectedFilter=e},expression:"currentSelectedFilter"}})],1):"label"===t.type?e("div",{staticClass:"md:w-[240px] w-full multiselect-wrap--small"},[e("p",{staticClass:"text-xs mb-2 font-medium"},[t._v("\n        "+t._s(t.$t("LABEL_REPORTS.FILTER_DROPDOWN_LABEL"))+"\n      ")]),t._v(" "),e("multiselect",{attrs:{placeholder:t.multiselectLabel,label:"title","track-by":"id",options:t.filterItemsList,"option-height":24,"show-labels":!1},on:{input:t.changeFilterSelection},scopedSlots:t._u([{key:"singleLabel",fn:function(r){return[e("div",{staticClass:"flex gap-2 items-center"},[e("div",{staticClass:"rounded-full h-5 w-5",style:{backgroundColor:r.option.color}}),t._v(" "),e("span",{staticClass:"reports-option__desc"},[e("span",{staticClass:"my-0 text-slate-800 dark:text-slate-75"},[t._v("\n                "+t._s(r.option.title)+"\n              ")])])])]}},{key:"option",fn:function(r){return[e("div",{staticClass:"flex items-center gap-2"},[e("div",{staticClass:"rounded-full h-5 w-5 flex-shrink-0 border border-solid border-slate-100 dark:border-slate-800",style:{backgroundColor:r.option.color}}),t._v(" "),e("span",{staticClass:"reports-option__desc"},[e("span",{staticClass:"my-0 text-slate-800 dark:text-slate-75"},[t._v("\n                "+t._s(r.option.title)+"\n              ")])])])]}}]),model:{value:t.currentSelectedFilter,callback:function(e){t.currentSelectedFilter=e},expression:"currentSelectedFilter"}})],1):e("div",{staticClass:"md:w-[240px] w-full multiselect-wrap--small"},[e("p",{staticClass:"text-xs mb-2 font-medium"},["inbox"===t.type?[t._v("\n          "+t._s(t.$t("INBOX_REPORTS.FILTER_DROPDOWN_LABEL"))+"\n        ")]:"team"===t.type?[t._v("\n          "+t._s(t.$t("TEAM_REPORTS.FILTER_DROPDOWN_LABEL"))+"\n        ")]:[t._v("\n          "+t._s(t.$t("FORMS.MULTISELECT.SELECT_ONE"))+"\n        ")]],2),t._v(" "),e("multiselect",{attrs:{"track-by":"id",label:"name",placeholder:t.multiselectLabel,"selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:t.filterItemsList,searchable:!1,"allow-empty":!1},on:{input:t.changeFilterSelection},model:{value:t.currentSelectedFilter,callback:function(e){t.currentSelectedFilter=e},expression:"currentSelectedFilter"}})],1),t._v(" "),e("div",{staticClass:"mx-1 md:w-[240px] w-full multiselect-wrap--small"},[e("p",{staticClass:"text-xs mb-2 font-medium"},[t._v("\n        "+t._s(t.$t("REPORT.DURATION_FILTER_LABEL"))+"\n      ")]),t._v(" "),e("multiselect",{attrs:{"track-by":"name",label:"name",placeholder:t.$t("FORMS.MULTISELECT.SELECT_ONE"),"selected-label":"","select-label":t.$t("FORMS.MULTISELECT.ENTER_TO_SELECT"),"deselect-label":"",options:t.dateRange,searchable:!1,"allow-empty":!1},on:{select:t.changeDateSelection},model:{value:t.currentDateRangeSelection,callback:function(e){t.currentDateRangeSelection=e},expression:"currentDateRangeSelection"}})],1),t._v(" "),t.isDateRangeSelected?e("div",{},[e("p",{staticClass:"text-xs mb-2 font-medium"},[t._v("\n        "+t._s(t.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER"))+"\n      ")]),t._v(" "),e("woot-date-range-picker",{attrs:{"show-range":"",value:t.customDateRange,"confirm-text":t.$t("REPORT.CUSTOM_DATE_RANGE.CONFIRM"),placeholder:t.$t("REPORT.CUSTOM_DATE_RANGE.PLACEHOLDER")},on:{change:t.onChange}})],1):t._e(),t._v(" "),t.notLast7Days?e("div",{staticClass:"mx-1 md:w-[240px] w-full multiselect-wrap--small"},[e("p",{staticClass:"text-xs mb-2 font-medium"},[t._v("\n        "+t._s(t.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL"))+"\n      ")]),t._v(" "),e("multiselect",{attrs:{"track-by":"id",label:"groupBy",placeholder:t.$t("REPORT.GROUP_BY_FILTER_DROPDOWN_LABEL"),options:t.groupByFilterItemsList,"allow-empty":!1,"show-labels":!1},on:{input:t.changeGroupByFilterSelection},model:{value:t.currentSelectedGroupByFilter,callback:function(e){t.currentSelectedGroupByFilter=e},expression:"currentSelectedGroupByFilter"}})],1):t._e()]),t._v(" "),e("div",{staticClass:"flex items-center my-2"},[e("span",{staticClass:"text-sm mx-2 whitespace-nowrap"},[t._v("\n      "+t._s(t.$t("REPORT.BUSINESS_HOURS"))+"\n    ")]),t._v(" "),e("span",[e("woot-switch",{model:{value:t.businessHoursSelected,callback:function(e){t.businessHoursSelected=e},expression:"businessHoursSelected"}})],1)])])}),[],!1,null,null,null).exports,m=r(2797),f=r(2651),_=r(264),O=r(87);function h(t,e,r,n,s,i,o){try{var a=t[i](o),l=a.value}catch(c){return void r(c)}a.done?e(l):Promise.resolve(l).then(n,s)}var E={CONVERSATIONS:"conversations_count",INCOMING_MESSAGES:"incoming_messages_count",OUTGOING_MESSAGES:"outgoing_messages_count",FIRST_RESPONSE_TIME:"avg_first_response_time",RESOLUTION_TIME:"avg_resolution_time",RESOLUTION_COUNT:"resolutions_count",REPLY_TIME:"reply_time"},y={components:{ReportFilters:d,ReportContainer:m.a},mixins:[f.a],props:{type:{type:String,default:"account"},getterKey:{type:String,default:""},actionKey:{type:String,default:""},downloadButtonLabel:{type:String,default:"Download Reports"}},data:function(){return{from:0,to:0,selectedFilter:null,groupBy:c.b[1],groupByfilterItemsList:this.$t("REPORT.GROUP_BY_DAY_OPTIONS"),selectedGroupByFilter:null,businessHours:!1}},computed:{filterItemsList:function(){return this.$store.getters[this.getterKey]||[]}},mounted:function(){this.$store.dispatch(this.actionKey)},methods:{fetchAllData:function(){if(this.selectedFilter){var t=this.from,e=this.to,r=this.groupBy,n=this.businessHours;this.$store.dispatch("fetchAccountSummary",{from:t,to:e,type:this.type,id:this.selectedFilter.id,groupBy:r.period,businessHours:n}),this.fetchChartData()}},fetchChartData:function(){var t=this;["CONVERSATIONS","INCOMING_MESSAGES","OUTGOING_MESSAGES","FIRST_RESPONSE_TIME","RESOLUTION_TIME","RESOLUTION_COUNT","REPLY_TIME"].forEach(function(){var e,r=(e=regeneratorRuntime.mark((function e(r){var n,s,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n=t.from,s=t.to,i=t.groupBy,o=t.businessHours,t.$store.dispatch("fetchAccountReport",{metric:E[r],from:n,to:s,type:t.type,id:t.selectedFilter.id,groupBy:i.period,businessHours:o})}catch(a){t.showAlert(t.$t("REPORT.DATA_FETCHING_FAILED"))}case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,s){var i=e.apply(t,r);function o(t){h(i,n,s,o,a,"next",t)}function a(t){h(i,n,s,o,a,"throw",t)}o(void 0)}))});return function(t){return r.apply(this,arguments)}}())},downloadReports:function(){var t=this.from,e=this.to,r=this.type,n=this.businessHours,s={agent:"downloadAgentReports",label:"downloadLabelReports",inbox:"downloadInboxReports",team:"downloadTeamReports"};if(s[r]){var i={from:t,to:e,fileName:Object(_.b)({type:r,to:e,businessHours:n}),businessHours:n};this.$store.dispatch(s[r],i)}},onDateRangeChange:function(t){var e=this,r=t.from,n=t.to,s=t.groupBy;0!==this.from&&0!==this.to&&this.$track(O.j.FILTER_REPORT,{filterType:"date",reportType:this.type}),this.from=r,this.to=n,this.groupByfilterItemsList=this.fetchFilterItems(s);var i=this.groupByfilterItemsList.filter((function(t){return t.id===e.groupBy.id}));i.length>0?this.selectedGroupByFilter=i[0]:(this.selectedGroupByFilter=this.groupByfilterItemsList[0],this.groupBy=c.b[this.selectedGroupByFilter.id]),this.fetchAllData()},onFilterChange:function(t){t&&(this.selectedFilter=t,this.fetchAllData())},onGroupByFilterChange:function(t){var e;this.groupBy=c.b[t.id],this.fetchAllData(),this.$track(O.j.FILTER_REPORT,{filterType:"groupBy",filterValue:null===(e=this.groupBy)||void 0===e?void 0:e.period,reportType:this.type})},fetchFilterItems:function(t){switch(t){case c.b[2].period:return this.$t("REPORT.GROUP_BY_WEEK_OPTIONS");case c.b[3].period:return this.$t("REPORT.GROUP_BY_MONTH_OPTIONS");case c.b[4].period:return this.$t("REPORT.GROUP_BY_YEAR_OPTIONS");default:return this.$t("REPORT.GROUP_BY_DAY_OPTIONS")}},onBusinessHoursToggle:function(t){this.businessHours=t,this.fetchAllData(),this.$track(O.j.FILTER_REPORT,{filterType:"businessHours",filterValue:t,reportType:this.type})}}},R=y,T=Object(p.a)(R,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-1 overflow-auto p-4"},[e("woot-button",{attrs:{"color-scheme":"success","class-names":"button--fixed-top",icon:"arrow-download"},on:{click:t.downloadReports}},[t._v("\n    "+t._s(t.downloadButtonLabel)+"\n  ")]),t._v(" "),t.filterItemsList?e("report-filters",{attrs:{type:t.type,"filter-items-list":t.filterItemsList,"group-by-filter-items-list":t.groupByfilterItemsList,"selected-group-by-filter":t.selectedGroupByFilter},on:{"date-range-change":t.onDateRangeChange,"filter-change":t.onFilterChange,"group-by-filter-change":t.onGroupByFilterChange,"business-hours-toggle":t.onBusinessHoursToggle}}):t._e(),t._v(" "),t.filterItemsList.length?e("report-container",{attrs:{"group-by":t.groupBy}}):t._e()],1)}),[],!1,null,null,null);e.a=T.exports},2894:function(t,e,r){"use strict";var n={components:{DatePicker:r(2799).a},props:{confirmText:{type:String,default:""},placeholder:{type:String,default:""},value:{type:Array,default:function(){return[]}}},methods:{handleChange:function(t){this.$emit("change",t)}}},s=r(6),i=Object(s.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"date-picker"},[e("date-picker",{attrs:{range:!0,confirm:!0,clearable:!1,editable:!1,"confirm-text":t.confirmText,placeholder:t.placeholder,value:t.value},on:{change:t.handleChange}})],1)}),[],!1,null,null,null);e.a=i.exports}}]);
//# sourceMappingURL=7-24a303861434a8d31bcb.chunk.js.map