{"version":3,"sources":["webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/pages/articles/NewArticle.vue?e973","webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/pages/articles/NewArticle.vue?8b04","webpack:///app/javascript/dashboard/routes/dashboard/helpcenter/pages/articles/NewArticle.vue","webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/pages/articles/NewArticle.vue?b583","webpack:///./app/javascript/dashboard/routes/dashboard/helpcenter/pages/articles/NewArticle.vue"],"names":["component","_vm","this","_h","$createElement","_c","_self","staticClass","class","showArticleSettings","attrs","$t","on","onClickGoBack","openArticleSettings","closeArticleSettings","createNewArticle","_v","newArticle","article","saveArticle","_e"],"mappings":"mHAAA,S,iGCAA,I,s2BC+BA,OACA,YACA,sBACA,kBACA,qBAEA,iBACA,KAPA,WAQA,OACA,gBACA,kBACA,yBACA,uBACA,aAGA,gBACA,sBACA,iCACA,6BACA,yCAJA,IAMA,UANA,WAOA,uCAEA,WATA,WAUA,6DAEA,mBAZA,WAaA,sCAEA,WAfA,WAgBA,4DAGA,SACA,cADA,WAEA,sDAEA,iBAJA,YAIA,I,EAAA,c,EAAA,2JACA,sBACA,sBACA,yBACA,kCAJA,0CAMC,EAAD,mCACA,gCACA,yBACA,qBACA,0BAEA,2BAZA,OAMA,EANA,OAcA,gBACA,oBACA,QACA,cACA,gCACA,gBACA,sBApBA,kDAwBA,gBACA,iDACA,qDACA,4BA3BA,yD,kLA+BA,oBAnCA,WAoCA,6BAEA,qBAtCA,WAuCA,6BAEA,YAzCA,WA0CA,sEACA,qCC7GwO,I,iBCQpOA,EAAY,YACd,GHTW,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,MAAM,CAACE,YAAY,yBAAyBC,MAAM,CAAE,kBAAmBP,EAAIQ,sBAAuB,CAACJ,EAAG,sBAAsB,CAACK,MAAM,CAAC,oBAAoBT,EAAIU,GAAG,0CAA0C,cAAc,QAAQ,kBAAkBV,EAAIQ,qBAAqBG,GAAG,CAAC,KAAOX,EAAIY,cAAc,KAAOZ,EAAIa,oBAAoB,MAAQb,EAAIc,qBAAqB,eAAed,EAAIe,oBAAoBf,EAAIgB,GAAG,KAAKZ,EAAG,iBAAiB,CAACK,MAAM,CAAC,QAAUT,EAAIiB,YAAYN,GAAG,CAAC,eAAeX,EAAIe,qBAAqB,GAAGf,EAAIgB,GAAG,KAAMhB,EAAuB,oBAAEI,EAAG,mBAAmB,CAACK,MAAM,CAAC,QAAUT,EAAIkB,SAASP,GAAG,CAAC,eAAeX,EAAImB,eAAenB,EAAIoB,MAAM,KACnwB,IGWpB,EACA,KACA,WACA,MAIa,UAAArB,E","file":"js/39-4e1a57322caae717bd76.chunk.js","sourcesContent":["export * from \"-!../../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../node_modules/postcss-loader/src/index.js??ref--3-2!../../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewArticle.vue?vue&type=style&index=0&id=974becc4&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"article-container\"},[_c('div',{staticClass:\"new-article--container\",class:{ 'is-sidebar-open': _vm.showArticleSettings }},[_c('edit-article-header',{attrs:{\"back-button-label\":_vm.$t('HELP_CENTER.HEADER.TITLES.ALL_ARTICLES'),\"draft-state\":\"saved\",\"is-sidebar-open\":_vm.showArticleSettings},on:{\"back\":_vm.onClickGoBack,\"open\":_vm.openArticleSettings,\"close\":_vm.closeArticleSettings,\"save-article\":_vm.createNewArticle}}),_vm._v(\" \"),_c('article-editor',{attrs:{\"article\":_vm.newArticle},on:{\"save-article\":_vm.createNewArticle}})],1),_vm._v(\" \"),(_vm.showArticleSettings)?_c('article-settings',{attrs:{\"article\":_vm.article},on:{\"save-article\":_vm.saveArticle}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"article-container\">\n    <div\n      class=\"new-article--container\"\n      :class=\"{ 'is-sidebar-open': showArticleSettings }\"\n    >\n      <edit-article-header\n        :back-button-label=\"$t('HELP_CENTER.HEADER.TITLES.ALL_ARTICLES')\"\n        draft-state=\"saved\"\n        :is-sidebar-open=\"showArticleSettings\"\n        @back=\"onClickGoBack\"\n        @open=\"openArticleSettings\"\n        @close=\"closeArticleSettings\"\n        @save-article=\"createNewArticle\"\n      />\n      <article-editor :article=\"newArticle\" @save-article=\"createNewArticle\" />\n    </div>\n    <article-settings\n      v-if=\"showArticleSettings\"\n      :article=\"article\"\n      @save-article=\"saveArticle\"\n    />\n  </div>\n</template>\n<script>\nimport { mapGetters } from 'vuex';\nimport EditArticleHeader from 'dashboard/routes/dashboard/helpcenter/components/Header/EditArticleHeader';\nimport ArticleEditor from '../../components/ArticleEditor.vue';\nimport portalMixin from '../../mixins/portalMixin';\nimport alertMixin from 'shared/mixins/alertMixin.js';\nimport ArticleSettings from './ArticleSettings.vue';\nexport default {\n  components: {\n    EditArticleHeader,\n    ArticleEditor,\n    ArticleSettings,\n  },\n  mixins: [portalMixin, alertMixin],\n  data() {\n    return {\n      articleTitle: '',\n      articleContent: '',\n      showOpenSidebarButton: false,\n      showArticleSettings: true,\n      article: {},\n    };\n  },\n  computed: {\n    ...mapGetters({\n      currentUserID: 'getCurrentUserID',\n      articles: 'articles/articles',\n      categories: 'categories/allCategories',\n    }),\n    articleId() {\n      return this.$route.params.articleSlug;\n    },\n    newArticle() {\n      return { title: this.articleTitle, content: this.articleContent };\n    },\n    selectedPortalSlug() {\n      return this.$route.params.portalSlug;\n    },\n    categoryId() {\n      return this.categories.length ? this.categories[0].id : null;\n    },\n  },\n  methods: {\n    onClickGoBack() {\n      this.$router.push({ name: 'list_all_locale_articles' });\n    },\n    async createNewArticle({ ...values }) {\n      const { title, content } = values;\n      if (title) this.articleTitle = title;\n      if (content) this.articleContent = content;\n      if (this.articleTitle && this.articleContent) {\n        try {\n          const articleId = await this.$store.dispatch('articles/create', {\n            portalSlug: this.selectedPortalSlug,\n            content: this.articleContent,\n            title: this.articleTitle,\n            author_id: this.currentUserID,\n            // TODO: Change to un categorized later when API supports\n            category_id: this.categoryId,\n          });\n          this.$router.push({\n            name: 'edit_article',\n            params: {\n              articleSlug: articleId,\n              portalSlug: this.selectedPortalSlug,\n              locale: this.locale,\n              recentlyCreated: true,\n            },\n          });\n        } catch (error) {\n          this.alertMessage =\n            error?.message ||\n            this.$t('HELP_CENTER.CREATE_ARTICLE.API.ERROR_MESSAGE');\n          this.showAlert(this.alertMessage);\n        }\n      }\n    },\n    openArticleSettings() {\n      this.showArticleSettings = true;\n    },\n    closeArticleSettings() {\n      this.showArticleSettings = false;\n    },\n    saveArticle() {\n      this.alertMessage = this.$t('HELP_CENTER.CREATE_ARTICLE.ERROR_MESSAGE');\n      this.showAlert(this.alertMessage);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.article-container {\n  display: flex;\n  padding: 0 var(--space-normal);\n  width: 100%;\n  flex: 1;\n  overflow: auto;\n}\n.new-article--container {\n  flex: 1;\n  flex-shrink: 0;\n  overflow-y: auto;\n}\n.is-sidebar-open {\n  flex: 0.7;\n  flex-grow: 1;\n}\n</style>\n","import mod from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewArticle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewArticle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewArticle.vue?vue&type=template&id=974becc4&scoped=true&\"\nimport script from \"./NewArticle.vue?vue&type=script&lang=js&\"\nexport * from \"./NewArticle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewArticle.vue?vue&type=style&index=0&id=974becc4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"974becc4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}