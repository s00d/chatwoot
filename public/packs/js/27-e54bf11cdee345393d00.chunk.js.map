{"version":3,"sources":["webpack:///./app/javascript/shared/helpers/markdownIt/link.js","webpack:///./app/javascript/shared/helpers/MessageFormatter.js","webpack:///./app/javascript/shared/mixins/messageFormatterMixin.js","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./app/javascript/shared/helpers/colorHelper.js","webpack:///./app/javascript/dashboard/assets/images/chatwoot_bot.png","webpack:///./app/javascript/widget/components/UnreadMessage.vue?d69b","webpack:///./app/javascript/widget/components/UnreadMessageList.vue?4d8e","webpack:///./app/javascript/widget/components/UnreadMessageList.vue?2d95","webpack:///./app/javascript/widget/components/UnreadMessage.vue?829b","webpack:///app/javascript/widget/components/UnreadMessage.vue","webpack:///./app/javascript/widget/components/UnreadMessage.vue","webpack:///./app/javascript/widget/components/UnreadMessage.vue?2311","webpack:///app/javascript/widget/components/UnreadMessageList.vue","webpack:///./app/javascript/widget/components/UnreadMessageList.vue?4033","webpack:///./app/javascript/widget/components/UnreadMessageList.vue","webpack:///./app/javascript/widget/views/UnreadMessages.vue?33e0","webpack:///app/javascript/widget/views/UnreadMessages.vue","webpack:///./app/javascript/widget/views/UnreadMessages.vue?5b70","webpack:///./app/javascript/widget/views/UnreadMessages.vue","webpack:///./node_modules/core-js/modules/es.string.trim.js"],"names":["USER_MENTIONS_REGEX","md","require","html","xhtmlOut","breaks","langPrefix","linkify","typographer","quotes","maxNesting","use","renderer","rules","mention","tokens","idx","content","inline","ruler","before","state","silent","label","labelEnd","labelStart","pos","res","token","href","max","posMax","src","charCodeAt","helpers","parseLinkLabel","slice","parseLinkDestination","ok","normalizeLink","str","validateLink","match","RegExp","push","mila","attrs","class","rel","target","TWITTER_USERNAME_REGEX","TWITTER_HASH_REGEX","MessageFormatter","message","isATweet","isAPrivateNote","this","updatedMessage","replace","render","formatMessage","DOMParser","parseFromString","formattedMessage","body","textContent","methods","getPlainText","plainText","truncateMessage","description","length","fails","whitespaces","module","exports","METHOD_NAME","name","isWidgetColorLighter","color","colorToCheck","parseInt","substr","_vm","_c","_self","staticClass","$dm","on","onClickMessage","avatarUrl","agentName","availabilityStatus","_v","_s","companyName","_e","directives","rawName","value","expression","closeFullView","$t","_l","index","key","id","messageType","sender","getMessageContent","campaignId","openConversationView","isBackgroundLighter","style","widgetColor","component","messages","$","$trim","trim","proto","forced","forcedStringTrimMethod"],"mappings":"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","file":"js/27-e54bf11cdee345393d00.chunk.js","sourcesContent":["// Process [@mention](mention://user/1/Pranav)\nconst USER_MENTIONS_REGEX = /mention:\\/\\/(user|team)\\/(\\d+)\\/(.+)/gm;\n\nconst buildMentionTokens = () => (state, silent) => {\n  var label;\n  var labelEnd;\n  var labelStart;\n  var pos;\n  var res;\n  var token;\n  var href = '';\n  var max = state.posMax;\n\n  if (state.src.charCodeAt(state.pos) !== 0x5b /* [ */) {\n    return false;\n  }\n\n  labelStart = state.pos + 1;\n  labelEnd = state.md.helpers.parseLinkLabel(state, state.pos, true);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) {\n    return false;\n  }\n\n  label = state.src.slice(labelStart, labelEnd);\n  pos = labelEnd + 1;\n\n  if (pos < max && state.src.charCodeAt(pos) === 0x28 /* ( */) {\n    pos += 1;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n    }\n    pos += 1;\n  }\n\n  if (!href.match(new RegExp(USER_MENTIONS_REGEX))) {\n    return false;\n  }\n\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    token = state.push('mention', '');\n    token.href = href;\n    token.content = label;\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n\n  return true;\n};\n\nconst renderMentions = () => (tokens, idx) => {\n  return `<span class=\"prosemirror-mention-node\">${tokens[idx].content}</span>`;\n};\n\nexport default function mentionPlugin(md) {\n  md.renderer.rules.mention = renderMentions(md);\n  md.inline.ruler.before('link', 'mention', buildMentionTokens(md));\n}\n","import mila from 'markdown-it-link-attributes';\nimport mentionPlugin from './markdownIt/link';\nconst md = require('markdown-it')({\n  html: false,\n  xhtmlOut: true,\n  breaks: true,\n  langPrefix: 'language-',\n  linkify: true,\n  typographer: true,\n  quotes: '\\u201c\\u201d\\u2018\\u2019',\n  maxNesting: 20,\n})\n  .use(mentionPlugin)\n  .use(mila, {\n    attrs: {\n      class: 'link',\n      rel: 'noreferrer noopener nofollow',\n      target: '_blank',\n    },\n  });\n\nconst TWITTER_USERNAME_REGEX = /(^|[^@\\w])@(\\w{1,15})\\b/g;\nconst TWITTER_USERNAME_REPLACEMENT = '$1[@$2](http://twitter.com/$2)';\nconst TWITTER_HASH_REGEX = /(^|\\s)#(\\w+)/g;\nconst TWITTER_HASH_REPLACEMENT = '$1[#$2](https://twitter.com/hashtag/$2)';\n\nclass MessageFormatter {\n  constructor(message, isATweet = false, isAPrivateNote = false) {\n    this.message = message || '';\n    this.isAPrivateNote = isAPrivateNote;\n    this.isATweet = isATweet;\n  }\n\n  formatMessage() {\n    let updatedMessage = this.message;\n    if (this.isATweet && !this.isAPrivateNote) {\n      updatedMessage = updatedMessage.replace(\n        TWITTER_USERNAME_REGEX,\n        TWITTER_USERNAME_REPLACEMENT\n      );\n      updatedMessage = updatedMessage.replace(\n        TWITTER_HASH_REGEX,\n        TWITTER_HASH_REPLACEMENT\n      );\n    }\n    return md.render(updatedMessage);\n  }\n\n  get formattedMessage() {\n    return this.formatMessage();\n  }\n\n  get plainText() {\n    const strippedOutHtml = new DOMParser().parseFromString(\n      this.formattedMessage,\n      'text/html'\n    );\n    return strippedOutHtml.body.textContent || '';\n  }\n}\n\nexport default MessageFormatter;\n","import MessageFormatter from '../helpers/MessageFormatter';\n\nexport default {\n  methods: {\n    formatMessage(message, isATweet, isAPrivateNote) {\n      const messageFormatter = new MessageFormatter(\n        message,\n        isATweet,\n        isAPrivateNote\n      );\n      return messageFormatter.formattedMessage;\n    },\n    getPlainText(message, isATweet) {\n      const messageFormatter = new MessageFormatter(message, isATweet);\n      return messageFormatter.plainText;\n    },\n    truncateMessage(description = '') {\n      if (description.length < 100) {\n        return description;\n      }\n\n      return `${description.slice(0, 97)}...`;\n    },\n  },\n};\n","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","export const isWidgetColorLighter = color => {\n  const colorToCheck = color.replace('#', '');\n  const c_r = parseInt(colorToCheck.substr(0, 2), 16);\n  const c_g = parseInt(colorToCheck.substr(2, 2), 16);\n  const c_b = parseInt(colorToCheck.substr(4, 2), 16);\n  const brightness = (c_r * 299 + c_g * 587 + c_b * 114) / 1000;\n  return brightness > 225;\n};\n","module.exports = __webpack_public_path__ + \"media/dashboard/assets/images/chatwoot_bot-905112376e6493b37e2cecea8f9dc50c.png\";","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessage.vue?vue&type=style&index=0&id=9854c1aa&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/dist/cjs.js??ref--3-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ref--3-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--3-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessageList.vue?vue&type=style&index=0&id=3663ea63&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"unread-wrap\"},[_c('div',{staticClass:\"close-unread-wrap\"},[_c('button',{staticClass:\"button small close-unread-button\",on:{\"click\":_vm.closeFullView}},[_c('span',{staticClass:\"flex items-center\"},[_c('fluent-icon',{staticClass:\"mr-1\",attrs:{\"icon\":\"dismiss\",\"size\":\"12\"}}),_vm._v(\"\\n        \"+_vm._s(_vm.$t('UNREAD_VIEW.CLOSE_MESSAGES_BUTTON'))+\"\\n      \")],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"unread-messages\"},_vm._l((_vm.messages),function(message,index){return _c('unread-message',{key:message.id,attrs:{\"message-type\":message.messageType,\"message-id\":message.id,\"show-sender\":!index,\"sender\":message.sender,\"message\":_vm.getMessageContent(message),\"campaign-id\":message.campaignId}})}),1),_vm._v(\" \"),_c('div',{staticClass:\"open-read-view-wrap\"},[(_vm.unreadMessageCount)?_c('button',{staticClass:\"button clear-button\",on:{\"click\":_vm.openConversationView}},[_c('span',{staticClass:\"flex items-center\",class:{\n          'is-background-light': _vm.isBackgroundLighter,\n        },style:({\n          color: _vm.widgetColor,\n        })},[_c('fluent-icon',{staticClass:\"mr-2\",attrs:{\"size\":\"16\",\"icon\":\"arrow-right\"}}),_vm._v(\"\\n        \"+_vm._s(_vm.$t('UNREAD_VIEW.VIEW_MESSAGES_BUTTON'))+\"\\n      \")],1)]):_vm._e()])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessage.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"chat-bubble-wrap\">\n    <button\n      class=\"chat-bubble agent\"\n      :class=\"$dm('bg-white', 'dark:bg-slate-50')\"\n      @click=\"onClickMessage\"\n    >\n      <div v-if=\"showSender\" class=\"row--agent-block\">\n        <thumbnail\n          :src=\"avatarUrl\"\n          size=\"20px\"\n          :username=\"agentName\"\n          :status=\"availabilityStatus\"\n        />\n        <span class=\"agent--name\">{{ agentName }}</span>\n        <span class=\"company--name\"> {{ companyName }}</span>\n      </div>\n      <div\n        v-dompurify-html=\"formatMessage(message, false)\"\n        class=\"message-content\"\n      />\n    </button>\n  </div>\n</template>\n\n<script>\nimport messageFormatterMixin from 'shared/mixins/messageFormatterMixin';\nimport Thumbnail from 'dashboard/components/widgets/Thumbnail.vue';\nimport configMixin from '../mixins/configMixin';\nimport { isEmptyObject } from 'widget/helpers/utils';\nimport {\n  ON_CAMPAIGN_MESSAGE_CLICK,\n  ON_UNREAD_MESSAGE_CLICK,\n} from '../constants/widgetBusEvents';\nimport darkModeMixin from 'widget/mixins/darkModeMixin';\nexport default {\n  name: 'UnreadMessage',\n  components: { Thumbnail },\n  mixins: [messageFormatterMixin, configMixin, darkModeMixin],\n  props: {\n    message: {\n      type: String,\n      default: '',\n    },\n    showSender: {\n      type: Boolean,\n      default: false,\n    },\n    sender: {\n      type: Object,\n      default: () => {},\n    },\n    campaignId: {\n      type: Number,\n      default: null,\n    },\n  },\n  computed: {\n    companyName() {\n      return `${this.$t('UNREAD_VIEW.COMPANY_FROM')} ${\n        this.channelConfig.websiteName\n      }`;\n    },\n    avatarUrl() {\n      // eslint-disable-next-line\n      const BotImage = require('dashboard/assets/images/chatwoot_bot.png');\n      const displayImage = this.useInboxAvatarForBot\n        ? this.inboxAvatarUrl\n        : BotImage;\n      if (this.isSenderExist(this.sender)) {\n        const { avatar_url: avatarUrl } = this.sender;\n        return avatarUrl;\n      }\n      return displayImage;\n    },\n    agentName() {\n      if (this.isSenderExist(this.sender)) {\n        const { available_name: availableName } = this.sender;\n        return availableName;\n      }\n      if (this.useInboxAvatarForBot) {\n        return this.channelConfig.websiteName;\n      }\n      return this.$t('UNREAD_VIEW.BOT');\n    },\n    availabilityStatus() {\n      if (this.isSenderExist(this.sender)) {\n        const { availability_status: availabilityStatus } = this.sender;\n        return availabilityStatus;\n      }\n      return null;\n    },\n  },\n  methods: {\n    isSenderExist(sender) {\n      return sender && !isEmptyObject(sender);\n    },\n    onClickMessage() {\n      if (this.campaignId) {\n        bus.$emit(ON_CAMPAIGN_MESSAGE_CLICK, this.campaignId);\n      } else {\n        bus.$emit(ON_UNREAD_MESSAGE_CLICK);\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables.scss';\n.chat-bubble {\n  max-width: 85%;\n  padding: $space-normal;\n  cursor: pointer;\n}\n\n.row--agent-block {\n  align-items: center;\n  display: flex;\n  text-align: left;\n  padding-bottom: $space-small;\n  font-size: $font-size-small;\n  .agent--name {\n    font-weight: $font-weight-medium;\n    margin-left: $space-smaller;\n  }\n  .company--name {\n    color: $color-light-gray;\n    margin-left: $space-smaller;\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./UnreadMessage.vue?vue&type=template&id=9854c1aa&scoped=true&\"\nimport script from \"./UnreadMessage.vue?vue&type=script&lang=js&\"\nexport * from \"./UnreadMessage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UnreadMessage.vue?vue&type=style&index=0&id=9854c1aa&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9854c1aa\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-bubble-wrap\"},[_c('button',{staticClass:\"chat-bubble agent\",class:_vm.$dm('bg-white', 'dark:bg-slate-50'),on:{\"click\":_vm.onClickMessage}},[(_vm.showSender)?_c('div',{staticClass:\"row--agent-block\"},[_c('thumbnail',{attrs:{\"src\":_vm.avatarUrl,\"size\":\"20px\",\"username\":_vm.agentName,\"status\":_vm.availabilityStatus}}),_vm._v(\" \"),_c('span',{staticClass:\"agent--name\"},[_vm._v(_vm._s(_vm.agentName))]),_vm._v(\" \"),_c('span',{staticClass:\"company--name\"},[_vm._v(\" \"+_vm._s(_vm.companyName))])],1):_vm._e(),_vm._v(\" \"),_c('div',{directives:[{name:\"dompurify-html\",rawName:\"v-dompurify-html\",value:(_vm.formatMessage(_vm.message, false)),expression:\"formatMessage(message, false)\"}],staticClass:\"message-content\"})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"unread-wrap\">\n    <div class=\"close-unread-wrap\">\n      <button class=\"button small close-unread-button\" @click=\"closeFullView\">\n        <span class=\"flex items-center\">\n          <fluent-icon class=\"mr-1\" icon=\"dismiss\" size=\"12\" />\n          {{ $t('UNREAD_VIEW.CLOSE_MESSAGES_BUTTON') }}\n        </span>\n      </button>\n    </div>\n    <div class=\"unread-messages\">\n      <unread-message\n        v-for=\"(message, index) in messages\"\n        :key=\"message.id\"\n        :message-type=\"message.messageType\"\n        :message-id=\"message.id\"\n        :show-sender=\"!index\"\n        :sender=\"message.sender\"\n        :message=\"getMessageContent(message)\"\n        :campaign-id=\"message.campaignId\"\n      />\n    </div>\n\n    <div class=\"open-read-view-wrap\">\n      <button\n        v-if=\"unreadMessageCount\"\n        class=\"button clear-button\"\n        @click=\"openConversationView\"\n      >\n        <span\n          class=\"flex items-center\"\n          :class=\"{\n            'is-background-light': isBackgroundLighter,\n          }\"\n          :style=\"{\n            color: widgetColor,\n          }\"\n        >\n          <fluent-icon class=\"mr-2\" size=\"16\" icon=\"arrow-right\" />\n          {{ $t('UNREAD_VIEW.VIEW_MESSAGES_BUTTON') }}\n        </span>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport configMixin from '../mixins/configMixin';\nimport { ON_UNREAD_MESSAGE_CLICK } from '../constants/widgetBusEvents';\nimport FluentIcon from 'shared/components/FluentIcon/Index.vue';\nimport UnreadMessage from 'widget/components/UnreadMessage.vue';\nimport { isWidgetColorLighter } from 'shared/helpers/colorHelper';\n\nexport default {\n  name: 'Unread',\n  components: {\n    FluentIcon,\n    UnreadMessage,\n  },\n  mixins: [configMixin],\n  props: {\n    messages: {\n      type: Array,\n      required: true,\n    },\n  },\n  computed: {\n    ...mapGetters({\n      unreadMessageCount: 'conversation/getUnreadMessageCount',\n      widgetColor: 'appConfig/getWidgetColor',\n    }),\n    sender() {\n      const [firstMessage] = this.messages;\n      return firstMessage.sender || {};\n    },\n    isBackgroundLighter() {\n      return isWidgetColorLighter(this.widgetColor);\n    },\n  },\n  methods: {\n    openConversationView() {\n      bus.$emit(ON_UNREAD_MESSAGE_CLICK);\n    },\n    closeFullView() {\n      this.$emit('close');\n    },\n    getMessageContent(message) {\n      const { attachments, content } = message;\n      const hasAttachments = attachments && attachments.length;\n\n      if (content) return content;\n\n      if (hasAttachments) return `ðŸ“‘`;\n\n      return '';\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n@import '~widget/assets/scss/variables';\n\n.unread-wrap {\n  width: 100%;\n  height: auto;\n  max-height: 100vh;\n  background: transparent;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n  justify-content: flex-end;\n  overflow: hidden;\n\n  .unread-messages {\n    padding-bottom: $space-small;\n  }\n\n  .clear-button {\n    background: transparent;\n    color: $color-woot;\n    border: 0;\n    font-weight: $font-weight-bold;\n    font-size: $font-size-medium;\n    transition: all 0.3s var(--ease-in-cubic);\n    margin-left: $space-smaller;\n    padding: 0 $space-one 0 0;\n\n    &:hover {\n      transform: translateX($space-smaller);\n      color: $color-primary-dark;\n    }\n  }\n\n  .close-unread-button {\n    background: $color-background;\n    color: $color-light-gray;\n    border: 0;\n    font-weight: $font-weight-medium;\n    font-size: $font-size-mini;\n    transition: all 0.3s var(--ease-in-cubic);\n    margin-bottom: $space-slab;\n    border-radius: $space-normal;\n\n    &:hover {\n      color: $color-body;\n    }\n  }\n  .is-background-light {\n    color: $color-body !important;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessageList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessageList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UnreadMessageList.vue?vue&type=template&id=3663ea63&scoped=true&\"\nimport script from \"./UnreadMessageList.vue?vue&type=script&lang=js&\"\nexport * from \"./UnreadMessageList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UnreadMessageList.vue?vue&type=style&index=0&id=3663ea63&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3663ea63\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('unread-message-list',{attrs:{\"messages\":_vm.messages},on:{\"close\":_vm.closeFullView}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <unread-message-list :messages=\"messages\" @close=\"closeFullView\" />\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport { IFrameHelper } from 'widget/helpers/utils';\nimport UnreadMessageList from '../components/UnreadMessageList.vue';\n\nexport default {\n  name: 'UnreadMessages',\n  components: {\n    UnreadMessageList,\n  },\n  computed: {\n    ...mapGetters({\n      messages: 'conversation/getUnreadTextMessages',\n    }),\n  },\n  methods: {\n    closeFullView() {\n      if (IFrameHelper.isIFrame()) {\n        IFrameHelper.sendMessage({ event: 'toggleBubble' });\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessages.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--7-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnreadMessages.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UnreadMessages.vue?vue&type=template&id=1c439afd&\"\nimport script from \"./UnreadMessages.vue?vue&type=script&lang=js&\"\nexport * from \"./UnreadMessages.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n"],"sourceRoot":""}