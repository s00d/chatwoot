(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{117:function(e,t,a){"use strict";a(42),a(40),a(60),a(563),a(179),a(305),a(27);var n=a(543),r=a(544),s=a.n(r),i=a(239);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=/(^|[^@\w])@(\w{1,15})\b/g,l=/(^|\s)#(\w+)/g,g=/mention:\/\/(user|team)\/(\d+)\/(.+)/gm,d=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(this,e),this.message=s.a.sanitize(Object(i.c)(t||"")),this.isAPrivateNote=r,this.isATweet=a,this.marked=n.marked;var c={heading:function(e){return"<strong>".concat(e,"</strong>")},blockquote:function(e){var t=e.replace(/^ *> ?/gm,"");return"<blockquote>".concat(t,"</blockquote>")},link:function(e,t,a){var n=new RegExp(g);return e.match(n)?'<span class="prosemirror-mention-node">'.concat(a,"</span>"):'<a rel="noreferrer noopener nofollow" href="'.concat(e,'" class="link" title="').concat(t||"",'" target="_blank">').concat(a,"</a>")}};this.marked.use({renderer:c})}var t,a,r;return t=e,(a=[{key:"formatMessage",value:function(){if(this.isATweet&&!this.isAPrivateNote){var e=this.message.replace(u,'$1<a href="http://twitter.com/$2" target="_blank" rel="noreferrer nofollow noopener">@$2</a>').replace(l,'$1<a href="https://twitter.com/hashtag/$2" target="_blank" rel="noreferrer nofollow noopener">#$2</a>');return Object(n.marked)(e)}return s.a.addHook("afterSanitizeAttributes",i.a),s.a.sanitize(Object(n.marked)(this.message.replace(/&gt;+/g,">"),{breaks:!0,gfm:!0,sanitize:!1}))}},{key:"formattedMessage",get:function(){return this.formatMessage()}},{key:"plainText",get:function(){return(new DOMParser).parseFromString(this.formattedMessage,"text/html").body.textContent||""}}])&&c(t.prototype,a),r&&c(t,r),e}(),f=d;t.a={methods:{formatMessage:function(e,t,a){return new f(e,t,a).formattedMessage},getPlainText:function(e,t){return new f(e,t).plainText},truncateMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.length<100?e:"".concat(e.slice(0,97),"...")}}}},1795:function(e,t,a){"use strict";a(599)},1796:function(e,t,a){"use strict";a(600)},2506:function(e,t,a){e.exports=a.p+"media/dashboard/assets/images/chatwoot_bot-905112376e6493b37e2cecea8f9dc50c.png"},2529:function(e,t,a){},2530:function(e,t,a){},2551:function(e,t,a){"use strict";a(5),a(2),a(4),a(10),a(7),a(11),a(23),a(9),a(26),a(21),a(24),a(22),a(42),a(20),a(44);var n=a(73),r=a(3),s=a(280),i=a(297),o=a(525),c=(a(30),a(27),a(117)),u=a(55),l=a(223),g={name:"UnreadMessage",components:{Thumbnail:u.a},mixins:[c.a,s.a,l.a],props:{message:{type:String,default:""},showSender:{type:Boolean,default:!1},sender:{type:Object,default:function(){}},campaignId:{type:Number,default:null}},computed:{companyName:function(){return"".concat(this.$t("UNREAD_VIEW.COMPANY_FROM")," ").concat(this.channelConfig.websiteName)},avatarUrl:function(){var e=a(2506),t=this.useInboxAvatarForBot?this.inboxAvatarUrl:e;if(this.isSenderExist(this.sender)){var n=this.sender.avatar_url;return n}return t},agentName:function(){if(this.isSenderExist(this.sender)){var e=this.sender,t=e.available_name,a=e.name;return t||a}return this.$t("UNREAD_VIEW.BOT")},availabilityStatus:function(){if(this.isSenderExist(this.sender)){var e=this.sender.availability_status;return e}return null}},methods:{isSenderExist:function(e){return e&&!Object(n.d)(e)},onClickMessage:function(){this.campaignId?bus.$emit(i.b,this.campaignId):bus.$emit(i.c)}}},d=(a(2568),a(0)),f=Object(d.a)(g,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chat-bubble-wrap"},[a("button",{staticClass:"chat-bubble agent",class:e.$dm("bg-white","dark:bg-slate-50"),on:{click:e.onClickMessage}},[e.showSender?a("div",{staticClass:"row--agent-block"},[a("thumbnail",{attrs:{src:e.avatarUrl,size:"20px",username:e.agentName,status:e.availabilityStatus}}),e._v(" "),a("span",{staticClass:"agent--name"},[e._v(e._s(e.agentName))]),e._v(" "),a("span",{staticClass:"company--name"},[e._v(" "+e._s(e.companyName))])],1):e._e(),e._v(" "),a("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:e.formatMessage(e.message,!1),expression:"formatMessage(message, false)"}],staticClass:"message-content"})])])}),[],!1,null,"7466f37b",null).exports;function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==a)return;var n,r,s=[],i=!0,o=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(c){o=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return s}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var v={name:"Unread",components:{FluentIcon:o.a,UnreadMessage:f},mixins:[s.a],props:{messages:{type:Array,required:!0}},computed:h(h({},Object(r.mapGetters)({unreadMessageCount:"conversation/getUnreadMessageCount"})),{},{sender:function(){return b(this.messages,1)[0].sender||{}}}),methods:{openConversationView:function(){bus.$emit(i.c)},closeFullView:function(){n.a.isIFrame()&&n.a.sendMessage({event:"toggleBubble"})},getMessageContent:function(e){var t=e.attachments,a=e.content,n=t&&t.length;return a||(n?"\ud83d\udcd1":"")}}},w=(a(2569),Object(d.a)(v,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"unread-wrap"},[a("div",{staticClass:"close-unread-wrap"},[a("button",{staticClass:"button small close-unread-button",on:{click:e.closeFullView}},[a("span",{staticClass:"flex items-center"},[a("fluent-icon",{staticClass:"mr-1",attrs:{icon:"dismiss",size:"12"}}),e._v("\n        "+e._s(e.$t("UNREAD_VIEW.CLOSE_MESSAGES_BUTTON"))+"\n      ")],1)])]),e._v(" "),a("div",{staticClass:"unread-messages"},e._l(e.messages,(function(t,n){return a("unread-message",{key:t.id,attrs:{"message-type":t.messageType,"message-id":t.id,"show-sender":!n,sender:t.sender,message:e.getMessageContent(t),"campaign-id":t.campaignId}})})),1),e._v(" "),a("div",{staticClass:"open-read-view-wrap"},[e.unreadMessageCount?a("button",{staticClass:"button clear-button",on:{click:e.openConversationView}},[a("span",{staticClass:"flex items-center"},[a("fluent-icon",{staticClass:"mr-2",attrs:{size:"16",icon:"arrow-right"}}),e._v("\n        "+e._s(e.$t("UNREAD_VIEW.VIEW_MESSAGES_BUTTON"))+"\n      ")],1)]):e._e()])])}),[],!1,null,"1a40eeea",null));t.a=w.exports},2568:function(e,t,a){"use strict";a(2529)},2569:function(e,t,a){"use strict";a(2530)},526:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));a(562),a(40),a(60);var n=function(){var e=12*(window.devicePixelRatio||1),t=document.createElement("canvas");if(!t.getContext||!t.getContext("2d")||"function"!==typeof t.getContext("2d").fillText)return!1;var a=t.getContext("2d");return a.fillStyle="#f00",a.textBaseline="top",a.font="32px Arial",a.fillText("\ud83d\udc28",0,0),0!==a.getImageData(e,e,1,1).data[0]},r=function(e){return e?e.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"").replace(/\s+/g," ").trim():""}},55:function(e,t,a){"use strict";a(30),a(40),a(60),a(27),a(211),a(143),a(5),a(2),a(4),a(10),a(7),a(11);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i={name:"Avatar",props:{username:{type:String,default:""},backgroundColor:{type:String,default:"#c2e1ff"},color:{type:String,default:"#1976cc"},customStyle:{type:Object,default:void 0},size:{type:Number,default:40},src:{type:String,default:""},rounded:{type:Boolean,default:!0},variant:{type:String,default:"circle"}},computed:{style:function(){var e={width:"".concat(this.size,"px"),height:"".concat(this.size,"px"),borderRadius:"square"===this.variant?"var(--border-radius-large)":"50%",lineHeight:"".concat(this.size+Math.floor(this.size/20),"px"),fontSize:"".concat(Math.floor(this.size/2.5),"px")};return this.backgroundColor&&(e=r(r({},e),{},{backgroundColor:this.backgroundColor})),this.color&&(e=r(r({},e),{},{color:this.color})),e},userInitial:function(){return this.initials||this.initial(this.username)}},methods:{initial:function(e){for(var t=e?e.split(/[ -]/):[],a="",n=0;n<t.length;n+=1)a+=t[n].charAt(0);return a.length>2&&-1!==a.search(/[A-Z]/)&&(a=a.replace(/[a-z]+/g,"")),a=a.substring(0,2).toUpperCase()}}},o=(a(1795),a(0)),c=Object(o.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"avatar-container",style:[e.style,e.customStyle],attrs:{"aria-hidden":"true"}},[a("span",[e._v(e._s(e.userInitial))])])}),[],!1,null,"523373d1",null).exports,u=a(526),l={components:{Avatar:c},props:{src:{type:String,default:""},size:{type:String,default:"40px"},badge:{type:String,default:"fb"},username:{type:String,default:""},status:{type:String,default:""},hasBorder:{type:Boolean,default:!1},shouldShowStatusAlways:{type:Boolean,default:!1},variant:{type:String,default:"circle"}},data:function(){return{imgError:!1}},computed:{userNameWithoutEmoji:function(){return Object(u.b)(this.username)},showStatusIndicator:function(){return!!this.shouldShowStatusAlways||("online"===this.status||"busy"===this.status)},avatarSize:function(){return Number(this.size.replace(/\D+/g,""))},badgeStyle:function(){var e=Math.floor(this.avatarSize/3),t="".concat(e+2,"px");return{width:t,height:t,borderRadius:"".concat(e/2,"px")}},statusStyle:function(){var e="".concat(this.avatarSize/4,"px");return{width:e,height:e}},thumbnailClass:function(){var e=this.hasBorder?"border":"",t="circle"===this.variant?"thumbnail-rounded":"thumbnail-square";return"user-thumbnail ".concat(e," ").concat(t)}},watch:{src:{handler:function(e,t){e!==t&&this.imgError&&(this.imgError=!1)}}},methods:{onImgError:function(){this.imgError=!0}}},g=(a(1796),Object(o.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-thumbnail-box",style:{height:e.size,width:e.size}},[!e.imgError&&Boolean(e.src)?a("img",{class:e.thumbnailClass,attrs:{id:"image",src:e.src},on:{error:function(t){return e.onImgError()}}}):a("Avatar",{class:e.thumbnailClass,attrs:{username:e.userNameWithoutEmoji,size:e.avatarSize,variant:e.variant}}),e._v(" "),"instagram_direct_message"===e.badge?a("img",{staticClass:"source-badge",style:e.badgeStyle,attrs:{id:"badge",src:"/integrations/channels/badges/instagram-dm.png"}}):"facebook"===e.badge?a("img",{staticClass:"source-badge",style:e.badgeStyle,attrs:{id:"badge",src:"/integrations/channels/badges/messenger.png"}}):"twitter-tweet"===e.badge?a("img",{staticClass:"source-badge",style:e.badgeStyle,attrs:{id:"badge",src:"/integrations/channels/badges/twitter-tweet.png"}}):"twitter-dm"===e.badge?a("img",{staticClass:"source-badge",style:e.badgeStyle,attrs:{id:"badge",src:"/integrations/channels/badges/twitter-dm.png"}}):"whatsapp"===e.badge?a("img",{staticClass:"source-badge",style:e.badgeStyle,attrs:{id:"badge",src:"/integrations/channels/badges/whatsapp.png"}}):"sms"===e.badge?a("img",{staticClass:"source-badge",style:e.badgeStyle,attrs:{id:"badge",src:"/integrations/channels/badges/sms.png"}}):"Channel::Line"===e.badge?a("img",{staticClass:"source-badge",style:e.badgeStyle,attrs:{id:"badge",src:"/integrations/channels/badges/line.png"}}):"Channel::Telegram"===e.badge?a("img",{staticClass:"source-badge",style:e.badgeStyle,attrs:{id:"badge",src:"/integrations/channels/badges/telegram.png"}}):e._e(),e._v(" "),e.showStatusIndicator?a("div",{class:"source-badge user-online-status user-online-status--"+e.status,style:e.statusStyle}):e._e()],1)}),[],!1,null,"45592b56",null));t.a=g.exports},599:function(e,t,a){},600:function(e,t,a){}}]);
//# sourceMappingURL=1-60ff261844a8837484a2.chunk.js.map