(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{3099:function(e,t,r){},3237:function(e,t,r){"use strict";r(3099)},3301:function(e,t,r){"use strict";r.r(t);r(20),r(2022),r(9),r(4),r(7),r(10),r(8),r(11),r(12),r(17);var i=r(6),a=r(3127),s=r(3125),n=r(3128),c=r(80),o=r(409),l=r(15),u=r(56),p=r(2019),E=r(48);function h(e,t,r,i,a,s,n){try{var c=e[s](n),o=c.value}catch(l){return void r(l)}c.done?t(o):Promise.resolve(o).then(i,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var s=e.apply(t,r);function n(e){h(s,i,a,n,c,"next",e)}function c(e){h(s,i,a,n,c,"throw",e)}n(void 0)}))}}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=u.b.ARTICLE_STATUS_TYPES,S={components:{EditArticleHeader:a.a,ArticleEditor:s.a,Spinner:c.a,ArticleSettings:n.a},mixins:[o.a,l.a],data:function(){return{isUpdating:!1,isSaved:!1,showArticleSettings:!0,alertMessage:"",showDeleteConfirmationPopup:!1}},computed:g(g({},Object(i.mapGetters)({isFetching:"articles/isFetching",articles:"articles/articles"})),{},{article:function(){return this.$store.getters["articles/articleById"](this.articleId)},articleId:function(){return this.$route.params.articleSlug},selectedPortalSlug:function(){return this.$route.params.portalSlug},selectedLocale:function(){return this.$route.params.locale},portalLink:function(){var e=this.$route.params.portalSlug;return Object(p.a)(e,this.article.category.slug,this.article.category.locale,this.article.slug)}}),mounted:function(){this.fetchArticleDetails()},methods:{onClickGoBack:function(){this.$router.push({name:"list_all_locale_articles"})},fetchArticleDetails:function(){this.$store.dispatch("articles/show",{id:this.articleId,portalSlug:this.selectedPortalSlug})},openDeletePopup:function(){this.showDeleteConfirmationPopup=!0},closeDeletePopup:function(){this.showDeleteConfirmationPopup=!1},confirmDeletion:function(){var e;this.closeDeletePopup(),this.deleteArticle(),this.$track(E.h.DELETE_ARTICLE,{status:null===(e=this.article)||void 0===e?void 0:e.status})},saveArticle:function(e){var t=this;return d(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=Object.assign({},e),t.isUpdating=!0,r.prev=2,r.next=5,t.$store.dispatch("articles/update",g({portalSlug:t.selectedPortalSlug,articleId:t.articleId},i));case 5:r.next=11;break;case 7:r.prev=7,r.t0=r.catch(2),t.alertMessage=(null===r.t0||void 0===r.t0?void 0:r.t0.message)||t.$t("HELP_CENTER.EDIT_ARTICLE.API.ERROR"),t.showAlert(t.alertMessage);case 11:return r.prev=11,setTimeout((function(){t.isUpdating=!1,t.isSaved=!0}),1500),r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[2,7,11,14]])})))()},deleteArticle:function(){var e=this;return d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("articles/delete",{portalSlug:e.selectedPortalSlug,articleId:e.articleId});case 3:e.alertMessage=e.$t("HELP_CENTER.DELETE_ARTICLE.API.SUCCESS_MESSAGE"),e.$router.push({name:"list_all_locale_articles",params:{portalSlug:e.selectedPortalSlug,locale:e.locale,recentlyDeleted:!0}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.alertMessage=(null===t.t0||void 0===t.t0?void 0:t.t0.message)||e.$t("HELP_CENTER.DELETE_ARTICLE.API.ERROR_MESSAGE");case 10:return t.prev=10,e.showAlert(e.alertMessage),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})))()},archiveArticle:function(){var e=this;return d(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("articles/update",{portalSlug:e.selectedPortalSlug,articleId:e.articleId,status:A.ARCHIVE});case 3:e.alertMessage=e.$t("HELP_CENTER.ARCHIVE_ARTICLE.API.SUCCESS"),e.$track(E.h.ARCHIVE_ARTICLE,{uiFrom:"sidebar"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.alertMessage=(null===t.t0||void 0===t.t0?void 0:t.t0.message)||e.$t("HELP_CENTER.ARCHIVE_ARTICLE.API.ERROR");case 10:return t.prev=10,e.showAlert(e.alertMessage),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})))()},updateMeta:function(){var e={portalSlug:this.selectedPortalSlug,locale:this.selectedLocale};return this.$store.dispatch("portals/show",e)},openArticleSettings:function(){this.showArticleSettings=!0},closeArticleSettings:function(){this.showArticleSettings=!1},showArticleInPortal:function(){var e;window.open(this.portalLink,"_blank"),this.$track(E.h.PREVIEW_ARTICLE,{status:null===(e=this.article)||void 0===e?void 0:e.status})}}},R=(r(3237),r(0)),C=Object(R.a)(S,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"article-container"},[t("div",{staticClass:"edit-article--container",class:{"is-sidebar-open":e.showArticleSettings}},[t("edit-article-header",{attrs:{"back-button-label":e.$t("HELP_CENTER.HEADER.TITLES.ALL_ARTICLES"),"is-updating":e.isUpdating,"is-saved":e.isSaved,"is-sidebar-open":e.showArticleSettings},on:{back:e.onClickGoBack,open:e.openArticleSettings,close:e.closeArticleSettings,show:e.showArticleInPortal,"update-meta":e.updateMeta}}),e._v(" "),e.isFetching?t("div",{staticClass:"text-center p-normal fs-default h-full"},[t("spinner",{attrs:{size:""}}),e._v(" "),t("span",[e._v(e._s(e.$t("HELP_CENTER.EDIT_ARTICLE.LOADING")))])],1):t("article-editor",{attrs:{"is-settings-sidebar-open":e.showArticleSettings,article:e.article},on:{"save-article":e.saveArticle}})],1),e._v(" "),e.showArticleSettings?t("article-settings",{attrs:{article:e.article},on:{"save-article":e.saveArticle,"delete-article":e.openDeletePopup,"archive-article":e.archiveArticle,"update-meta":e.updateMeta}}):e._e(),e._v(" "),t("woot-delete-modal",{attrs:{show:e.showDeleteConfirmationPopup,"on-close":e.closeDeletePopup,"on-confirm":e.confirmDeletion,title:e.$t("HELP_CENTER.DELETE_ARTICLE.MODAL.CONFIRM.TITLE"),message:e.$t("HELP_CENTER.DELETE_ARTICLE.MODAL.CONFIRM.MESSAGE"),"confirm-text":e.$t("HELP_CENTER.DELETE_ARTICLE.MODAL.CONFIRM.YES"),"reject-text":e.$t("HELP_CENTER.DELETE_ARTICLE.MODAL.CONFIRM.NO")},on:{"update:show":function(t){e.showDeleteConfirmationPopup=t}}})],1)}),[],!1,null,"02b10300",null);t.default=C.exports}}]);
//# sourceMappingURL=49-6e628399c60bc39d35f4.chunk.js.map